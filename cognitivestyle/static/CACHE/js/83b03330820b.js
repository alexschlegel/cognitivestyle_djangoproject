(function(window,undefined){var
rootjQuery,readyList,core_strundefined=typeof undefined,location=window.location,document=window.document,docElem=document.documentElement,_jQuery=window.jQuery,_$=window.$,class2type={},core_deletedIds=[],core_version="2.0.3",core_concat=core_deletedIds.concat,core_push=core_deletedIds.push,core_slice=core_deletedIds.slice,core_indexOf=core_deletedIds.indexOf,core_toString=class2type.toString,core_hasOwn=class2type.hasOwnProperty,core_trim=core_version.trim,jQuery=function(selector,context){return new jQuery.fn.init(selector,context,rootjQuery);},core_pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,core_rnotwhite=/\S+/g,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return letter.toUpperCase();},completed=function(){document.removeEventListener("DOMContentLoaded",completed,false);window.removeEventListener("load",completed,false);jQuery.ready();};jQuery.fn=jQuery.prototype={jquery:core_version,constructor:jQuery,init:function(selector,context,rootjQuery){var match,elem;if(!selector){return this;}
if(typeof selector==="string"){if(selector.charAt(0)==="<"&&selector.charAt(selector.length-1)===">"&&selector.length>=3){match=[null,selector,null];}else{match=rquickExpr.exec(selector);}
if(match&&(match[1]||!context)){if(match[1]){context=context instanceof jQuery?context[0]:context;jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,true));if(rsingleTag.test(match[1])&&jQuery.isPlainObject(context)){for(match in context){if(jQuery.isFunction(this[match])){this[match](context[match]);}else{this.attr(match,context[match]);}}}
return this;}else{elem=document.getElementById(match[2]);if(elem&&elem.parentNode){this.length=1;this[0]=elem;}
this.context=document;this.selector=selector;return this;}}else if(!context||context.jquery){return(context||rootjQuery).find(selector);}else{return this.constructor(context).find(selector);}}else if(selector.nodeType){this.context=this[0]=selector;this.length=1;return this;}else if(jQuery.isFunction(selector)){return rootjQuery.ready(selector);}
if(selector.selector!==undefined){this.selector=selector.selector;this.context=selector.context;}
return jQuery.makeArray(selector,this);},selector:"",length:0,toArray:function(){return core_slice.call(this);},get:function(num){return num==null?this.toArray():(num<0?this[this.length+num]:this[num]);},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);ret.prevObject=this;ret.context=this.context;return ret;},each:function(callback,args){return jQuery.each(this,callback,args);},ready:function(fn){jQuery.ready.promise().done(fn);return this;},slice:function(){return this.pushStack(core_slice.apply(this,arguments));},first:function(){return this.eq(0);},last:function(){return this.eq(-1);},eq:function(i){var len=this.length,j=+i+(i<0?len:0);return this.pushStack(j>=0&&j<len?[this[j]]:[]);},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem);}));},end:function(){return this.prevObject||this.constructor(null);},push:core_push,sort:[].sort,splice:[].splice};jQuery.fn.init.prototype=jQuery.fn;jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[1]||{};i=2;}
if(typeof target!=="object"&&!jQuery.isFunction(target)){target={};}
if(length===i){target=this;--i;}
for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue;}
if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&jQuery.isArray(src)?src:[];}else{clone=src&&jQuery.isPlainObject(src)?src:{};}
target[name]=jQuery.extend(deep,clone,copy);}else if(copy!==undefined){target[name]=copy;}}}}
return target;};jQuery.extend({expando:"jQuery"+(core_version+Math.random()).replace(/\D/g,""),noConflict:function(deep){if(window.$===jQuery){window.$=_$;}
if(deep&&window.jQuery===jQuery){window.jQuery=_jQuery;}
return jQuery;},isReady:false,readyWait:1,holdReady:function(hold){if(hold){jQuery.readyWait++;}else{jQuery.ready(true);}},ready:function(wait){if(wait===true?--jQuery.readyWait:jQuery.isReady){return;}
jQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>0){return;}
readyList.resolveWith(document,[jQuery]);if(jQuery.fn.trigger){jQuery(document).trigger("ready").off("ready");}},isFunction:function(obj){return jQuery.type(obj)==="function";},isArray:Array.isArray,isWindow:function(obj){return obj!=null&&obj===obj.window;},isNumeric:function(obj){return!isNaN(parseFloat(obj))&&isFinite(obj);},type:function(obj){if(obj==null){return String(obj);}
return typeof obj==="object"||typeof obj==="function"?class2type[core_toString.call(obj)]||"object":typeof obj;},isPlainObject:function(obj){if(jQuery.type(obj)!=="object"||obj.nodeType||jQuery.isWindow(obj)){return false;}
try{if(obj.constructor&&!core_hasOwn.call(obj.constructor.prototype,"isPrototypeOf")){return false;}}catch(e){return false;}
return true;},isEmptyObject:function(obj){var name;for(name in obj){return false;}
return true;},error:function(msg){throw new Error(msg);},parseHTML:function(data,context,keepScripts){if(!data||typeof data!=="string"){return null;}
if(typeof context==="boolean"){keepScripts=context;context=false;}
context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];if(parsed){return[context.createElement(parsed[1])];}
parsed=jQuery.buildFragment([data],context,scripts);if(scripts){jQuery(scripts).remove();}
return jQuery.merge([],parsed.childNodes);},parseJSON:JSON.parse,parseXML:function(data){var xml,tmp;if(!data||typeof data!=="string"){return null;}
try{tmp=new DOMParser();xml=tmp.parseFromString(data,"text/xml");}catch(e){xml=undefined;}
if(!xml||xml.getElementsByTagName("parsererror").length){jQuery.error("Invalid XML: "+data);}
return xml;},noop:function(){},globalEval:function(code){var script,indirect=eval;code=jQuery.trim(code);if(code){if(code.indexOf("use strict")===1){script=document.createElement("script");script.text=code;document.head.appendChild(script).parentNode.removeChild(script);}else{indirect(code);}}},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase);},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase();},each:function(obj,callback,args){var value,i=0,length=obj.length,isArray=isArraylike(obj);if(args){if(isArray){for(;i<length;i++){value=callback.apply(obj[i],args);if(value===false){break;}}}else{for(i in obj){value=callback.apply(obj[i],args);if(value===false){break;}}}}else{if(isArray){for(;i<length;i++){value=callback.call(obj[i],i,obj[i]);if(value===false){break;}}}else{for(i in obj){value=callback.call(obj[i],i,obj[i]);if(value===false){break;}}}}
return obj;},trim:function(text){return text==null?"":core_trim.call(text);},makeArray:function(arr,results){var ret=results||[];if(arr!=null){if(isArraylike(Object(arr))){jQuery.merge(ret,typeof arr==="string"?[arr]:arr);}else{core_push.call(ret,arr);}}
return ret;},inArray:function(elem,arr,i){return arr==null?-1:core_indexOf.call(arr,elem,i);},merge:function(first,second){var l=second.length,i=first.length,j=0;if(typeof l==="number"){for(;j<l;j++){first[i++]=second[j];}}else{while(second[j]!==undefined){first[i++]=second[j++];}}
first.length=i;return first;},grep:function(elems,callback,inv){var retVal,ret=[],i=0,length=elems.length;inv=!!inv;for(;i<length;i++){retVal=!!callback(elems[i],i);if(inv!==retVal){ret.push(elems[i]);}}
return ret;},map:function(elems,callback,arg){var value,i=0,length=elems.length,isArray=isArraylike(elems),ret=[];if(isArray){for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null){ret[ret.length]=value;}}}else{for(i in elems){value=callback(elems[i],i,arg);if(value!=null){ret[ret.length]=value;}}}
return core_concat.apply([],ret);},guid:1,proxy:function(fn,context){var tmp,args,proxy;if(typeof context==="string"){tmp=fn[context];context=fn;fn=tmp;}
if(!jQuery.isFunction(fn)){return undefined;}
args=core_slice.call(arguments,2);proxy=function(){return fn.apply(context||this,args.concat(core_slice.call(arguments)));};proxy.guid=fn.guid=fn.guid||jQuery.guid++;return proxy;},access:function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,length=elems.length,bulk=key==null;if(jQuery.type(key)==="object"){chainable=true;for(i in key){jQuery.access(elems,fn,i,key[i],true,emptyGet,raw);}}else if(value!==undefined){chainable=true;if(!jQuery.isFunction(value)){raw=true;}
if(bulk){if(raw){fn.call(elems,value);fn=null;}else{bulk=fn;fn=function(elem,key,value){return bulk.call(jQuery(elem),value);};}}
if(fn){for(;i<length;i++){fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)));}}}
return chainable?elems:bulk?fn.call(elems):length?fn(elems[0],key):emptyGet;},now:Date.now,swap:function(elem,options,callback,args){var ret,name,old={};for(name in options){old[name]=elem.style[name];elem.style[name]=options[name];}
ret=callback.apply(elem,args||[]);for(name in options){elem.style[name]=old[name];}
return ret;}});jQuery.ready.promise=function(obj){if(!readyList){readyList=jQuery.Deferred();if(document.readyState==="complete"){setTimeout(jQuery.ready);}else{document.addEventListener("DOMContentLoaded",completed,false);window.addEventListener("load",completed,false);}}
return readyList.promise(obj);};jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase();});function isArraylike(obj){var length=obj.length,type=jQuery.type(obj);if(jQuery.isWindow(obj)){return false;}
if(obj.nodeType===1&&length){return true;}
return type==="array"||type!=="function"&&(length===0||typeof length==="number"&&length>0&&(length-1)in obj);}
rootjQuery=jQuery(document);(function(window,undefined){var i,support,cachedruns,Expr,getText,isXML,compile,outermostContext,sortInput,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+-(new Date()),preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),hasDuplicate=false,sortOrder=function(a,b){if(a===b){hasDuplicate=true;return 0;}
return 0;},strundefined=typeof undefined,MAX_NEGATIVE=1<<31,hasOwn=({}).hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=arr.indexOf||function(elem){var i=0,len=this.length;for(;i<len;i++){if(this[i]===elem){return i;}}
return-1;},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),attributes="\\["+whitespace+"*("+characterEncoding+")"+whitespace+"*(?:([*^$|!~]?=)"+whitespace+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+identifier+")|)|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+attributes.replace(3,8)+")*)|.*)\\)|)",rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rsibling=new RegExp(whitespace+"*[+~]"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={"ID":new RegExp("^#("+characterEncoding+")"),"CLASS":new RegExp("^\\.("+characterEncoding+")"),"TAG":new RegExp("^("+characterEncoding.replace("w","w*")+")"),"ATTR":new RegExp("^"+attributes),"PSEUDO":new RegExp("^"+pseudos),"CHILD":new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),"bool":new RegExp("^(?:"+booleans+")$","i"),"needsContext":new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+
whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rescape=/'|\\/g,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-0x10000;return high!==high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+0x10000):String.fromCharCode(high>>10|0xD800,high&0x3FF|0xDC00);};try{push.apply((arr=slice.call(preferredDoc.childNodes)),preferredDoc.childNodes);arr[preferredDoc.childNodes.length].nodeType;}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els));}:function(target,els){var j=target.length,i=0;while((target[j++]=els[i++])){}
target.length=j-1;}};}
function Sizzle(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;if((context?context.ownerDocument||context:preferredDoc)!==document){setDocument(context);}
context=context||document;results=results||[];if(!selector||typeof selector!=="string"){return results;}
if((nodeType=context.nodeType)!==1&&nodeType!==9){return[];}
if(documentIsHTML&&!seed){if((match=rquickExpr.exec(selector))){if((m=match[1])){if(nodeType===9){elem=context.getElementById(m);if(elem&&elem.parentNode){if(elem.id===m){results.push(elem);return results;}}else{return results;}}else{if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m){results.push(elem);return results;}}}else if(match[2]){push.apply(results,context.getElementsByTagName(selector));return results;}else if((m=match[3])&&support.getElementsByClassName&&context.getElementsByClassName){push.apply(results,context.getElementsByClassName(m));return results;}}
if(support.qsa&&(!rbuggyQSA||!rbuggyQSA.test(selector))){nid=old=expando;newContext=context;newSelector=nodeType===9&&selector;if(nodeType===1&&context.nodeName.toLowerCase()!=="object"){groups=tokenize(selector);if((old=context.getAttribute("id"))){nid=old.replace(rescape,"\\$&");}else{context.setAttribute("id",nid);}
nid="[id='"+nid+"'] ";i=groups.length;while(i--){groups[i]=nid+toSelector(groups[i]);}
newContext=rsibling.test(selector)&&context.parentNode||context;newSelector=groups.join(",");}
if(newSelector){try{push.apply(results,newContext.querySelectorAll(newSelector));return results;}catch(qsaError){}finally{if(!old){context.removeAttribute("id");}}}}}
return select(selector.replace(rtrim,"$1"),context,results,seed);}
function createCache(){var keys=[];function cache(key,value){if(keys.push(key+=" ")>Expr.cacheLength){delete cache[keys.shift()];}
return(cache[key]=value);}
return cache;}
function markFunction(fn){fn[expando]=true;return fn;}
function assert(fn){var div=document.createElement("div");try{return!!fn(div);}catch(e){return false;}finally{if(div.parentNode){div.parentNode.removeChild(div);}
div=null;}}
function addHandle(attrs,handler){var arr=attrs.split("|"),i=attrs.length;while(i--){Expr.attrHandle[arr[i]]=handler;}}
function siblingCheck(a,b){var cur=b&&a,diff=cur&&a.nodeType===1&&b.nodeType===1&&(~b.sourceIndex||MAX_NEGATIVE)-
(~a.sourceIndex||MAX_NEGATIVE);if(diff){return diff;}
if(cur){while((cur=cur.nextSibling)){if(cur===b){return-1;}}}
return a?1:-1;}
function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type===type;};}
function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&elem.type===type;};}
function createPositionalPseudo(fn){return markFunction(function(argument){argument=+argument;return markFunction(function(seed,matches){var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;while(i--){if(seed[(j=matchIndexes[i])]){seed[j]=!(matches[j]=seed[j]);}}});});}
isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?documentElement.nodeName!=="HTML":false;};support=Sizzle.support={};setDocument=Sizzle.setDocument=function(node){var doc=node?node.ownerDocument||node:preferredDoc,parent=doc.defaultView;if(doc===document||doc.nodeType!==9||!doc.documentElement){return document;}
document=doc;docElem=doc.documentElement;documentIsHTML=!isXML(doc);if(parent&&parent.attachEvent&&parent!==parent.top){parent.attachEvent("onbeforeunload",function(){setDocument();});}
support.attributes=assert(function(div){div.className="i";return!div.getAttribute("className");});support.getElementsByTagName=assert(function(div){div.appendChild(doc.createComment(""));return!div.getElementsByTagName("*").length;});support.getElementsByClassName=assert(function(div){div.innerHTML="<div class='a'></div><div class='a i'></div>";div.firstChild.className="i";return div.getElementsByClassName("i").length===2;});support.getById=assert(function(div){docElem.appendChild(div).id=expando;return!doc.getElementsByName||!doc.getElementsByName(expando).length;});if(support.getById){Expr.find["ID"]=function(id,context){if(typeof context.getElementById!==strundefined&&documentIsHTML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[];}};Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId;};};}else{delete Expr.find["ID"];Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!==strundefined&&elem.getAttributeNode("id");return node&&node.value===attrId;};};}
Expr.find["TAG"]=support.getElementsByTagName?function(tag,context){if(typeof context.getElementsByTagName!==strundefined){return context.getElementsByTagName(tag);}}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if(tag==="*"){while((elem=results[i++])){if(elem.nodeType===1){tmp.push(elem);}}
return tmp;}
return results;};Expr.find["CLASS"]=support.getElementsByClassName&&function(className,context){if(typeof context.getElementsByClassName!==strundefined&&documentIsHTML){return context.getElementsByClassName(className);}};rbuggyMatches=[];rbuggyQSA=[];if((support.qsa=rnative.test(doc.querySelectorAll))){assert(function(div){div.innerHTML="<select><option selected=''></option></select>";if(!div.querySelectorAll("[selected]").length){rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")");}
if(!div.querySelectorAll(":checked").length){rbuggyQSA.push(":checked");}});assert(function(div){var input=doc.createElement("input");input.setAttribute("type","hidden");div.appendChild(input).setAttribute("t","");if(div.querySelectorAll("[t^='']").length){rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")");}
if(!div.querySelectorAll(":enabled").length){rbuggyQSA.push(":enabled",":disabled");}
div.querySelectorAll("*,:x");rbuggyQSA.push(",.*:");});}
if((support.matchesSelector=rnative.test((matches=docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector)))){assert(function(div){support.disconnectedMatch=matches.call(div,"div");matches.call(div,"[s!='']:x");rbuggyMatches.push("!=",pseudos);});}
rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|"));rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|"));contains=rnative.test(docElem.contains)||docElem.compareDocumentPosition?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&(adown.contains?adown.contains(bup):a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16));}:function(a,b){if(b){while((b=b.parentNode)){if(b===a){return true;}}}
return false;};sortOrder=docElem.compareDocumentPosition?function(a,b){if(a===b){hasDuplicate=true;return 0;}
var compare=b.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(b);if(compare){if(compare&1||(!support.sortDetached&&b.compareDocumentPosition(a)===compare)){if(a===doc||contains(preferredDoc,a)){return-1;}
if(b===doc||contains(preferredDoc,b)){return 1;}
return sortInput?(indexOf.call(sortInput,a)-indexOf.call(sortInput,b)):0;}
return compare&4?-1:1;}
return a.compareDocumentPosition?-1:1;}:function(a,b){var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(a===b){hasDuplicate=true;return 0;}else if(!aup||!bup){return a===doc?-1:b===doc?1:aup?-1:bup?1:sortInput?(indexOf.call(sortInput,a)-indexOf.call(sortInput,b)):0;}else if(aup===bup){return siblingCheck(a,b);}
cur=a;while((cur=cur.parentNode)){ap.unshift(cur);}
cur=b;while((cur=cur.parentNode)){bp.unshift(cur);}
while(ap[i]===bp[i]){i++;}
return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0;};return doc;};Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements);};Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document){setDocument(elem);}
expr=expr.replace(rattributeQuotes,"='$1']");if(support.matchesSelector&&documentIsHTML&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr))){try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&elem.document.nodeType!==11){return ret;}}catch(e){}}
return Sizzle(expr,document,null,[elem]).length>0;};Sizzle.contains=function(context,elem){if((context.ownerDocument||context)!==document){setDocument(context);}
return contains(context,elem);};Sizzle.attr=function(elem,name){if((elem.ownerDocument||elem)!==document){setDocument(elem);}
var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):undefined;return val===undefined?support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null:val;};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg);};Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;hasDuplicate=!support.detectDuplicates;sortInput=!support.sortStable&&results.slice(0);results.sort(sortOrder);if(hasDuplicate){while((elem=results[i++])){if(elem===results[i]){j=duplicates.push(i);}}
while(j--){results.splice(duplicates[j],1);}}
return results;};getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(!nodeType){for(;(node=elem[i]);i++){ret+=getText(node);}}else if(nodeType===1||nodeType===9||nodeType===11){if(typeof elem.textContent==="string"){return elem.textContent;}else{for(elem=elem.firstChild;elem;elem=elem.nextSibling){ret+=getText(elem);}}}else if(nodeType===3||nodeType===4){return elem.nodeValue;}
return ret;};Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{"ATTR":function(match){match[1]=match[1].replace(runescape,funescape);match[3]=(match[4]||match[5]||"").replace(runescape,funescape);if(match[2]==="~="){match[3]=" "+match[3]+" ";}
return match.slice(0,4);},"CHILD":function(match){match[1]=match[1].toLowerCase();if(match[1].slice(0,3)==="nth"){if(!match[3]){Sizzle.error(match[0]);}
match[4]=+(match[4]?match[5]+(match[6]||1):2*(match[3]==="even"||match[3]==="odd"));match[5]=+((match[7]+match[8])||match[3]==="odd");}else if(match[3]){Sizzle.error(match[0]);}
return match;},"PSEUDO":function(match){var excess,unquoted=!match[5]&&match[2];if(matchExpr["CHILD"].test(match[0])){return null;}
if(match[3]&&match[4]!==undefined){match[2]=match[4];}else if(unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,true))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)){match[0]=match[0].slice(0,excess);match[2]=unquoted.slice(0,excess);}
return match.slice(0,3);}},filter:{"TAG":function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return nodeNameSelector==="*"?function(){return true;}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName;};},"CLASS":function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test(typeof elem.className==="string"&&elem.className||typeof elem.getAttribute!==strundefined&&elem.getAttribute("class")||"");});},"ATTR":function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);if(result==null){return operator==="!=";}
if(!operator){return true;}
result+="";return operator==="="?result===check:operator==="!="?result!==check:operator==="^="?check&&result.indexOf(check)===0:operator==="*="?check&&result.indexOf(check)>-1:operator==="$="?check&&result.slice(-check.length)===check:operator==="~="?(" "+result+" ").indexOf(check)>-1:operator==="|="?result===check||result.slice(0,check.length+1)===check+"-":false;};},"CHILD":function(type,what,argument,first,last){var simple=type.slice(0,3)!=="nth",forward=type.slice(-4)!=="last",ofType=what==="of-type";return first===1&&last===0?function(elem){return!!elem.parentNode;}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){while(dir){node=elem;while((node=node[dir])){if(ofType?node.nodeName.toLowerCase()===name:node.nodeType===1){return false;}}
start=dir=type==="only"&&!start&&"nextSibling";}
return true;}
start=[forward?parent.firstChild:parent.lastChild];if(forward&&useCache){outerCache=parent[expando]||(parent[expando]={});cache=outerCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=cache[0]===dirruns&&cache[2];node=nodeIndex&&parent.childNodes[nodeIndex];while((node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())){if(node.nodeType===1&&++diff&&node===elem){outerCache[type]=[dirruns,nodeIndex,diff];break;}}}else if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns){diff=cache[1];}else{while((node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())){if((ofType?node.nodeName.toLowerCase()===name:node.nodeType===1)&&++diff){if(useCache){(node[expando]||(node[expando]={}))[type]=[dirruns,diff];}
if(node===elem){break;}}}}
diff-=last;return diff===first||(diff%first===0&&diff/first>=0);}};},"PSEUDO":function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);if(fn[expando]){return fn(argument);}
if(fn.length>1){args=[pseudo,pseudo,"",argument];return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){var idx,matched=fn(seed,argument),i=matched.length;while(i--){idx=indexOf.call(seed,matched[i]);seed[idx]=!(matches[idx]=matched[i]);}}):function(elem){return fn(elem,0,args);};}
return fn;}},pseudos:{"not":markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;while(i--){if((elem=unmatched[i])){seed[i]=!(matches[i]=elem);}}}):function(elem,context,xml){input[0]=elem;matcher(input,null,xml,results);return!results.pop();};}),"has":markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0;};}),"contains":markFunction(function(text){return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1;};}),"lang":markFunction(function(lang){if(!ridentifier.test(lang||"")){Sizzle.error("unsupported lang: "+lang);}
lang=lang.replace(runescape,funescape).toLowerCase();return function(elem){var elemLang;do{if((elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang"))){elemLang=elemLang.toLowerCase();return elemLang===lang||elemLang.indexOf(lang+"-")===0;}}while((elem=elem.parentNode)&&elem.nodeType===1);return false;};}),"target":function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id;},"root":function(elem){return elem===docElem;},"focus":function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex);},"enabled":function(elem){return elem.disabled===false;},"disabled":function(elem){return elem.disabled===true;},"checked":function(elem){var nodeName=elem.nodeName.toLowerCase();return(nodeName==="input"&&!!elem.checked)||(nodeName==="option"&&!!elem.selected);},"selected":function(elem){if(elem.parentNode){elem.parentNode.selectedIndex;}
return elem.selected===true;},"empty":function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling){if(elem.nodeName>"@"||elem.nodeType===3||elem.nodeType===4){return false;}}
return true;},"parent":function(elem){return!Expr.pseudos["empty"](elem);},"header":function(elem){return rheader.test(elem.nodeName);},"input":function(elem){return rinputs.test(elem.nodeName);},"button":function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type==="button"||name==="button";},"text":function(elem){var attr;return elem.nodeName.toLowerCase()==="input"&&elem.type==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()===elem.type);},"first":createPositionalPseudo(function(){return[0];}),"last":createPositionalPseudo(function(matchIndexes,length){return[length-1];}),"eq":createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument];}),"even":createPositionalPseudo(function(matchIndexes,length){var i=0;for(;i<length;i+=2){matchIndexes.push(i);}
return matchIndexes;}),"odd":createPositionalPseudo(function(matchIndexes,length){var i=1;for(;i<length;i+=2){matchIndexes.push(i);}
return matchIndexes;}),"lt":createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;--i>=0;){matchIndexes.push(i);}
return matchIndexes;}),"gt":createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;++i<length;){matchIndexes.push(i);}
return matchIndexes;})}};Expr.pseudos["nth"]=Expr.pseudos["eq"];for(i in{radio:true,checkbox:true,file:true,password:true,image:true}){Expr.pseudos[i]=createInputPseudo(i);}
for(i in{submit:true,reset:true}){Expr.pseudos[i]=createButtonPseudo(i);}
function setFilters(){}
setFilters.prototype=Expr.filters=Expr.pseudos;Expr.setFilters=new setFilters();function tokenize(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached){return parseOnly?0:cached.slice(0);}
soFar=selector;groups=[];preFilters=Expr.preFilter;while(soFar){if(!matched||(match=rcomma.exec(soFar))){if(match){soFar=soFar.slice(match[0].length)||soFar;}
groups.push(tokens=[]);}
matched=false;if((match=rcombinators.exec(soFar))){matched=match.shift();tokens.push({value:matched,type:match[0].replace(rtrim," ")});soFar=soFar.slice(matched.length);}
for(type in Expr.filter){if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match)))){matched=match.shift();tokens.push({value:matched,type:type,matches:match});soFar=soFar.slice(matched.length);}}
if(!matched){break;}}
return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0);}
function toSelector(tokens){var i=0,len=tokens.length,selector="";for(;i<len;i++){selector+=tokens[i].value;}
return selector;}
function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&dir==="parentNode",doneName=done++;return combinator.first?function(elem,context,xml){while((elem=elem[dir])){if(elem.nodeType===1||checkNonElements){return matcher(elem,context,xml);}}}:function(elem,context,xml){var data,cache,outerCache,dirkey=dirruns+" "+doneName;if(xml){while((elem=elem[dir])){if(elem.nodeType===1||checkNonElements){if(matcher(elem,context,xml)){return true;}}}}else{while((elem=elem[dir])){if(elem.nodeType===1||checkNonElements){outerCache=elem[expando]||(elem[expando]={});if((cache=outerCache[dir])&&cache[0]===dirkey){if((data=cache[1])===true||data===cachedruns){return data===true;}}else{cache=outerCache[dir]=[dirkey];cache[1]=matcher(elem,context,xml)||cachedruns;if(cache[1]===true){return true;}}}}}};}
function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){var i=matchers.length;while(i--){if(!matchers[i](elem,context,xml)){return false;}}
return true;}:matchers[0];}
function condense(unmatched,map,filter,context,xml){var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=map!=null;for(;i<len;i++){if((elem=unmatched[i])){if(!filter||filter(elem,context,xml)){newUnmatched.push(elem);if(mapped){map.push(i);}}}}
return newUnmatched;}
function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){if(postFilter&&!postFilter[expando]){postFilter=setMatcher(postFilter);}
if(postFinder&&!postFinder[expando]){postFinder=setMatcher(postFinder,postSelector);}
return markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=preFilter&&(seed||!selector)?condense(elems,preMap,preFilter,context,xml):elems,matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher){matcher(matcherIn,matcherOut,context,xml);}
if(postFilter){temp=condense(matcherOut,postMap);postFilter(temp,[],context,xml);i=temp.length;while(i--){if((elem=temp[i])){matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem);}}}
if(seed){if(postFinder||preFilter){if(postFinder){temp=[];i=matcherOut.length;while(i--){if((elem=matcherOut[i])){temp.push((matcherIn[i]=elem));}}
postFinder(null,(matcherOut=[]),temp,xml);}
i=matcherOut.length;while(i--){if((elem=matcherOut[i])&&(temp=postFinder?indexOf.call(seed,elem):preMap[i])>-1){seed[temp]=!(results[temp]=elem);}}}}else{matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut);if(postFinder){postFinder(null,results,matcherOut,xml);}else{push.apply(results,matcherOut);}}});}
function matcherFromTokens(tokens){var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext;},implicitRelative,true),matchAnyContext=addCombinator(function(elem){return indexOf.call(checkContext,elem)>-1;},implicitRelative,true),matchers=[function(elem,context,xml){return(!leadingRelative&&(xml||context!==outermostContext))||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml));}];for(;i<len;i++){if((matcher=Expr.relative[tokens[i].type])){matchers=[addCombinator(elementMatcher(matchers),matcher)];}else{matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches);if(matcher[expando]){j=++i;for(;j<len;j++){if(Expr.relative[tokens[j].type]){break;}}
return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:tokens[i-2].type===" "?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens((tokens=tokens.slice(j))),j<len&&toSelector(tokens));}
matchers.push(matcher);}}
return elementMatcher(matchers);}
function matcherFromGroupMatchers(elementMatchers,setMatchers){var matcherCachedRuns=0,bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,expandContext){var elem,j,matcher,setMatched=[],matchedCount=0,i="0",unmatched=seed&&[],outermost=expandContext!=null,contextBackup=outermostContext,elems=seed||byElement&&Expr.find["TAG"]("*",expandContext&&context.parentNode||context),dirrunsUnique=(dirruns+=contextBackup==null?1:Math.random()||0.1);if(outermost){outermostContext=context!==document&&context;cachedruns=matcherCachedRuns;}
for(;(elem=elems[i])!=null;i++){if(byElement&&elem){j=0;while((matcher=elementMatchers[j++])){if(matcher(elem,context,xml)){results.push(elem);break;}}
if(outermost){dirruns=dirrunsUnique;cachedruns=++matcherCachedRuns;}}
if(bySet){if((elem=!matcher&&elem)){matchedCount--;}
if(seed){unmatched.push(elem);}}}
matchedCount+=i;if(bySet&&i!==matchedCount){j=0;while((matcher=setMatchers[j++])){matcher(unmatched,setMatched,context,xml);}
if(seed){if(matchedCount>0){while(i--){if(!(unmatched[i]||setMatched[i])){setMatched[i]=pop.call(results);}}}
setMatched=condense(setMatched);}
push.apply(results,setMatched);if(outermost&&!seed&&setMatched.length>0&&(matchedCount+setMatchers.length)>1){Sizzle.uniqueSort(results);}}
if(outermost){dirruns=dirrunsUnique;outermostContext=contextBackup;}
return unmatched;};return bySet?markFunction(superMatcher):superMatcher;}
compile=Sizzle.compile=function(selector,group){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){if(!group){group=tokenize(selector);}
i=group.length;while(i--){cached=matcherFromTokens(group[i]);if(cached[expando]){setMatchers.push(cached);}else{elementMatchers.push(cached);}}
cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers));}
return cached;};function multipleContexts(selector,contexts,results){var i=0,len=contexts.length;for(;i<len;i++){Sizzle(selector,contexts[i],results);}
return results;}
function select(selector,context,results,seed){var i,tokens,token,type,find,match=tokenize(selector);if(!seed){if(match.length===1){tokens=match[0]=match[0].slice(0);if(tokens.length>2&&(token=tokens[0]).type==="ID"&&support.getById&&context.nodeType===9&&documentIsHTML&&Expr.relative[tokens[1].type]){context=(Expr.find["ID"](token.matches[0].replace(runescape,funescape),context)||[])[0];if(!context){return results;}
selector=selector.slice(tokens.shift().value.length);}
i=matchExpr["needsContext"].test(selector)?0:tokens.length;while(i--){token=tokens[i];if(Expr.relative[(type=token.type)]){break;}
if((find=Expr.find[type])){if((seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&context.parentNode||context))){tokens.splice(i,1);selector=seed.length&&toSelector(tokens);if(!selector){push.apply(results,seed);return results;}
break;}}}}}
compile(selector,match)(seed,context,!documentIsHTML,results,rsibling.test(selector));return results;}
support.sortStable=expando.split("").sort(sortOrder).join("")===expando;support.detectDuplicates=hasDuplicate;setDocument();support.sortDetached=assert(function(div1){return div1.compareDocumentPosition(document.createElement("div"))&1;});if(!assert(function(div){div.innerHTML="<a href='#'></a>";return div.firstChild.getAttribute("href")==="#";})){addHandle("type|href|height|width",function(elem,name,isXML){if(!isXML){return elem.getAttribute(name,name.toLowerCase()==="type"?1:2);}});}
if(!support.attributes||!assert(function(div){div.innerHTML="<input/>";div.firstChild.setAttribute("value","");return div.firstChild.getAttribute("value")==="";})){addHandle("value",function(elem,name,isXML){if(!isXML&&elem.nodeName.toLowerCase()==="input"){return elem.defaultValue;}});}
if(!assert(function(div){return div.getAttribute("disabled")==null;})){addHandle(booleans,function(elem,name,isXML){var val;if(!isXML){return(val=elem.getAttributeNode(name))&&val.specified?val.value:elem[name]===true?name.toLowerCase():null;}});}
jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.pseudos;jQuery.unique=Sizzle.uniqueSort;jQuery.text=Sizzle.getText;jQuery.isXMLDoc=Sizzle.isXML;jQuery.contains=Sizzle.contains;})(window);var optionsCache={};function createOptions(options){var object=optionsCache[options]={};jQuery.each(options.match(core_rnotwhite)||[],function(_,flag){object[flag]=true;});return object;}
jQuery.Callbacks=function(options){options=typeof options==="string"?(optionsCache[options]||createOptions(options)):jQuery.extend({},options);var
memory,fired,firing,firingStart,firingLength,firingIndex,list=[],stack=!options.once&&[],fire=function(data){memory=options.memory&&data;fired=true;firingIndex=firingStart||0;firingStart=0;firingLength=list.length;firing=true;for(;list&&firingIndex<firingLength;firingIndex++){if(list[firingIndex].apply(data[0],data[1])===false&&options.stopOnFalse){memory=false;break;}}
firing=false;if(list){if(stack){if(stack.length){fire(stack.shift());}}else if(memory){list=[];}else{self.disable();}}},self={add:function(){if(list){var start=list.length;(function add(args){jQuery.each(args,function(_,arg){var type=jQuery.type(arg);if(type==="function"){if(!options.unique||!self.has(arg)){list.push(arg);}}else if(arg&&arg.length&&type!=="string"){add(arg);}});})(arguments);if(firing){firingLength=list.length;}else if(memory){firingStart=start;fire(memory);}}
return this;},remove:function(){if(list){jQuery.each(arguments,function(_,arg){var index;while((index=jQuery.inArray(arg,list,index))>-1){list.splice(index,1);if(firing){if(index<=firingLength){firingLength--;}
if(index<=firingIndex){firingIndex--;}}}});}
return this;},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:!!(list&&list.length);},empty:function(){list=[];firingLength=0;return this;},disable:function(){list=stack=memory=undefined;return this;},disabled:function(){return!list;},lock:function(){stack=undefined;if(!memory){self.disable();}
return this;},locked:function(){return!stack;},fireWith:function(context,args){if(list&&(!fired||stack)){args=args||[];args=[context,args.slice?args.slice():args];if(firing){stack.push(args);}else{fire(args);}}
return this;},fire:function(){self.fireWith(this,arguments);return this;},fired:function(){return!!fired;}};return self;};jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state;},always:function(){deferred.done(arguments).fail(arguments);return this;},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var action=tuple[0],fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);if(returned&&jQuery.isFunction(returned.promise)){returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify);}else{newDefer[action+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments);}});});fns=null;}).promise();},promise:function(obj){return obj!=null?jQuery.extend(obj,promise):promise;}},deferred={};promise.pipe=promise.then;jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add;if(stateString){list.add(function(){state=stateString;},tuples[i^1][2].disable,tuples[2][2].lock);}
deferred[tuple[0]]=function(){deferred[tuple[0]+"With"](this===deferred?promise:this,arguments);return this;};deferred[tuple[0]+"With"]=list.fireWith;});promise.promise(deferred);if(func){func.call(deferred,deferred);}
return deferred;},when:function(subordinate){var i=0,resolveValues=core_slice.call(arguments),length=resolveValues.length,remaining=length!==1||(subordinate&&jQuery.isFunction(subordinate.promise))?length:0,deferred=remaining===1?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this;values[i]=arguments.length>1?core_slice.call(arguments):value;if(values===progressValues){deferred.notifyWith(contexts,values);}else if(!(--remaining)){deferred.resolveWith(contexts,values);}};},progressValues,progressContexts,resolveContexts;if(length>1){progressValues=new Array(length);progressContexts=new Array(length);resolveContexts=new Array(length);for(;i<length;i++){if(resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)){resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues));}else{--remaining;}}}
if(!remaining){deferred.resolveWith(resolveContexts,resolveValues);}
return deferred.promise();}});jQuery.support=(function(support){var input=document.createElement("input"),fragment=document.createDocumentFragment(),div=document.createElement("div"),select=document.createElement("select"),opt=select.appendChild(document.createElement("option"));if(!input.type){return support;}
input.type="checkbox";support.checkOn=input.value!=="";support.optSelected=opt.selected;support.reliableMarginRight=true;support.boxSizingReliable=true;support.pixelPosition=false;input.checked=true;support.noCloneChecked=input.cloneNode(true).checked;select.disabled=true;support.optDisabled=!opt.disabled;input=document.createElement("input");input.value="t";input.type="radio";support.radioValue=input.value==="t";input.setAttribute("checked","t");input.setAttribute("name","t");fragment.appendChild(input);support.checkClone=fragment.cloneNode(true).cloneNode(true).lastChild.checked;support.focusinBubbles="onfocusin"in window;div.style.backgroundClip="content-box";div.cloneNode(true).style.backgroundClip="";support.clearCloneStyle=div.style.backgroundClip==="content-box";jQuery(function(){var container,marginDiv,divReset="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",body=document.getElementsByTagName("body")[0];if(!body){return;}
container=document.createElement("div");container.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px";body.appendChild(container).appendChild(div);div.innerHTML="";div.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%";jQuery.swap(body,body.style.zoom!=null?{zoom:1}:{},function(){support.boxSizing=div.offsetWidth===4;});if(window.getComputedStyle){support.pixelPosition=(window.getComputedStyle(div,null)||{}).top!=="1%";support.boxSizingReliable=(window.getComputedStyle(div,null)||{width:"4px"}).width==="4px";marginDiv=div.appendChild(document.createElement("div"));marginDiv.style.cssText=div.style.cssText=divReset;marginDiv.style.marginRight=marginDiv.style.width="0";div.style.width="1px";support.reliableMarginRight=!parseFloat((window.getComputedStyle(marginDiv,null)||{}).marginRight);}
body.removeChild(container);});return support;})({});var data_user,data_priv,rbrace=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,rmultiDash=/([A-Z])/g;function Data(){Object.defineProperty(this.cache={},0,{get:function(){return{};}});this.expando=jQuery.expando+Math.random();}
Data.uid=1;Data.accepts=function(owner){return owner.nodeType?owner.nodeType===1||owner.nodeType===9:true;};Data.prototype={key:function(owner){if(!Data.accepts(owner)){return 0;}
var descriptor={},unlock=owner[this.expando];if(!unlock){unlock=Data.uid++;try{descriptor[this.expando]={value:unlock};Object.defineProperties(owner,descriptor);}catch(e){descriptor[this.expando]=unlock;jQuery.extend(owner,descriptor);}}
if(!this.cache[unlock]){this.cache[unlock]={};}
return unlock;},set:function(owner,data,value){var prop,unlock=this.key(owner),cache=this.cache[unlock];if(typeof data==="string"){cache[data]=value;}else{if(jQuery.isEmptyObject(cache)){jQuery.extend(this.cache[unlock],data);}else{for(prop in data){cache[prop]=data[prop];}}}
return cache;},get:function(owner,key){var cache=this.cache[this.key(owner)];return key===undefined?cache:cache[key];},access:function(owner,key,value){var stored;if(key===undefined||((key&&typeof key==="string")&&value===undefined)){stored=this.get(owner,key);return stored!==undefined?stored:this.get(owner,jQuery.camelCase(key));}
this.set(owner,key,value);return value!==undefined?value:key;},remove:function(owner,key){var i,name,camel,unlock=this.key(owner),cache=this.cache[unlock];if(key===undefined){this.cache[unlock]={};}else{if(jQuery.isArray(key)){name=key.concat(key.map(jQuery.camelCase));}else{camel=jQuery.camelCase(key);if(key in cache){name=[key,camel];}else{name=camel;name=name in cache?[name]:(name.match(core_rnotwhite)||[]);}}
i=name.length;while(i--){delete cache[name[i]];}}},hasData:function(owner){return!jQuery.isEmptyObject(this.cache[owner[this.expando]]||{});},discard:function(owner){if(owner[this.expando]){delete this.cache[owner[this.expando]];}}};data_user=new Data();data_priv=new Data();jQuery.extend({acceptData:Data.accepts,hasData:function(elem){return data_user.hasData(elem)||data_priv.hasData(elem);},data:function(elem,name,data){return data_user.access(elem,name,data);},removeData:function(elem,name){data_user.remove(elem,name);},_data:function(elem,name,data){return data_priv.access(elem,name,data);},_removeData:function(elem,name){data_priv.remove(elem,name);}});jQuery.fn.extend({data:function(key,value){var attrs,name,elem=this[0],i=0,data=null;if(key===undefined){if(this.length){data=data_user.get(elem);if(elem.nodeType===1&&!data_priv.get(elem,"hasDataAttrs")){attrs=elem.attributes;for(;i<attrs.length;i++){name=attrs[i].name;if(name.indexOf("data-")===0){name=jQuery.camelCase(name.slice(5));dataAttr(elem,name,data[name]);}}
data_priv.set(elem,"hasDataAttrs",true);}}
return data;}
if(typeof key==="object"){return this.each(function(){data_user.set(this,key);});}
return jQuery.access(this,function(value){var data,camelKey=jQuery.camelCase(key);if(elem&&value===undefined){data=data_user.get(elem,key);if(data!==undefined){return data;}
data=data_user.get(elem,camelKey);if(data!==undefined){return data;}
data=dataAttr(elem,camelKey,undefined);if(data!==undefined){return data;}
return;}
this.each(function(){var data=data_user.get(this,camelKey);data_user.set(this,camelKey,value);if(key.indexOf("-")!==-1&&data!==undefined){data_user.set(this,key,value);}});},null,value,arguments.length>1,null,true);},removeData:function(key){return this.each(function(){data_user.remove(this,key);});}});function dataAttr(elem,key,data){var name;if(data===undefined&&elem.nodeType===1){name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=data==="true"?true:data==="false"?false:data==="null"?null:+data+""===data?+data:rbrace.test(data)?JSON.parse(data):data;}catch(e){}
data_user.set(elem,key,data);}else{data=undefined;}}
return data;}
jQuery.extend({queue:function(elem,type,data){var queue;if(elem){type=(type||"fx")+"queue";queue=data_priv.get(elem,type);if(data){if(!queue||jQuery.isArray(data)){queue=data_priv.access(elem,type,jQuery.makeArray(data));}else{queue.push(data);}}
return queue||[];}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type);};if(fn==="inprogress"){fn=queue.shift();startLength--;}
if(fn){if(type==="fx"){queue.unshift("inprogress");}
delete hooks.stop;fn.call(elem,next,hooks);}
if(!startLength&&hooks){hooks.empty.fire();}},_queueHooks:function(elem,type){var key=type+"queueHooks";return data_priv.get(elem,key)||data_priv.access(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){data_priv.remove(elem,[type+"queue",key]);})});}});jQuery.fn.extend({queue:function(type,data){var setter=2;if(typeof type!=="string"){data=type;type="fx";setter--;}
if(arguments.length<setter){return jQuery.queue(this[0],type);}
return data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type);if(type==="fx"&&queue[0]!=="inprogress"){jQuery.dequeue(this,type);}});},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type);});},delay:function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout);};});},clearQueue:function(type){return this.queue(type||"fx",[]);},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){if(!(--count)){defer.resolveWith(elements,[elements]);}};if(typeof type!=="string"){obj=type;type=undefined;}
type=type||"fx";while(i--){tmp=data_priv.get(elements[i],type+"queueHooks");if(tmp&&tmp.empty){count++;tmp.empty.add(resolve);}}
resolve();return defer.promise(obj);}});var nodeHook,boolHook,rclass=/[\t\r\n\f]/g,rreturn=/\r/g,rfocusable=/^(?:input|select|textarea|button)$/i;jQuery.fn.extend({attr:function(name,value){return jQuery.access(this,jQuery.attr,name,value,arguments.length>1);},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name);});},prop:function(name,value){return jQuery.access(this,jQuery.prop,name,value,arguments.length>1);},removeProp:function(name){return this.each(function(){delete this[jQuery.propFix[name]||name];});},addClass:function(value){var classes,elem,cur,clazz,j,i=0,len=this.length,proceed=typeof value==="string"&&value;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className));});}
if(proceed){classes=(value||"").match(core_rnotwhite)||[];for(;i<len;i++){elem=this[i];cur=elem.nodeType===1&&(elem.className?(" "+elem.className+" ").replace(rclass," "):" ");if(cur){j=0;while((clazz=classes[j++])){if(cur.indexOf(" "+clazz+" ")<0){cur+=clazz+" ";}}
elem.className=jQuery.trim(cur);}}}
return this;},removeClass:function(value){var classes,elem,cur,clazz,j,i=0,len=this.length,proceed=arguments.length===0||typeof value==="string"&&value;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className));});}
if(proceed){classes=(value||"").match(core_rnotwhite)||[];for(;i<len;i++){elem=this[i];cur=elem.nodeType===1&&(elem.className?(" "+elem.className+" ").replace(rclass," "):"");if(cur){j=0;while((clazz=classes[j++])){while(cur.indexOf(" "+clazz+" ")>=0){cur=cur.replace(" "+clazz+" "," ");}}
elem.className=value?jQuery.trim(cur):"";}}}
return this;},toggleClass:function(value,stateVal){var type=typeof value;if(typeof stateVal==="boolean"&&type==="string"){return stateVal?this.addClass(value):this.removeClass(value);}
if(jQuery.isFunction(value)){return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal);});}
return this.each(function(){if(type==="string"){var className,i=0,self=jQuery(this),classNames=value.match(core_rnotwhite)||[];while((className=classNames[i++])){if(self.hasClass(className)){self.removeClass(className);}else{self.addClass(className);}}}else if(type===core_strundefined||type==="boolean"){if(this.className){data_priv.set(this,"__className__",this.className);}
this.className=this.className||value===false?"":data_priv.get(this,"__className__")||"";}});},hasClass:function(selector){var className=" "+selector+" ",i=0,l=this.length;for(;i<l;i++){if(this[i].nodeType===1&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>=0){return true;}}
return false;},val:function(value){var hooks,ret,isFunction,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined){return ret;}
ret=elem.value;return typeof ret==="string"?ret.replace(rreturn,""):ret==null?"":ret;}
return;}
isFunction=jQuery.isFunction(value);return this.each(function(i){var val;if(this.nodeType!==1){return;}
if(isFunction){val=value.call(this,i,jQuery(this).val());}else{val=value;}
if(val==null){val="";}else if(typeof val==="number"){val+="";}else if(jQuery.isArray(val)){val=jQuery.map(val,function(value){return value==null?"":value+"";});}
hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!hooks||!("set"in hooks)||hooks.set(this,val,"value")===undefined){this.value=val;}});}});jQuery.extend({valHooks:{option:{get:function(elem){var val=elem.attributes.value;return!val||val.specified?elem.value:elem.text;}},select:{get:function(elem){var value,option,options=elem.options,index=elem.selectedIndex,one=elem.type==="select-one"||index<0,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;for(;i<max;i++){option=options[i];if((option.selected||i===index)&&(jQuery.support.optDisabled?!option.disabled:option.getAttribute("disabled")===null)&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();if(one){return value;}
values.push(value);}}
return values;},set:function(elem,value){var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;while(i--){option=options[i];if((option.selected=jQuery.inArray(jQuery(option).val(),values)>=0)){optionSet=true;}}
if(!optionSet){elem.selectedIndex=-1;}
return values;}}},attr:function(elem,name,value){var hooks,ret,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return;}
if(typeof elem.getAttribute===core_strundefined){return jQuery.prop(elem,name,value);}
if(nType!==1||!jQuery.isXMLDoc(elem)){name=name.toLowerCase();hooks=jQuery.attrHooks[name]||(jQuery.expr.match.bool.test(name)?boolHook:nodeHook);}
if(value!==undefined){if(value===null){jQuery.removeAttr(elem,name);}else if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret;}else{elem.setAttribute(name,value+"");return value;}}else if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null){return ret;}else{ret=jQuery.find.attr(elem,name);return ret==null?undefined:ret;}},removeAttr:function(elem,value){var name,propName,i=0,attrNames=value&&value.match(core_rnotwhite);if(attrNames&&elem.nodeType===1){while((name=attrNames[i++])){propName=jQuery.propFix[name]||name;if(jQuery.expr.match.bool.test(name)){elem[propName]=false;}
elem.removeAttribute(name);}}},attrHooks:{type:{set:function(elem,value){if(!jQuery.support.radioValue&&value==="radio"&&jQuery.nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",value);if(val){elem.value=val;}
return value;}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return;}
notxml=nType!==1||!jQuery.isXMLDoc(elem);if(notxml){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name];}
if(value!==undefined){return hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined?ret:(elem[name]=value);}else{return hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null?ret:elem[name];}},propHooks:{tabIndex:{get:function(elem){return elem.hasAttribute("tabindex")||rfocusable.test(elem.nodeName)||elem.href?elem.tabIndex:-1;}}}});boolHook={set:function(elem,value,name){if(value===false){jQuery.removeAttr(elem,name);}else{elem.setAttribute(name,name);}
return name;}};jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=jQuery.expr.attrHandle[name]||jQuery.find.attr;jQuery.expr.attrHandle[name]=function(elem,name,isXML){var fn=jQuery.expr.attrHandle[name],ret=isXML?undefined:(jQuery.expr.attrHandle[name]=undefined)!=getter(elem,name,isXML)?name.toLowerCase():null;jQuery.expr.attrHandle[name]=fn;return ret;};});if(!jQuery.support.optSelected){jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;if(parent&&parent.parentNode){parent.parentNode.selectedIndex;}
return null;}};}
jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this;});jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(elem,value){if(jQuery.isArray(value)){return(elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0);}}};if(!jQuery.support.checkOn){jQuery.valHooks[this].get=function(elem){return elem.getAttribute("value")===null?"on":elem.value;};}});var rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;function returnTrue(){return true;}
function returnFalse(){return false;}
function safeActiveElement(){try{return document.activeElement;}catch(err){}}
jQuery.event={global:{},add:function(elem,types,handler,data,selector){var handleObjIn,eventHandle,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=data_priv.get(elem);if(!elemData){return;}
if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;selector=handleObjIn.selector;}
if(!handler.guid){handler.guid=jQuery.guid++;}
if(!(events=elemData.events)){events=elemData.events={};}
if(!(eventHandle=elemData.handle)){eventHandle=elemData.handle=function(e){return typeof jQuery!==core_strundefined&&(!e||jQuery.event.triggered!==e.type)?jQuery.event.dispatch.apply(eventHandle.elem,arguments):undefined;};eventHandle.elem=elem;}
types=(types||"").match(core_rnotwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){continue;}
special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=jQuery.event.special[type]||{};handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn);if(!(handlers=events[type])){handlers=events[type]=[];handlers.delegateCount=0;if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle,false);}}}
if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid;}}
if(selector){handlers.splice(handlers.delegateCount++,0,handleObj);}else{handlers.push(handleObj);}
jQuery.event.global[type]=true;}
elem=null;},remove:function(elem,types,handler,selector,mappedTypes){var j,origCount,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=data_priv.hasData(elem)&&data_priv.get(elem);if(!elemData||!(events=elemData.events)){return;}
types=(types||"").match(core_rnotwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){for(type in events){jQuery.event.remove(elem,type+types[t],handler,selector,true);}
continue;}
special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;handlers=events[type]||[];tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)");origCount=j=handlers.length;while(j--){handleObj=handlers[j];if((mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!tmp||tmp.test(handleObj.namespace))&&(!selector||selector===handleObj.selector||selector==="**"&&handleObj.selector)){handlers.splice(j,1);if(handleObj.selector){handlers.delegateCount--;}
if(special.remove){special.remove.call(elem,handleObj);}}}
if(origCount&&!handlers.length){if(!special.teardown||special.teardown.call(elem,namespaces,elemData.handle)===false){jQuery.removeEvent(elem,type,elemData.handle);}
delete events[type];}}
if(jQuery.isEmptyObject(events)){delete elemData.handle;data_priv.remove(elem,"events");}},trigger:function(event,data,elem,onlyHandlers){var i,cur,tmp,bubbleType,ontype,handle,special,eventPath=[elem||document],type=core_hasOwn.call(event,"type")?event.type:event,namespaces=core_hasOwn.call(event,"namespace")?event.namespace.split("."):[];cur=tmp=elem=elem||document;if(elem.nodeType===3||elem.nodeType===8){return;}
if(rfocusMorph.test(type+jQuery.event.triggered)){return;}
if(type.indexOf(".")>=0){namespaces=type.split(".");type=namespaces.shift();namespaces.sort();}
ontype=type.indexOf(":")<0&&"on"+type;event=event[jQuery.expando]?event:new jQuery.Event(type,typeof event==="object"&&event);event.isTrigger=onlyHandlers?2:3;event.namespace=namespaces.join(".");event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;event.result=undefined;if(!event.target){event.target=elem;}
data=data==null?[event]:jQuery.makeArray(data,[event]);special=jQuery.event.special[type]||{};if(!onlyHandlers&&special.trigger&&special.trigger.apply(elem,data)===false){return;}
if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){bubbleType=special.delegateType||type;if(!rfocusMorph.test(bubbleType+type)){cur=cur.parentNode;}
for(;cur;cur=cur.parentNode){eventPath.push(cur);tmp=cur;}
if(tmp===(elem.ownerDocument||document)){eventPath.push(tmp.defaultView||tmp.parentWindow||window);}}
i=0;while((cur=eventPath[i++])&&!event.isPropagationStopped()){event.type=i>1?bubbleType:special.bindType||type;handle=(data_priv.get(cur,"events")||{})[event.type]&&data_priv.get(cur,"handle");if(handle){handle.apply(cur,data);}
handle=ontype&&cur[ontype];if(handle&&jQuery.acceptData(cur)&&handle.apply&&handle.apply(cur,data)===false){event.preventDefault();}}
event.type=type;if(!onlyHandlers&&!event.isDefaultPrevented()){if((!special._default||special._default.apply(eventPath.pop(),data)===false)&&jQuery.acceptData(elem)){if(ontype&&jQuery.isFunction(elem[type])&&!jQuery.isWindow(elem)){tmp=elem[ontype];if(tmp){elem[ontype]=null;}
jQuery.event.triggered=type;elem[type]();jQuery.event.triggered=undefined;if(tmp){elem[ontype]=tmp;}}}}
return event.result;},dispatch:function(event){event=jQuery.event.fix(event);var i,j,ret,matched,handleObj,handlerQueue=[],args=core_slice.call(arguments),handlers=(data_priv.get(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};args[0]=event;event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===false){return;}
handlerQueue=jQuery.event.handlers.call(this,event,handlers);i=0;while((matched=handlerQueue[i++])&&!event.isPropagationStopped()){event.currentTarget=matched.elem;j=0;while((handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped()){if(!event.namespace_re||event.namespace_re.test(handleObj.namespace)){event.handleObj=handleObj;event.data=handleObj.data;ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);if(ret!==undefined){if((event.result=ret)===false){event.preventDefault();event.stopPropagation();}}}}}
if(special.postDispatch){special.postDispatch.call(this,event);}
return event.result;},handlers:function(event,handlers){var i,matches,sel,handleObj,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&(!event.button||event.type!=="click")){for(;cur!==this;cur=cur.parentNode||this){if(cur.disabled!==true||event.type!=="click"){matches=[];for(i=0;i<delegateCount;i++){handleObj=handlers[i];sel=handleObj.selector+" ";if(matches[sel]===undefined){matches[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>=0:jQuery.find(sel,this,null,[cur]).length;}
if(matches[sel]){matches.push(handleObj);}}
if(matches.length){handlerQueue.push({elem:cur,handlers:matches});}}}}
if(delegateCount<handlers.length){handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)});}
return handlerQueue;},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){if(event.which==null){event.which=original.charCode!=null?original.charCode:original.keyCode;}
return event;}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var eventDoc,doc,body,button=original.button;if(event.pageX==null&&original.clientX!=null){eventDoc=event.target.ownerDocument||document;doc=eventDoc.documentElement;body=eventDoc.body;event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0);}
if(!event.which&&button!==undefined){event.which=(button&1?1:(button&2?3:(button&4?2:0)));}
return event;}},fix:function(event){if(event[jQuery.expando]){return event;}
var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];if(!fixHook){this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{};}
copy=fixHook.props?this.props.concat(fixHook.props):this.props;event=new jQuery.Event(originalEvent);i=copy.length;while(i--){prop=copy[i];event[prop]=originalEvent[prop];}
if(!event.target){event.target=document;}
if(event.target.nodeType===3){event.target=event.target.parentNode;}
return fixHook.filter?fixHook.filter(event,originalEvent):event;},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus){this.focus();return false;}},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur){this.blur();return false;}},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&jQuery.nodeName(this,"input")){this.click();return false;}},_default:function(event){return jQuery.nodeName(event.target,"a");}},beforeunload:{postDispatch:function(event){if(event.result!==undefined){event.originalEvent.returnValue=event.result;}}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event(),event,{type:type,isSimulated:true,originalEvent:{}});if(bubble){jQuery.event.trigger(e,null,elem);}else{jQuery.event.dispatch.call(elem,e);}
if(e.isDefaultPrevented()){event.preventDefault();}}};jQuery.removeEvent=function(elem,type,handle){if(elem.removeEventListener){elem.removeEventListener(type,handle,false);}};jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event)){return new jQuery.Event(src,props);}
if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=(src.defaultPrevented||src.getPreventDefault&&src.getPreventDefault())?returnTrue:returnFalse;}else{this.type=src;}
if(props){jQuery.extend(this,props);}
this.timeStamp=src&&src.timeStamp||jQuery.now();this[jQuery.expando]=true;};jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue;if(e&&e.preventDefault){e.preventDefault();}},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue;if(e&&e.stopPropagation){e.stopPropagation();}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue;this.stopPropagation();}};jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;if(!related||(related!==target&&!jQuery.contains(target,related))){event.type=handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=fix;}
return ret;}};});if(!jQuery.support.focusinBubbles){jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var attaches=0,handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),true);};jQuery.event.special[fix]={setup:function(){if(attaches++===0){document.addEventListener(orig,handler,true);}},teardown:function(){if(--attaches===0){document.removeEventListener(orig,handler,true);}}};});}
jQuery.fn.extend({on:function(types,selector,data,fn,one){var origFn,type;if(typeof types==="object"){if(typeof selector!=="string"){data=data||selector;selector=undefined;}
for(type in types){this.on(type,selector,data,types[type],one);}
return this;}
if(data==null&&fn==null){fn=selector;data=selector=undefined;}else if(fn==null){if(typeof selector==="string"){fn=data;data=undefined;}else{fn=data;data=selector;selector=undefined;}}
if(fn===false){fn=returnFalse;}else if(!fn){return this;}
if(one===1){origFn=fn;fn=function(event){jQuery().off(event);return origFn.apply(this,arguments);};fn.guid=origFn.guid||(origFn.guid=jQuery.guid++);}
return this.each(function(){jQuery.event.add(this,types,fn,data,selector);});},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1);},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj){handleObj=types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this;}
if(typeof types==="object"){for(type in types){this.off(type,selector,types[type]);}
return this;}
if(selector===false||typeof selector==="function"){fn=selector;selector=undefined;}
if(fn===false){fn=returnFalse;}
return this.each(function(){jQuery.event.remove(this,types,fn,selector);});},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this);});},triggerHandler:function(type,data){var elem=this[0];if(elem){return jQuery.event.trigger(type,data,elem,true);}}});var isSimple=/^.[^:#\[\.,]*$/,rparentsprev=/^(?:parents|prev(?:Until|All))/,rneedsContext=jQuery.expr.match.needsContext,guaranteedUnique={children:true,contents:true,next:true,prev:true};jQuery.fn.extend({find:function(selector){var i,ret=[],self=this,len=self.length;if(typeof selector!=="string"){return this.pushStack(jQuery(selector).filter(function(){for(i=0;i<len;i++){if(jQuery.contains(self[i],this)){return true;}}}));}
for(i=0;i<len;i++){jQuery.find(selector,self[i],ret);}
ret=this.pushStack(len>1?jQuery.unique(ret):ret);ret.selector=this.selector?this.selector+" "+selector:selector;return ret;},has:function(target){var targets=jQuery(target,this),l=targets.length;return this.filter(function(){var i=0;for(;i<l;i++){if(jQuery.contains(this,targets[i])){return true;}}});},not:function(selector){return this.pushStack(winnow(this,selector||[],true));},filter:function(selector){return this.pushStack(winnow(this,selector||[],false));},is:function(selector){return!!winnow(this,typeof selector==="string"&&rneedsContext.test(selector)?jQuery(selector):selector||[],false).length;},closest:function(selectors,context){var cur,i=0,l=this.length,matched=[],pos=(rneedsContext.test(selectors)||typeof selectors!=="string")?jQuery(selectors,context||this.context):0;for(;i<l;i++){for(cur=this[i];cur&&cur!==context;cur=cur.parentNode){if(cur.nodeType<11&&(pos?pos.index(cur)>-1:cur.nodeType===1&&jQuery.find.matchesSelector(cur,selectors))){cur=matched.push(cur);break;}}}
return this.pushStack(matched.length>1?jQuery.unique(matched):matched);},index:function(elem){if(!elem){return(this[0]&&this[0].parentNode)?this.first().prevAll().length:-1;}
if(typeof elem==="string"){return core_indexOf.call(jQuery(elem),this[0]);}
return core_indexOf.call(this,elem.jquery?elem[0]:elem);},add:function(selector,context){var set=typeof selector==="string"?jQuery(selector,context):jQuery.makeArray(selector&&selector.nodeType?[selector]:selector),all=jQuery.merge(this.get(),set);return this.pushStack(jQuery.unique(all));},addBack:function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector));}});function sibling(cur,dir){while((cur=cur[dir])&&cur.nodeType!==1){}
return cur;}
jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null;},parents:function(elem){return jQuery.dir(elem,"parentNode");},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until);},next:function(elem){return sibling(elem,"nextSibling");},prev:function(elem){return sibling(elem,"previousSibling");},nextAll:function(elem){return jQuery.dir(elem,"nextSibling");},prevAll:function(elem){return jQuery.dir(elem,"previousSibling");},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until);},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until);},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem);},children:function(elem){return jQuery.sibling(elem.firstChild);},contents:function(elem){return elem.contentDocument||jQuery.merge([],elem.childNodes);}},function(name,fn){jQuery.fn[name]=function(until,selector){var matched=jQuery.map(this,fn,until);if(name.slice(-5)!=="Until"){selector=until;}
if(selector&&typeof selector==="string"){matched=jQuery.filter(selector,matched);}
if(this.length>1){if(!guaranteedUnique[name]){jQuery.unique(matched);}
if(rparentsprev.test(name)){matched.reverse();}}
return this.pushStack(matched);};});jQuery.extend({filter:function(expr,elems,not){var elem=elems[0];if(not){expr=":not("+expr+")";}
return elems.length===1&&elem.nodeType===1?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return elem.nodeType===1;}));},dir:function(elem,dir,until){var matched=[],truncate=until!==undefined;while((elem=elem[dir])&&elem.nodeType!==9){if(elem.nodeType===1){if(truncate&&jQuery(elem).is(until)){break;}
matched.push(elem);}}
return matched;},sibling:function(n,elem){var matched=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){matched.push(n);}}
return matched;}});function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not;});}
if(qualifier.nodeType){return jQuery.grep(elements,function(elem){return(elem===qualifier)!==not;});}
if(typeof qualifier==="string"){if(isSimple.test(qualifier)){return jQuery.filter(qualifier,elements,not);}
qualifier=jQuery.filter(qualifier,elements);}
return jQuery.grep(elements,function(elem){return(core_indexOf.call(qualifier,elem)>=0)!==not;});}
var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,manipulation_rcheckableType=/^(?:checkbox|radio)$/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;jQuery.fn.extend({text:function(value){return jQuery.access(this,function(value){return value===undefined?jQuery.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(value));},null,value,arguments.length);},append:function(){return this.domManip(arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.appendChild(elem);}});},prepend:function(){return this.domManip(arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild);}});},before:function(){return this.domManip(arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this);}});},after:function(){return this.domManip(arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this.nextSibling);}});},remove:function(selector,keepData){var elem,elems=selector?jQuery.filter(selector,this):this,i=0;for(;(elem=elems[i])!=null;i++){if(!keepData&&elem.nodeType===1){jQuery.cleanData(getAll(elem));}
if(elem.parentNode){if(keepData&&jQuery.contains(elem.ownerDocument,elem)){setGlobalEval(getAll(elem,"script"));}
elem.parentNode.removeChild(elem);}}
return this;},empty:function(){var elem,i=0;for(;(elem=this[i])!=null;i++){if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.textContent="";}}
return this;},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents);});},html:function(value){return jQuery.access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined&&elem.nodeType===1){return elem.innerHTML;}
if(typeof value==="string"&&!rnoInnerhtml.test(value)&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;i<l;i++){elem=this[i]||{};if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.innerHTML=value;}}
elem=0;}catch(e){}}
if(elem){this.empty().append(value);}},null,value,arguments.length);},replaceWith:function(){var
args=jQuery.map(this,function(elem){return[elem.nextSibling,elem.parentNode];}),i=0;this.domManip(arguments,function(elem){var next=args[i++],parent=args[i++];if(parent){if(next&&next.parentNode!==parent){next=this.nextSibling;}
jQuery(this).remove();parent.insertBefore(elem,next);}},true);return i?this:this.remove();},detach:function(selector){return this.remove(selector,true);},domManip:function(args,callback,allowIntersection){args=core_concat.apply([],args);var fragment,first,scripts,hasScripts,node,doc,i=0,l=this.length,set=this,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||!(l<=1||typeof value!=="string"||jQuery.support.checkClone||!rchecked.test(value))){return this.each(function(index){var self=set.eq(index);if(isFunction){args[0]=value.call(this,index,self.html());}
self.domManip(args,callback,allowIntersection);});}
if(l){fragment=jQuery.buildFragment(args,this[0].ownerDocument,false,!allowIntersection&&this);first=fragment.firstChild;if(fragment.childNodes.length===1){fragment=first;}
if(first){scripts=jQuery.map(getAll(fragment,"script"),disableScript);hasScripts=scripts.length;for(;i<l;i++){node=fragment;if(i!==iNoClone){node=jQuery.clone(node,true,true);if(hasScripts){jQuery.merge(scripts,getAll(node,"script"));}}
callback.call(this[i],node,i);}
if(hasScripts){doc=scripts[scripts.length-1].ownerDocument;jQuery.map(scripts,restoreScript);for(i=0;i<hasScripts;i++){node=scripts[i];if(rscriptType.test(node.type||"")&&!data_priv.access(node,"globalEval")&&jQuery.contains(doc,node)){if(node.src){jQuery._evalUrl(node.src);}else{jQuery.globalEval(node.textContent.replace(rcleanScript,""));}}}}}}
return this;}});jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var elems,ret=[],insert=jQuery(selector),last=insert.length-1,i=0;for(;i<=last;i++){elems=i===last?this:this.clone(true);jQuery(insert[i])[original](elems);core_push.apply(ret,elems.get());}
return this.pushStack(ret);};});jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var i,l,srcElements,destElements,clone=elem.cloneNode(true),inPage=jQuery.contains(elem.ownerDocument,elem);if(!jQuery.support.noCloneChecked&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){destElements=getAll(clone);srcElements=getAll(elem);for(i=0,l=srcElements.length;i<l;i++){fixInput(srcElements[i],destElements[i]);}}
if(dataAndEvents){if(deepDataAndEvents){srcElements=srcElements||getAll(elem);destElements=destElements||getAll(clone);for(i=0,l=srcElements.length;i<l;i++){cloneCopyEvent(srcElements[i],destElements[i]);}}else{cloneCopyEvent(elem,clone);}}
destElements=getAll(clone,"script");if(destElements.length>0){setGlobalEval(destElements,!inPage&&getAll(elem,"script"));}
return clone;},buildFragment:function(elems,context,scripts,selection){var elem,tmp,tag,wrap,contains,j,i=0,l=elems.length,fragment=context.createDocumentFragment(),nodes=[];for(;i<l;i++){elem=elems[i];if(elem||elem===0){if(jQuery.type(elem)==="object"){jQuery.merge(nodes,elem.nodeType?[elem]:elem);}else if(!rhtml.test(elem)){nodes.push(context.createTextNode(elem));}else{tmp=tmp||fragment.appendChild(context.createElement("div"));tag=(rtagName.exec(elem)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;tmp.innerHTML=wrap[1]+elem.replace(rxhtmlTag,"<$1></$2>")+wrap[2];j=wrap[0];while(j--){tmp=tmp.lastChild;}
jQuery.merge(nodes,tmp.childNodes);tmp=fragment.firstChild;tmp.textContent="";}}}
fragment.textContent="";i=0;while((elem=nodes[i++])){if(selection&&jQuery.inArray(elem,selection)!==-1){continue;}
contains=jQuery.contains(elem.ownerDocument,elem);tmp=getAll(fragment.appendChild(elem),"script");if(contains){setGlobalEval(tmp);}
if(scripts){j=0;while((elem=tmp[j++])){if(rscriptType.test(elem.type||"")){scripts.push(elem);}}}}
return fragment;},cleanData:function(elems){var data,elem,events,type,key,j,special=jQuery.event.special,i=0;for(;(elem=elems[i])!==undefined;i++){if(Data.accepts(elem)){key=elem[data_priv.expando];if(key&&(data=data_priv.cache[key])){events=Object.keys(data.events||{});if(events.length){for(j=0;(type=events[j])!==undefined;j++){if(special[type]){jQuery.event.remove(elem,type);}else{jQuery.removeEvent(elem,type,data.handle);}}}
if(data_priv.cache[key]){delete data_priv.cache[key];}}}
delete data_user.cache[elem[data_user.expando]];}},_evalUrl:function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",async:false,global:false,"throws":true});}});function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(content.nodeType===1?content:content.firstChild,"tr")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem;}
function disableScript(elem){elem.type=(elem.getAttribute("type")!==null)+"/"+elem.type;return elem;}
function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);if(match){elem.type=match[1];}else{elem.removeAttribute("type");}
return elem;}
function setGlobalEval(elems,refElements){var l=elems.length,i=0;for(;i<l;i++){data_priv.set(elems[i],"globalEval",!refElements||data_priv.get(refElements[i],"globalEval"));}}
function cloneCopyEvent(src,dest){var i,l,type,pdataOld,pdataCur,udataOld,udataCur,events;if(dest.nodeType!==1){return;}
if(data_priv.hasData(src)){pdataOld=data_priv.access(src);pdataCur=data_priv.set(dest,pdataOld);events=pdataOld.events;if(events){delete pdataCur.handle;pdataCur.events={};for(type in events){for(i=0,l=events[type].length;i<l;i++){jQuery.event.add(dest,type,events[type][i]);}}}}
if(data_user.hasData(src)){udataOld=data_user.access(src);udataCur=jQuery.extend({},udataOld);data_user.set(dest,udataCur);}}
function getAll(context,tag){var ret=context.getElementsByTagName?context.getElementsByTagName(tag||"*"):context.querySelectorAll?context.querySelectorAll(tag||"*"):[];return tag===undefined||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],ret):ret;}
function fixInput(src,dest){var nodeName=dest.nodeName.toLowerCase();if(nodeName==="input"&&manipulation_rcheckableType.test(src.type)){dest.checked=src.checked;}else if(nodeName==="input"||nodeName==="textarea"){dest.defaultValue=src.defaultValue;}}
jQuery.fn.extend({wrapAll:function(html){var wrap;if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapAll(html.call(this,i));});}
if(this[0]){wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0]);}
wrap.map(function(){var elem=this;while(elem.firstElementChild){elem=elem.firstElementChild;}
return elem;}).append(this);}
return this;},wrapInner:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i));});}
return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length){contents.wrapAll(html);}else{self.append(html);}});},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html);});},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body")){jQuery(this).replaceWith(this.childNodes);}}).end();}});var curCSS,iframe,rdisplayswap=/^(none|table(?!-c[ea]).+)/,rmargin=/^margin/,rnumsplit=new RegExp("^("+core_pnum+")(.*)$","i"),rnumnonpx=new RegExp("^("+core_pnum+")(?!px)[a-z%]+$","i"),rrelNum=new RegExp("^([+-])=("+core_pnum+")","i"),elemdisplay={BODY:"block"},cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:0,fontWeight:400},cssExpand=["Top","Right","Bottom","Left"],cssPrefixes=["Webkit","O","Moz","ms"];function vendorPropName(style,name){if(name in style){return name;}
var capName=name.charAt(0).toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;while(i--){name=cssPrefixes[i]+capName;if(name in style){return name;}}
return origName;}
function isHidden(elem,el){elem=el||elem;return jQuery.css(elem,"display")==="none"||!jQuery.contains(elem.ownerDocument,elem);}
function getStyles(elem){return window.getComputedStyle(elem,null);}
function showHide(elements,show){var display,elem,hidden,values=[],index=0,length=elements.length;for(;index<length;index++){elem=elements[index];if(!elem.style){continue;}
values[index]=data_priv.get(elem,"olddisplay");display=elem.style.display;if(show){if(!values[index]&&display==="none"){elem.style.display="";}
if(elem.style.display===""&&isHidden(elem)){values[index]=data_priv.access(elem,"olddisplay",css_defaultDisplay(elem.nodeName));}}else{if(!values[index]){hidden=isHidden(elem);if(display&&display!=="none"||!hidden){data_priv.set(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"));}}}}
for(index=0;index<length;index++){elem=elements[index];if(!elem.style){continue;}
if(!show||elem.style.display==="none"||elem.style.display===""){elem.style.display=show?values[index]||"":"none";}}
return elements;}
jQuery.fn.extend({css:function(name,value){return jQuery.access(this,function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){styles=getStyles(elem);len=name.length;for(;i<len;i++){map[name[i]]=jQuery.css(elem,name[i],false,styles);}
return map;}
return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name);},name,value,arguments.length>1);},show:function(){return showHide(this,true);},hide:function(){return showHide(this);},toggle:function(state){if(typeof state==="boolean"){return state?this.show():this.hide();}
return this.each(function(){if(isHidden(this)){jQuery(this).show();}else{jQuery(this).hide();}});}});jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return ret===""?"1":ret;}}}},cssNumber:{"columnCount":true,"fillOpacity":true,"fontWeight":true,"lineHeight":true,"opacity":true,"order":true,"orphans":true,"widows":true,"zIndex":true,"zoom":true},cssProps:{"float":"cssFloat"},style:function(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style){return;}
var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName));hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(value!==undefined){type=typeof value;if(type==="string"&&(ret=rrelNum.exec(value))){value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name));type="number";}
if(value==null||type==="number"&&isNaN(value)){return;}
if(type==="number"&&!jQuery.cssNumber[origName]){value+="px";}
if(!jQuery.support.clearCloneStyle&&value===""&&name.indexOf("background")===0){style[name]="inherit";}
if(!hooks||!("set"in hooks)||(value=hooks.set(elem,value,extra))!==undefined){style[name]=value;}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,false,extra))!==undefined){return ret;}
return style[name];}},css:function(elem,name,extra,styles){var val,num,hooks,origName=jQuery.camelCase(name);name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName));hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(hooks&&"get"in hooks){val=hooks.get(elem,true,extra);}
if(val===undefined){val=curCSS(elem,name,styles);}
if(val==="normal"&&name in cssNormalTransform){val=cssNormalTransform[name];}
if(extra===""||extra){num=parseFloat(val);return extra===true||jQuery.isNumeric(num)?num||0:val;}
return val;}});curCSS=function(elem,name,_computed){var width,minWidth,maxWidth,computed=_computed||getStyles(elem),ret=computed?computed.getPropertyValue(name)||computed[name]:undefined,style=elem.style;if(computed){if(ret===""&&!jQuery.contains(elem.ownerDocument,elem)){ret=jQuery.style(elem,name);}
if(rnumnonpx.test(ret)&&rmargin.test(name)){width=style.width;minWidth=style.minWidth;maxWidth=style.maxWidth;style.minWidth=style.maxWidth=style.width=ret;ret=computed.width;style.width=width;style.minWidth=minWidth;style.maxWidth=maxWidth;}}
return ret;};function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value;}
function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){var i=extra===(isBorderBox?"border":"content")?4:name==="width"?1:0,val=0;for(;i<4;i+=2){if(extra==="margin"){val+=jQuery.css(elem,extra+cssExpand[i],true,styles);}
if(isBorderBox){if(extra==="content"){val-=jQuery.css(elem,"padding"+cssExpand[i],true,styles);}
if(extra!=="margin"){val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles);}}else{val+=jQuery.css(elem,"padding"+cssExpand[i],true,styles);if(extra!=="padding"){val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles);}}}
return val;}
function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=true,val=name==="width"?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox=jQuery.support.boxSizing&&jQuery.css(elem,"boxSizing",false,styles)==="border-box";if(val<=0||val==null){val=curCSS(elem,name,styles);if(val<0||val==null){val=elem.style[name];}
if(rnumnonpx.test(val)){return val;}
valueIsBorderBox=isBorderBox&&(jQuery.support.boxSizingReliable||val===elem.style[name]);val=parseFloat(val)||0;}
return(val+
augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles))+"px";}
function css_defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];if(!display){display=actualDisplay(nodeName,doc);if(display==="none"||!display){iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(doc.documentElement);doc=(iframe[0].contentWindow||iframe[0].contentDocument).document;doc.write("<!doctype html><html><body>");doc.close();display=actualDisplay(nodeName,doc);iframe.detach();}
elemdisplay[nodeName]=display;}
return display;}
function actualDisplay(name,doc){var elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=jQuery.css(elem[0],"display");elem.remove();return display;}
jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed){return elem.offsetWidth===0&&rdisplayswap.test(jQuery.css(elem,"display"))?jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra);}):getWidthOrHeight(elem,name,extra);}},set:function(elem,value,extra){var styles=extra&&getStyles(elem);return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,jQuery.support.boxSizing&&jQuery.css(elem,"boxSizing",false,styles)==="border-box",styles):0);}};});jQuery(function(){if(!jQuery.support.reliableMarginRight){jQuery.cssHooks.marginRight={get:function(elem,computed){if(computed){return jQuery.swap(elem,{"display":"inline-block"},curCSS,[elem,"marginRight"]);}}};}
if(!jQuery.support.pixelPosition&&jQuery.fn.position){jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]={get:function(elem,computed){if(computed){computed=curCSS(elem,prop);return rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed;}}};});}});if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.hidden=function(elem){return elem.offsetWidth<=0&&elem.offsetHeight<=0;};jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem);};}
jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){var i=0,expanded={},parts=typeof value==="string"?value.split(" "):[value];for(;i<4;i++){expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];}
return expanded;}};if(!rmargin.test(prefix)){jQuery.cssHooks[prefix+suffix].set=setPositiveNumber;}});var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray());},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this;}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!manipulation_rcheckableType.test(type));}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")};}):{name:elem.name,value:val.replace(rCRLF,"\r\n")};}).get();}});jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():(value==null?"":value);s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value);};if(traditional===undefined){traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional;}
if(jQuery.isArray(a)||(a.jquery&&!jQuery.isPlainObject(a))){jQuery.each(a,function(){add(this.name,this.value);});}else{for(prefix in a){buildParams(prefix,a[prefix],traditional,add);}}
return s.join("&").replace(r20,"+");};function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj)){jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix)){add(prefix,v);}else{buildParams(prefix+"["+(typeof v==="object"?i:"")+"]",v,traditional,add);}});}else if(!traditional&&jQuery.type(obj)==="object"){for(name in obj){buildParams(prefix+"["+name+"]",obj[name],traditional,add);}}else{add(prefix,obj);}}
jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error contextmenu").split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name);};});jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver);},bind:function(types,data,fn){return this.on(types,null,data,fn);},unbind:function(types,fn){return this.off(types,null,fn);},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn);},undelegate:function(selector,types,fn){return arguments.length===1?this.off(selector,"**"):this.off(types,selector||"**",fn);}});var
ajaxLocParts,ajaxLocation,ajax_nonce=jQuery.now(),ajax_rquery=/\?/,rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/mg,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,_load=jQuery.fn.load,prefilters={},transports={},allTypes="*/".concat("*");try{ajaxLocation=location.href;}catch(e){ajaxLocation=document.createElement("a");ajaxLocation.href="";ajaxLocation=ajaxLocation.href;}
ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[];function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if(typeof dataTypeExpression!=="string"){func=dataTypeExpression;dataTypeExpression="*";}
var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(core_rnotwhite)||[];if(jQuery.isFunction(func)){while((dataType=dataTypes[i++])){if(dataType[0]==="+"){dataType=dataType.slice(1)||"*";(structure[dataType]=structure[dataType]||[]).unshift(func);}else{(structure[dataType]=structure[dataType]||[]).push(func);}}}};}
function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){var inspected={},seekingTransport=(structure===transports);function inspect(dataType){var selected;inspected[dataType]=true;jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);if(typeof dataTypeOrTransport==="string"&&!seekingTransport&&!inspected[dataTypeOrTransport]){options.dataTypes.unshift(dataTypeOrTransport);inspect(dataTypeOrTransport);return false;}else if(seekingTransport){return!(selected=dataTypeOrTransport);}});return selected;}
return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*");}
function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src){if(src[key]!==undefined){(flatOptions[key]?target:(deep||(deep={})))[key]=src[key];}}
if(deep){jQuery.extend(true,target,deep);}
return target;}
jQuery.fn.load=function(url,params,callback){if(typeof url!=="string"&&_load){return _load.apply(this,arguments);}
var selector,type,response,self=this,off=url.indexOf(" ");if(off>=0){selector=url.slice(off);url=url.slice(0,off);}
if(jQuery.isFunction(params)){callback=params;params=undefined;}else if(params&&typeof params==="object"){type="POST";}
if(self.length>0){jQuery.ajax({url:url,type:type,dataType:"html",data:params}).done(function(responseText){response=arguments;self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText);}).complete(callback&&function(jqXHR,status){self.each(callback,response||[jqXHR.responseText,status,jqXHR]);});}
return this;};jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn);};});jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target);},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){if(typeof url==="object"){options=url;url=undefined;}
options=options||{};var transport,cacheURL,responseHeadersString,responseHeaders,timeoutTimer,parts,fireGlobals,i,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(state===2){if(!responseHeaders){responseHeaders={};while((match=rheaders.exec(responseHeadersString))){responseHeaders[match[1].toLowerCase()]=match[2];}}
match=responseHeaders[key.toLowerCase()];}
return match==null?null:match;},getAllResponseHeaders:function(){return state===2?responseHeadersString:null;},setRequestHeader:function(name,value){var lname=name.toLowerCase();if(!state){name=requestHeadersNames[lname]=requestHeadersNames[lname]||name;requestHeaders[name]=value;}
return this;},overrideMimeType:function(type){if(!state){s.mimeType=type;}
return this;},statusCode:function(map){var code;if(map){if(state<2){for(code in map){statusCode[code]=[statusCode[code],map[code]];}}else{jqXHR.always(map[jqXHR.status]);}}
return this;},abort:function(statusText){var finalText=statusText||strAbort;if(transport){transport.abort(finalText);}
done(0,finalText);return this;}};deferred.promise(jqXHR).complete=completeDeferred.add;jqXHR.success=jqXHR.done;jqXHR.error=jqXHR.fail;s.url=((url||s.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//");s.type=options.method||options.type||s.method||s.type;s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(core_rnotwhite)||[""];if(s.crossDomain==null){parts=rurl.exec(s.url.toLowerCase());s.crossDomain=!!(parts&&(parts[1]!==ajaxLocParts[1]||parts[2]!==ajaxLocParts[2]||(parts[3]||(parts[1]==="http:"?"80":"443"))!==(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?"80":"443"))));}
if(s.data&&s.processData&&typeof s.data!=="string"){s.data=jQuery.param(s.data,s.traditional);}
inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(state===2){return jqXHR;}
fireGlobals=s.global;if(fireGlobals&&jQuery.active++===0){jQuery.event.trigger("ajaxStart");}
s.type=s.type.toUpperCase();s.hasContent=!rnoContent.test(s.type);cacheURL=s.url;if(!s.hasContent){if(s.data){cacheURL=(s.url+=(ajax_rquery.test(cacheURL)?"&":"?")+s.data);delete s.data;}
if(s.cache===false){s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_="+ajax_nonce++):cacheURL+(ajax_rquery.test(cacheURL)?"&":"?")+"_="+ajax_nonce++;}}
if(s.ifModified){if(jQuery.lastModified[cacheURL]){jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]);}
if(jQuery.etag[cacheURL]){jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL]);}}
if(s.data&&s.hasContent&&s.contentType!==false||options.contentType){jqXHR.setRequestHeader("Content-Type",s.contentType);}
jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers){jqXHR.setRequestHeader(i,s.headers[i]);}
if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||state===2)){return jqXHR.abort();}
strAbort="abort";for(i in{success:1,error:1,complete:1}){jqXHR[i](s[i]);}
transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(!transport){done(-1,"No Transport");}else{jqXHR.readyState=1;if(fireGlobals){globalEventContext.trigger("ajaxSend",[jqXHR,s]);}
if(s.async&&s.timeout>0){timeoutTimer=setTimeout(function(){jqXHR.abort("timeout");},s.timeout);}
try{state=1;transport.send(requestHeaders,done);}catch(e){if(state<2){done(-1,e);}else{throw e;}}}
function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;if(state===2){return;}
state=2;if(timeoutTimer){clearTimeout(timeoutTimer);}
transport=undefined;responseHeadersString=headers||"";jqXHR.readyState=status>0?4:0;isSuccess=status>=200&&status<300||status===304;if(responses){response=ajaxHandleResponses(s,jqXHR,responses);}
response=ajaxConvert(s,response,jqXHR,isSuccess);if(isSuccess){if(s.ifModified){modified=jqXHR.getResponseHeader("Last-Modified");if(modified){jQuery.lastModified[cacheURL]=modified;}
modified=jqXHR.getResponseHeader("etag");if(modified){jQuery.etag[cacheURL]=modified;}}
if(status===204||s.type==="HEAD"){statusText="nocontent";}else if(status===304){statusText="notmodified";}else{statusText=response.state;success=response.data;error=response.error;isSuccess=!error;}}else{error=statusText;if(status||!statusText){statusText="error";if(status<0){status=0;}}}
jqXHR.status=status;jqXHR.statusText=(nativeStatusText||statusText)+"";if(isSuccess){deferred.resolveWith(callbackContext,[success,statusText,jqXHR]);}else{deferred.rejectWith(callbackContext,[jqXHR,statusText,error]);}
jqXHR.statusCode(statusCode);statusCode=undefined;if(fireGlobals){globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error]);}
completeDeferred.fireWith(callbackContext,[jqXHR,statusText]);if(fireGlobals){globalEventContext.trigger("ajaxComplete",[jqXHR,s]);if(!(--jQuery.active)){jQuery.event.trigger("ajaxStop");}}}
return jqXHR;},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json");},getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script");}});jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data=undefined;}
return jQuery.ajax({url:url,type:method,dataType:type,data:data,success:callback});};});function ajaxHandleResponses(s,jqXHR,responses){var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes;while(dataTypes[0]==="*"){dataTypes.shift();if(ct===undefined){ct=s.mimeType||jqXHR.getResponseHeader("Content-Type");}}
if(ct){for(type in contents){if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break;}}}
if(dataTypes[0]in responses){finalDataType=dataTypes[0];}else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break;}
if(!firstDataType){firstDataType=type;}}
finalDataType=finalDataType||firstDataType;}
if(finalDataType){if(finalDataType!==dataTypes[0]){dataTypes.unshift(finalDataType);}
return responses[finalDataType];}}
function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1]){for(conv in s.converters){converters[conv.toLowerCase()]=s.converters[conv];}}
current=dataTypes.shift();while(current){if(s.responseFields[current]){jqXHR[s.responseFields[current]]=response;}
if(!prev&&isSuccess&&s.dataFilter){response=s.dataFilter(response,s.dataType);}
prev=current;current=dataTypes.shift();if(current){if(current==="*"){current=prev;}else if(prev!=="*"&&prev!==current){conv=converters[prev+" "+current]||converters["* "+current];if(!conv){for(conv2 in converters){tmp=conv2.split(" ");if(tmp[1]===current){conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]];if(conv){if(conv===true){conv=converters[conv2];}else if(converters[conv2]!==true){current=tmp[0];dataTypes.unshift(tmp[1]);}
break;}}}}
if(conv!==true){if(conv&&s["throws"]){response=conv(response);}else{try{response=conv(response);}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current};}}}}}}
return{state:"success",data:response};}
jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(text){jQuery.globalEval(text);return text;}}});jQuery.ajaxPrefilter("script",function(s){if(s.cache===undefined){s.cache=false;}
if(s.crossDomain){s.type="GET";}});jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,callback;return{send:function(_,complete){script=jQuery("<script>").prop({async:true,charset:s.scriptCharset,src:s.url}).on("load error",callback=function(evt){script.remove();callback=null;if(evt){complete(evt.type==="error"?404:200,evt.type);}});document.head.appendChild(script[0]);},abort:function(){if(callback){callback();}}};}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||(jQuery.expando+"_"+(ajax_nonce++));this[callback]=true;return callback;}});jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp!==false&&(rjsonp.test(s.url)?"url":typeof s.data==="string"&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(s.data)&&"data");if(jsonProp||s.dataTypes[0]==="jsonp"){callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback;if(jsonProp){s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName);}else if(s.jsonp!==false){s.url+=(ajax_rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName;}
s.converters["script json"]=function(){if(!responseContainer){jQuery.error(callbackName+" was not called");}
return responseContainer[0];};s.dataTypes[0]="json";overwritten=window[callbackName];window[callbackName]=function(){responseContainer=arguments;};jqXHR.always(function(){window[callbackName]=overwritten;if(s[callbackName]){s.jsonpCallback=originalSettings.jsonpCallback;oldCallbacks.push(callbackName);}
if(responseContainer&&jQuery.isFunction(overwritten)){overwritten(responseContainer[0]);}
responseContainer=overwritten=undefined;});return"script";}});jQuery.ajaxSettings.xhr=function(){try{return new XMLHttpRequest();}catch(e){}};var xhrSupported=jQuery.ajaxSettings.xhr(),xhrSuccessStatus={0:200,1223:204},xhrId=0,xhrCallbacks={};if(window.ActiveXObject){jQuery(window).on("unload",function(){for(var key in xhrCallbacks){xhrCallbacks[key]();}
xhrCallbacks=undefined;});}
jQuery.support.cors=!!xhrSupported&&("withCredentials"in xhrSupported);jQuery.support.ajax=xhrSupported=!!xhrSupported;jQuery.ajaxTransport(function(options){var callback;if(jQuery.support.cors||xhrSupported&&!options.crossDomain){return{send:function(headers,complete){var i,id,xhr=options.xhr();xhr.open(options.type,options.url,options.async,options.username,options.password);if(options.xhrFields){for(i in options.xhrFields){xhr[i]=options.xhrFields[i];}}
if(options.mimeType&&xhr.overrideMimeType){xhr.overrideMimeType(options.mimeType);}
if(!options.crossDomain&&!headers["X-Requested-With"]){headers["X-Requested-With"]="XMLHttpRequest";}
for(i in headers){xhr.setRequestHeader(i,headers[i]);}
callback=function(type){return function(){if(callback){delete xhrCallbacks[id];callback=xhr.onload=xhr.onerror=null;if(type==="abort"){xhr.abort();}else if(type==="error"){complete(xhr.status||404,xhr.statusText);}else{complete(xhrSuccessStatus[xhr.status]||xhr.status,xhr.statusText,typeof xhr.responseText==="string"?{text:xhr.responseText}:undefined,xhr.getAllResponseHeaders());}}};};xhr.onload=callback();xhr.onerror=callback("error");callback=xhrCallbacks[(id=xhrId++)]=callback("abort");xhr.send(options.hasContent&&options.data||null);},abort:function(){if(callback){callback();}}};}});var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])=|)("+core_pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(prop,value){var tween=this.createTween(prop,value),target=tween.cur(),parts=rfxnum.exec(value),unit=parts&&parts[3]||(jQuery.cssNumber[prop]?"":"px"),start=(jQuery.cssNumber[prop]||unit!=="px"&&+target)&&rfxnum.exec(jQuery.css(tween.elem,prop)),scale=1,maxIterations=20;if(start&&start[3]!==unit){unit=unit||start[3];parts=parts||[];start=+target||1;do{scale=scale||".5";start=start/scale;jQuery.style(tween.elem,prop,start+unit);}while(scale!==(scale=tween.cur()/target)&&scale!==1&&--maxIterations);}
if(parts){start=tween.start=+start||+target||0;tween.unit=unit;tween.end=parts[1]?start+(parts[1]+1)*parts[2]:+parts[2];}
return tween;}]};function createFxNow(){setTimeout(function(){fxNow=undefined;});return(fxNow=jQuery.now());}
function createTween(value,prop,animation){var tween,collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length;for(;index<length;index++){if((tween=collection[index].call(animation,prop,value))){return tween;}}}
function Animation(elem,properties,options){var result,stopped,index=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem;}),tick=function(){if(stopped){return false;}
var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;for(;index<length;index++){animation.tweens[index].run(percent);}
deferred.notifyWith(elem,[animation,percent,remaining]);if(percent<1&&length){return remaining;}else{deferred.resolveWith(elem,[animation]);return false;}},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(true,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);animation.tweens.push(tween);return tween;},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped){return this;}
stopped=true;for(;index<length;index++){animation.tweens[index].run(1);}
if(gotoEnd){deferred.resolveWith(elem,[animation,gotoEnd]);}else{deferred.rejectWith(elem,[animation,gotoEnd]);}
return this;}}),props=animation.props;propFilter(props,animation.opts.specialEasing);for(;index<length;index++){result=animationPrefilters[index].call(animation,elem,props,animation.opts);if(result){return result;}}
jQuery.map(props,createTween,animation);if(jQuery.isFunction(animation.opts.start)){animation.opts.start.call(elem,animation);}
jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue}));return animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always);}
function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props){name=jQuery.camelCase(index);easing=specialEasing[name];value=props[index];if(jQuery.isArray(value)){easing=value[1];value=props[index]=value[0];}
if(index!==name){props[name]=value;delete props[index];}
hooks=jQuery.cssHooks[name];if(hooks&&"expand"in hooks){value=hooks.expand(value);delete props[name];for(index in value){if(!(index in props)){props[index]=value[index];specialEasing[index]=easing;}}}else{specialEasing[name]=easing;}}}
jQuery.Animation=jQuery.extend(Animation,{tweener:function(props,callback){if(jQuery.isFunction(props)){callback=props;props=["*"];}else{props=props.split(" ");}
var prop,index=0,length=props.length;for(;index<length;index++){prop=props[index];tweeners[prop]=tweeners[prop]||[];tweeners[prop].unshift(callback);}},prefilter:function(callback,prepend){if(prepend){animationPrefilters.unshift(callback);}else{animationPrefilters.push(callback);}}});function defaultPrefilter(elem,props,opts){var prop,value,toggle,tween,hooks,oldfire,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHidden(elem),dataShow=data_priv.get(elem,"fxshow");if(!opts.queue){hooks=jQuery._queueHooks(elem,"fx");if(hooks.unqueued==null){hooks.unqueued=0;oldfire=hooks.empty.fire;hooks.empty.fire=function(){if(!hooks.unqueued){oldfire();}};}
hooks.unqueued++;anim.always(function(){anim.always(function(){hooks.unqueued--;if(!jQuery.queue(elem,"fx").length){hooks.empty.fire();}});});}
if(elem.nodeType===1&&("height"in props||"width"in props)){opts.overflow=[style.overflow,style.overflowX,style.overflowY];if(jQuery.css(elem,"display")==="inline"&&jQuery.css(elem,"float")==="none"){style.display="inline-block";}}
if(opts.overflow){style.overflow="hidden";anim.always(function(){style.overflow=opts.overflow[0];style.overflowX=opts.overflow[1];style.overflowY=opts.overflow[2];});}
for(prop in props){value=props[prop];if(rfxtypes.exec(value)){delete props[prop];toggle=toggle||value==="toggle";if(value===(hidden?"hide":"show")){if(value==="show"&&dataShow&&dataShow[prop]!==undefined){hidden=true;}else{continue;}}
orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop);}}
if(!jQuery.isEmptyObject(orig)){if(dataShow){if("hidden"in dataShow){hidden=dataShow.hidden;}}else{dataShow=data_priv.access(elem,"fxshow",{});}
if(toggle){dataShow.hidden=!hidden;}
if(hidden){jQuery(elem).show();}else{anim.done(function(){jQuery(elem).hide();});}
anim.done(function(){var prop;data_priv.remove(elem,"fxshow");for(prop in orig){jQuery.style(elem,prop,orig[prop]);}});for(prop in orig){tween=createTween(hidden?dataShow[prop]:0,prop,anim);if(!(prop in dataShow)){dataShow[prop]=tween.start;if(hidden){tween.end=tween.start;tween.start=prop==="width"||prop==="height"?1:0;}}}}}
function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing);}
jQuery.Tween=Tween;Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem;this.prop=prop;this.easing=easing||"swing";this.options=options;this.start=this.now=this.cur();this.end=end;this.unit=unit||(jQuery.cssNumber[prop]?"":"px");},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this);},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];if(this.options.duration){this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration);}else{this.pos=eased=percent;}
this.now=(this.end-this.start)*eased+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this);}
if(hooks&&hooks.set){hooks.set(this);}else{Tween.propHooks._default.set(this);}
return this;}};Tween.prototype.init.prototype=Tween.prototype;Tween.propHooks={_default:{get:function(tween){var result;if(tween.elem[tween.prop]!=null&&(!tween.elem.style||tween.elem.style[tween.prop]==null)){return tween.elem[tween.prop];}
result=jQuery.css(tween.elem,tween.prop,"");return!result||result==="auto"?0:result;},set:function(tween){if(jQuery.fx.step[tween.prop]){jQuery.fx.step[tween.prop](tween);}else if(tween.elem.style&&(tween.elem.style[jQuery.cssProps[tween.prop]]!=null||jQuery.cssHooks[tween.prop])){jQuery.style(tween.elem,tween.prop,tween.now+tween.unit);}else{tween.elem[tween.prop]=tween.now;}}}};Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){if(tween.elem.nodeType&&tween.elem.parentNode){tween.elem[tween.prop]=tween.now;}}};jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return speed==null||typeof speed==="boolean"?cssFn.apply(this,arguments):this.animate(genFx(name,true),speed,easing,callback);};});jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback);},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);if(empty||data_priv.get(this,"finish")){anim.stop(true);}};doAnimation.finish=doAnimation;return empty||optall.queue===false?this.each(doAnimation):this.queue(optall.queue,doAnimation);},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop;stop(gotoEnd);};if(typeof type!=="string"){gotoEnd=clearQueue;clearQueue=type;type=undefined;}
if(clearQueue&&type!==false){this.queue(type||"fx",[]);}
return this.each(function(){var dequeue=true,index=type!=null&&type+"queueHooks",timers=jQuery.timers,data=data_priv.get(this);if(index){if(data[index]&&data[index].stop){stopQueue(data[index]);}}else{for(index in data){if(data[index]&&data[index].stop&&rrun.test(index)){stopQueue(data[index]);}}}
for(index=timers.length;index--;){if(timers[index].elem===this&&(type==null||timers[index].queue===type)){timers[index].anim.stop(gotoEnd);dequeue=false;timers.splice(index,1);}}
if(dequeue||!gotoEnd){jQuery.dequeue(this,type);}});},finish:function(type){if(type!==false){type=type||"fx";}
return this.each(function(){var index,data=data_priv.get(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;data.finish=true;jQuery.queue(this,type,[]);if(hooks&&hooks.stop){hooks.stop.call(this,true);}
for(index=timers.length;index--;){if(timers[index].elem===this&&timers[index].queue===type){timers[index].anim.stop(true);timers.splice(index,1);}}
for(index=0;index<length;index++){if(queue[index]&&queue[index].finish){queue[index].finish.call(this);}}
delete data.finish;});}});function genFx(type,includeWidth){var which,attrs={height:type},i=0;includeWidth=includeWidth?1:0;for(;i<4;i+=2-includeWidth){which=cssExpand[i];attrs["margin"+which]=attrs["padding"+which]=type;}
if(includeWidth){attrs.opacity=attrs.width=type;}
return attrs;}
jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback);};});jQuery.speed=function(speed,easing,fn){var opt=speed&&typeof speed==="object"?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};opt.duration=jQuery.fx.off?0:typeof opt.duration==="number"?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default;if(opt.queue==null||opt.queue===true){opt.queue="fx";}
opt.old=opt.complete;opt.complete=function(){if(jQuery.isFunction(opt.old)){opt.old.call(this);}
if(opt.queue){jQuery.dequeue(this,opt.queue);}};return opt;};jQuery.easing={linear:function(p){return p;},swing:function(p){return 0.5-Math.cos(p*Math.PI)/2;}};jQuery.timers=[];jQuery.fx=Tween.prototype.init;jQuery.fx.tick=function(){var timer,timers=jQuery.timers,i=0;fxNow=jQuery.now();for(;i<timers.length;i++){timer=timers[i];if(!timer()&&timers[i]===timer){timers.splice(i--,1);}}
if(!timers.length){jQuery.fx.stop();}
fxNow=undefined;};jQuery.fx.timer=function(timer){if(timer()&&jQuery.timers.push(timer)){jQuery.fx.start();}};jQuery.fx.interval=13;jQuery.fx.start=function(){if(!timerId){timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval);}};jQuery.fx.stop=function(){clearInterval(timerId);timerId=null;};jQuery.fx.speeds={slow:600,fast:200,_default:400};jQuery.fx.step={};if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem;}).length;};}
jQuery.fn.offset=function(options){if(arguments.length){return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i);});}
var docElem,win,elem=this[0],box={top:0,left:0},doc=elem&&elem.ownerDocument;if(!doc){return;}
docElem=doc.documentElement;if(!jQuery.contains(docElem,elem)){return box;}
if(typeof elem.getBoundingClientRect!==core_strundefined){box=elem.getBoundingClientRect();}
win=getWindow(doc);return{top:box.top+win.pageYOffset-docElem.clientTop,left:box.left+win.pageXOffset-docElem.clientLeft};};jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};if(position==="static"){elem.style.position="relative";}
curOffset=curElem.offset();curCSSTop=jQuery.css(elem,"top");curCSSLeft=jQuery.css(elem,"left");calculatePosition=(position==="absolute"||position==="fixed")&&(curCSSTop+curCSSLeft).indexOf("auto")>-1;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left;}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0;}
if(jQuery.isFunction(options)){options=options.call(elem,i,curOffset);}
if(options.top!=null){props.top=(options.top-curOffset.top)+curTop;}
if(options.left!=null){props.left=(options.left-curOffset.left)+curLeft;}
if("using"in options){options.using.call(elem,props);}else{curElem.css(props);}}};jQuery.fn.extend({position:function(){if(!this[0]){return;}
var offsetParent,offset,elem=this[0],parentOffset={top:0,left:0};if(jQuery.css(elem,"position")==="fixed"){offset=elem.getBoundingClientRect();}else{offsetParent=this.offsetParent();offset=this.offset();if(!jQuery.nodeName(offsetParent[0],"html")){parentOffset=offsetParent.offset();}
parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",true);parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",true);}
return{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",true),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",true)};},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent||docElem;while(offsetParent&&(!jQuery.nodeName(offsetParent,"html")&&jQuery.css(offsetParent,"position")==="static")){offsetParent=offsetParent.offsetParent;}
return offsetParent||docElem;});}});jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top="pageYOffset"===prop;jQuery.fn[method]=function(val){return jQuery.access(this,function(elem,method,val){var win=getWindow(elem);if(val===undefined){return win?win[prop]:elem[method];}
if(win){win.scrollTo(!top?val:window.pageXOffset,top?val:window.pageYOffset);}else{elem[method]=val;}},method,val,arguments.length,null);};});function getWindow(elem){return jQuery.isWindow(elem)?elem:elem.nodeType===9&&elem.defaultView;}
jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||typeof margin!=="boolean"),extra=defaultExtra||(margin===true||value===true?"margin":"border");return jQuery.access(this,function(elem,type,value){var doc;if(jQuery.isWindow(elem)){return elem.document.documentElement["client"+name];}
if(elem.nodeType===9){doc=elem.documentElement;return Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name]);}
return value===undefined?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra);},type,chainable?margin:undefined,chainable,null);};});});jQuery.fn.size=function(){return this.length;};jQuery.fn.andSelf=jQuery.fn.addBack;if(typeof module==="object"&&module&&typeof module.exports==="object"){module.exports=jQuery;}else{if(typeof define==="function"&&define.amd){define("jquery",[],function(){return jQuery;});}}
if(typeof window==="object"&&typeof window.document==="object"){window.jQuery=window.$=jQuery;}})(window);(function(glob){var version="0.4.2",has="hasOwnProperty",separator=/[\.\/]/,wildcard="*",fun=function(){},numsort=function(a,b){return a-b;},current_event,stop,events={n:{}},eve=function(name,scope){name=String(name);var e=events,oldstop=stop,args=Array.prototype.slice.call(arguments,2),listeners=eve.listeners(name),z=0,f=false,l,indexed=[],queue={},out=[],ce=current_event,errors=[];current_event=name;stop=0;for(var i=0,ii=listeners.length;i<ii;i++)if("zIndex"in listeners[i]){indexed.push(listeners[i].zIndex);if(listeners[i].zIndex<0){queue[listeners[i].zIndex]=listeners[i];}}
indexed.sort(numsort);while(indexed[z]<0){l=queue[indexed[z++]];out.push(l.apply(scope,args));if(stop){stop=oldstop;return out;}}
for(i=0;i<ii;i++){l=listeners[i];if("zIndex"in l){if(l.zIndex==indexed[z]){out.push(l.apply(scope,args));if(stop){break;}
do{z++;l=queue[indexed[z]];l&&out.push(l.apply(scope,args));if(stop){break;}}while(l)}else{queue[l.zIndex]=l;}}else{out.push(l.apply(scope,args));if(stop){break;}}}
stop=oldstop;current_event=ce;return out.length?out:null;};eve._events=events;eve.listeners=function(name){var names=name.split(separator),e=events,item,items,k,i,ii,j,jj,nes,es=[e],out=[];for(i=0,ii=names.length;i<ii;i++){nes=[];for(j=0,jj=es.length;j<jj;j++){e=es[j].n;items=[e[names[i]],e[wildcard]];k=2;while(k--){item=items[k];if(item){nes.push(item);out=out.concat(item.f||[]);}}}
es=nes;}
return out;};eve.on=function(name,f){name=String(name);if(typeof f!="function"){return function(){};}
var names=name.split(separator),e=events;for(var i=0,ii=names.length;i<ii;i++){e=e.n;e=e.hasOwnProperty(names[i])&&e[names[i]]||(e[names[i]]={n:{}});}
e.f=e.f||[];for(i=0,ii=e.f.length;i<ii;i++)if(e.f[i]==f){return fun;}
e.f.push(f);return function(zIndex){if(+zIndex==+zIndex){f.zIndex=+zIndex;}};};eve.f=function(event){var attrs=[].slice.call(arguments,1);return function(){eve.apply(null,[event,null].concat(attrs).concat([].slice.call(arguments,0)));};};eve.stop=function(){stop=1;};eve.nt=function(subname){if(subname){return new RegExp("(?:\\.|\\/|^)"+subname+"(?:\\.|\\/|$)").test(current_event);}
return current_event;};eve.nts=function(){return current_event.split(separator);};eve.off=eve.unbind=function(name,f){if(!name){eve._events=events={n:{}};return;}
var names=name.split(separator),e,key,splice,i,ii,j,jj,cur=[events];for(i=0,ii=names.length;i<ii;i++){for(j=0;j<cur.length;j+=splice.length-2){splice=[j,1];e=cur[j].n;if(names[i]!=wildcard){if(e[names[i]]){splice.push(e[names[i]]);}}else{for(key in e)if(e[has](key)){splice.push(e[key]);}}
cur.splice.apply(cur,splice);}}
for(i=0,ii=cur.length;i<ii;i++){e=cur[i];while(e.n){if(f){if(e.f){for(j=0,jj=e.f.length;j<jj;j++)if(e.f[j]==f){e.f.splice(j,1);break;}
!e.f.length&&delete e.f;}
for(key in e.n)if(e.n[has](key)&&e.n[key].f){var funcs=e.n[key].f;for(j=0,jj=funcs.length;j<jj;j++)if(funcs[j]==f){funcs.splice(j,1);break;}
!funcs.length&&delete e.n[key].f;}}else{delete e.f;for(key in e.n)if(e.n[has](key)&&e.n[key].f){delete e.n[key].f;}}
e=e.n;}}};eve.once=function(name,f){var f2=function(){eve.unbind(name,f2);return f.apply(this,arguments);};return eve.on(name,f2);};eve.version=version;eve.toString=function(){return"You are running Eve "+version;};(typeof module!="undefined"&&module.exports)?(module.exports=eve):(typeof define!="undefined"?(define("eve",[],function(){return eve;})):(glob.eve=eve));})(window||this);(function(glob,factory){if(typeof define==="function"&&define.amd){define(["eve"],function(eve){return factory(glob,eve);});}else{factory(glob,glob.eve);}}(this,function(window,eve){function R(first){if(R.is(first,"function")){return loaded?first():eve.on("raphael.DOMload",first);}else if(R.is(first,array)){return R._engine.create[apply](R,first.splice(0,3+R.is(first[0],nu))).add(first);}else{var args=Array.prototype.slice.call(arguments,0);if(R.is(args[args.length-1],"function")){var f=args.pop();return loaded?f.call(R._engine.create[apply](R,args)):eve.on("raphael.DOMload",function(){f.call(R._engine.create[apply](R,args));});}else{return R._engine.create[apply](R,arguments);}}}
R.version="2.1.2";R.eve=eve;var loaded,separator=/[, ]+/,elements={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},formatrg=/\{(\d+)\}/g,proto="prototype",has="hasOwnProperty",g={doc:document,win:window},oldRaphael={was:Object.prototype[has].call(g.win,"Raphael"),is:g.win.Raphael},Paper=function(){this.ca=this.customAttributes={};},paperproto,appendChild="appendChild",apply="apply",concat="concat",supportsTouch=('ontouchstart'in g.win)||g.win.DocumentTouch&&g.doc instanceof DocumentTouch,E="",S=" ",Str=String,split="split",events="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[split](S),touchMap={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},lowerCase=Str.prototype.toLowerCase,math=Math,mmax=math.max,mmin=math.min,abs=math.abs,pow=math.pow,PI=math.PI,nu="number",string="string",array="array",toString="toString",fillString="fill",objectToString=Object.prototype.toString,paper={},push="push",ISURL=R._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,colourRegExp=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,isnan={"NaN":1,"Infinity":1,"-Infinity":1},bezierrg=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,round=math.round,setAttribute="setAttribute",toFloat=parseFloat,toInt=parseInt,upperCase=Str.prototype.toUpperCase,availableAttrs=R._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},availableAnimAttrs=R._availableAnimAttrs={blur:nu,"clip-rect":"csv",cx:nu,cy:nu,fill:"colour","fill-opacity":nu,"font-size":nu,height:nu,opacity:nu,path:"path",r:nu,rx:nu,ry:nu,stroke:"colour","stroke-opacity":nu,"stroke-width":nu,transform:"transform",width:nu,x:nu,y:nu},whitespace=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]/g,commaSpaces=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,hsrg={hs:1,rg:1},p2s=/,?([achlmqrstvxz]),?/gi,pathCommand=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,tCommand=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,pathValues=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/ig,radial_gradient=R._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,eldata={},sortByKey=function(a,b){return a.key-b.key;},sortByNumber=function(a,b){return toFloat(a)-toFloat(b);},fun=function(){},pipe=function(x){return x;},rectPath=R._rectPath=function(x,y,w,h,r){if(r){return[["M",x+r,y],["l",w-r*2,0],["a",r,r,0,0,1,r,r],["l",0,h-r*2],["a",r,r,0,0,1,-r,r],["l",r*2-w,0],["a",r,r,0,0,1,-r,-r],["l",0,r*2-h],["a",r,r,0,0,1,r,-r],["z"]];}
return[["M",x,y],["l",w,0],["l",0,h],["l",-w,0],["z"]];},ellipsePath=function(x,y,rx,ry){if(ry==null){ry=rx;}
return[["M",x,y],["m",0,-ry],["a",rx,ry,0,1,1,0,2*ry],["a",rx,ry,0,1,1,0,-2*ry],["z"]];},getPath=R._getPath={path:function(el){return el.attr("path");},circle:function(el){var a=el.attrs;return ellipsePath(a.cx,a.cy,a.r);},ellipse:function(el){var a=el.attrs;return ellipsePath(a.cx,a.cy,a.rx,a.ry);},rect:function(el){var a=el.attrs;return rectPath(a.x,a.y,a.width,a.height,a.r);},image:function(el){var a=el.attrs;return rectPath(a.x,a.y,a.width,a.height);},text:function(el){var bbox=el._getBBox();return rectPath(bbox.x,bbox.y,bbox.width,bbox.height);},set:function(el){var bbox=el._getBBox();return rectPath(bbox.x,bbox.y,bbox.width,bbox.height);}},mapPath=R.mapPath=function(path,matrix){if(!matrix){return path;}
var x,y,i,j,ii,jj,pathi;path=path2curve(path);for(i=0,ii=path.length;i<ii;i++){pathi=path[i];for(j=1,jj=pathi.length;j<jj;j+=2){x=matrix.x(pathi[j],pathi[j+1]);y=matrix.y(pathi[j],pathi[j+1]);pathi[j]=x;pathi[j+1]=y;}}
return path;};R._g=g;R.type=(g.win.SVGAngle||g.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML");if(R.type=="VML"){var d=g.doc.createElement("div"),b;d.innerHTML='<v:shape adj="1"/>';b=d.firstChild;b.style.behavior="url(#default#VML)";if(!(b&&typeof b.adj=="object")){return(R.type=E);}
d=null;}
R.svg=!(R.vml=R.type=="VML");R._Paper=Paper;R.fn=paperproto=Paper.prototype=R.prototype;R._id=0;R._oid=0;R.is=function(o,type){type=lowerCase.call(type);if(type=="finite"){return!isnan[has](+o);}
if(type=="array"){return o instanceof Array;}
return(type=="null"&&o===null)||(type==typeof o&&o!==null)||(type=="object"&&o===Object(o))||(type=="array"&&Array.isArray&&Array.isArray(o))||objectToString.call(o).slice(8,-1).toLowerCase()==type;};function clone(obj){if(typeof obj=="function"||Object(obj)!==obj){return obj;}
var res=new obj.constructor;for(var key in obj)if(obj[has](key)){res[key]=clone(obj[key]);}
return res;}
R.angle=function(x1,y1,x2,y2,x3,y3){if(x3==null){var x=x1-x2,y=y1-y2;if(!x&&!y){return 0;}
return(180+math.atan2(-y,-x)*180/PI+360)%360;}else{return R.angle(x1,y1,x3,y3)-R.angle(x2,y2,x3,y3);}};R.rad=function(deg){return deg%360*PI/180;};R.deg=function(rad){return rad*180/PI%360;};R.snapTo=function(values,value,tolerance){tolerance=R.is(tolerance,"finite")?tolerance:10;if(R.is(values,array)){var i=values.length;while(i--)if(abs(values[i]-value)<=tolerance){return values[i];}}else{values=+values;var rem=value%values;if(rem<tolerance){return value-rem;}
if(rem>values-tolerance){return value-rem+values;}}
return value;};var createUUID=R.createUUID=(function(uuidRegEx,uuidReplacer){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(uuidRegEx,uuidReplacer).toUpperCase();};})(/[xy]/g,function(c){var r=math.random()*16|0,v=c=="x"?r:(r&3|8);return v.toString(16);});R.setWindow=function(newwin){eve("raphael.setWindow",R,g.win,newwin);g.win=newwin;g.doc=g.win.document;if(R._engine.initWin){R._engine.initWin(g.win);}};var toHex=function(color){if(R.vml){var trim=/^\s+|\s+$/g;var bod;try{var docum=new ActiveXObject("htmlfile");docum.write("<body>");docum.close();bod=docum.body;}catch(e){bod=createPopup().document.body;}
var range=bod.createTextRange();toHex=cacher(function(color){try{bod.style.color=Str(color).replace(trim,E);var value=range.queryCommandValue("ForeColor");value=((value&255)<<16)|(value&65280)|((value&16711680)>>>16);return"#"+("000000"+value.toString(16)).slice(-6);}catch(e){return"none";}});}else{var i=g.doc.createElement("i");i.title="Rapha\xebl Colour Picker";i.style.display="none";g.doc.body.appendChild(i);toHex=cacher(function(color){i.style.color=color;return g.doc.defaultView.getComputedStyle(i,E).getPropertyValue("color");});}
return toHex(color);},hsbtoString=function(){return"hsb("+[this.h,this.s,this.b]+")";},hsltoString=function(){return"hsl("+[this.h,this.s,this.l]+")";},rgbtoString=function(){return this.hex;},prepareRGB=function(r,g,b){if(g==null&&R.is(r,"object")&&"r"in r&&"g"in r&&"b"in r){b=r.b;g=r.g;r=r.r;}
if(g==null&&R.is(r,string)){var clr=R.getRGB(r);r=clr.r;g=clr.g;b=clr.b;}
if(r>1||g>1||b>1){r/=255;g/=255;b/=255;}
return[r,g,b];},packageRGB=function(r,g,b,o){r*=255;g*=255;b*=255;var rgb={r:r,g:g,b:b,hex:R.rgb(r,g,b),toString:rgbtoString};R.is(o,"finite")&&(rgb.opacity=o);return rgb;};R.color=function(clr){var rgb;if(R.is(clr,"object")&&"h"in clr&&"s"in clr&&"b"in clr){rgb=R.hsb2rgb(clr);clr.r=rgb.r;clr.g=rgb.g;clr.b=rgb.b;clr.hex=rgb.hex;}else if(R.is(clr,"object")&&"h"in clr&&"s"in clr&&"l"in clr){rgb=R.hsl2rgb(clr);clr.r=rgb.r;clr.g=rgb.g;clr.b=rgb.b;clr.hex=rgb.hex;}else{if(R.is(clr,"string")){clr=R.getRGB(clr);}
if(R.is(clr,"object")&&"r"in clr&&"g"in clr&&"b"in clr){rgb=R.rgb2hsl(clr);clr.h=rgb.h;clr.s=rgb.s;clr.l=rgb.l;rgb=R.rgb2hsb(clr);clr.v=rgb.b;}else{clr={hex:"none"};clr.r=clr.g=clr.b=clr.h=clr.s=clr.v=clr.l=-1;}}
clr.toString=rgbtoString;return clr;};R.hsb2rgb=function(h,s,v,o){if(this.is(h,"object")&&"h"in h&&"s"in h&&"b"in h){v=h.b;s=h.s;h=h.h;o=h.o;}
h*=360;var R,G,B,X,C;h=(h%360)/60;C=v*s;X=C*(1-abs(h%2-1));R=G=B=v-C;h=~~h;R+=[C,X,0,0,X,C][h];G+=[X,C,C,X,0,0][h];B+=[0,0,X,C,C,X][h];return packageRGB(R,G,B,o);};R.hsl2rgb=function(h,s,l,o){if(this.is(h,"object")&&"h"in h&&"s"in h&&"l"in h){l=h.l;s=h.s;h=h.h;}
if(h>1||s>1||l>1){h/=360;s/=100;l/=100;}
h*=360;var R,G,B,X,C;h=(h%360)/60;C=2*s*(l<.5?l:1-l);X=C*(1-abs(h%2-1));R=G=B=l-C/2;h=~~h;R+=[C,X,0,0,X,C][h];G+=[X,C,C,X,0,0][h];B+=[0,0,X,C,C,X][h];return packageRGB(R,G,B,o);};R.rgb2hsb=function(r,g,b){b=prepareRGB(r,g,b);r=b[0];g=b[1];b=b[2];var H,S,V,C;V=mmax(r,g,b);C=V-mmin(r,g,b);H=(C==0?null:V==r?(g-b)/C:V==g?(b-r)/C+2:(r-g)/C+4);H=((H+360)%6)*60/360;S=C==0?0:C/V;return{h:H,s:S,b:V,toString:hsbtoString};};R.rgb2hsl=function(r,g,b){b=prepareRGB(r,g,b);r=b[0];g=b[1];b=b[2];var H,S,L,M,m,C;M=mmax(r,g,b);m=mmin(r,g,b);C=M-m;H=(C==0?null:M==r?(g-b)/C:M==g?(b-r)/C+2:(r-g)/C+4);H=((H+360)%6)*60/360;L=(M+m)/2;S=(C==0?0:L<.5?C/(2*L):C/(2-2*L));return{h:H,s:S,l:L,toString:hsltoString};};R._path2string=function(){return this.join(",").replace(p2s,"$1");};function repush(array,item){for(var i=0,ii=array.length;i<ii;i++)if(array[i]===item){return array.push(array.splice(i,1)[0]);}}
function cacher(f,scope,postprocessor){function newf(){var arg=Array.prototype.slice.call(arguments,0),args=arg.join("\u2400"),cache=newf.cache=newf.cache||{},count=newf.count=newf.count||[];if(cache[has](args)){repush(count,args);return postprocessor?postprocessor(cache[args]):cache[args];}
count.length>=1e3&&delete cache[count.shift()];count.push(args);cache[args]=f[apply](scope,arg);return postprocessor?postprocessor(cache[args]):cache[args];}
return newf;}
var preload=R._preload=function(src,f){var img=g.doc.createElement("img");img.style.cssText="position:absolute;left:-9999em;top:-9999em";img.onload=function(){f.call(this);this.onload=null;g.doc.body.removeChild(this);};img.onerror=function(){g.doc.body.removeChild(this);};g.doc.body.appendChild(img);img.src=src;};function clrToString(){return this.hex;}
R.getRGB=cacher(function(colour){if(!colour||!!((colour=Str(colour)).indexOf("-")+1)){return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:clrToString};}
if(colour=="none"){return{r:-1,g:-1,b:-1,hex:"none",toString:clrToString};}
!(hsrg[has](colour.toLowerCase().substring(0,2))||colour.charAt()=="#")&&(colour=toHex(colour));var res,red,green,blue,opacity,t,values,rgb=colour.match(colourRegExp);if(rgb){if(rgb[2]){blue=toInt(rgb[2].substring(5),16);green=toInt(rgb[2].substring(3,5),16);red=toInt(rgb[2].substring(1,3),16);}
if(rgb[3]){blue=toInt((t=rgb[3].charAt(3))+t,16);green=toInt((t=rgb[3].charAt(2))+t,16);red=toInt((t=rgb[3].charAt(1))+t,16);}
if(rgb[4]){values=rgb[4][split](commaSpaces);red=toFloat(values[0]);values[0].slice(-1)=="%"&&(red*=2.55);green=toFloat(values[1]);values[1].slice(-1)=="%"&&(green*=2.55);blue=toFloat(values[2]);values[2].slice(-1)=="%"&&(blue*=2.55);rgb[1].toLowerCase().slice(0,4)=="rgba"&&(opacity=toFloat(values[3]));values[3]&&values[3].slice(-1)=="%"&&(opacity/=100);}
if(rgb[5]){values=rgb[5][split](commaSpaces);red=toFloat(values[0]);values[0].slice(-1)=="%"&&(red*=2.55);green=toFloat(values[1]);values[1].slice(-1)=="%"&&(green*=2.55);blue=toFloat(values[2]);values[2].slice(-1)=="%"&&(blue*=2.55);(values[0].slice(-3)=="deg"||values[0].slice(-1)=="\xb0")&&(red/=360);rgb[1].toLowerCase().slice(0,4)=="hsba"&&(opacity=toFloat(values[3]));values[3]&&values[3].slice(-1)=="%"&&(opacity/=100);return R.hsb2rgb(red,green,blue,opacity);}
if(rgb[6]){values=rgb[6][split](commaSpaces);red=toFloat(values[0]);values[0].slice(-1)=="%"&&(red*=2.55);green=toFloat(values[1]);values[1].slice(-1)=="%"&&(green*=2.55);blue=toFloat(values[2]);values[2].slice(-1)=="%"&&(blue*=2.55);(values[0].slice(-3)=="deg"||values[0].slice(-1)=="\xb0")&&(red/=360);rgb[1].toLowerCase().slice(0,4)=="hsla"&&(opacity=toFloat(values[3]));values[3]&&values[3].slice(-1)=="%"&&(opacity/=100);return R.hsl2rgb(red,green,blue,opacity);}
rgb={r:red,g:green,b:blue,toString:clrToString};rgb.hex="#"+(16777216|blue|(green<<8)|(red<<16)).toString(16).slice(1);R.is(opacity,"finite")&&(rgb.opacity=opacity);return rgb;}
return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:clrToString};},R);R.hsb=cacher(function(h,s,b){return R.hsb2rgb(h,s,b).hex;});R.hsl=cacher(function(h,s,l){return R.hsl2rgb(h,s,l).hex;});R.rgb=cacher(function(r,g,b){return"#"+(16777216|b|(g<<8)|(r<<16)).toString(16).slice(1);});R.getColor=function(value){var start=this.getColor.start=this.getColor.start||{h:0,s:1,b:value||.75},rgb=this.hsb2rgb(start.h,start.s,start.b);start.h+=.075;if(start.h>1){start.h=0;start.s-=.2;start.s<=0&&(this.getColor.start={h:0,s:1,b:start.b});}
return rgb.hex;};R.getColor.reset=function(){delete this.start;};function catmullRom2bezier(crp,z){var d=[];for(var i=0,iLen=crp.length;iLen-2*!z>i;i+=2){var p=[{x:+crp[i-2],y:+crp[i-1]},{x:+crp[i],y:+crp[i+1]},{x:+crp[i+2],y:+crp[i+3]},{x:+crp[i+4],y:+crp[i+5]}];if(z){if(!i){p[0]={x:+crp[iLen-2],y:+crp[iLen-1]};}else if(iLen-4==i){p[3]={x:+crp[0],y:+crp[1]};}else if(iLen-2==i){p[2]={x:+crp[0],y:+crp[1]};p[3]={x:+crp[2],y:+crp[3]};}}else{if(iLen-4==i){p[3]=p[2];}else if(!i){p[0]={x:+crp[i],y:+crp[i+1]};}}
d.push(["C",(-p[0].x+6*p[1].x+p[2].x)/6,(-p[0].y+6*p[1].y+p[2].y)/6,(p[1].x+6*p[2].x-p[3].x)/6,(p[1].y+6*p[2].y-p[3].y)/6,p[2].x,p[2].y]);}
return d;}
R.parsePathString=function(pathString){if(!pathString){return null;}
var pth=paths(pathString);if(pth.arr){return pathClone(pth.arr);}
var paramCounts={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},data=[];if(R.is(pathString,array)&&R.is(pathString[0],array)){data=pathClone(pathString);}
if(!data.length){Str(pathString).replace(pathCommand,function(a,b,c){var params=[],name=b.toLowerCase();c.replace(pathValues,function(a,b){b&&params.push(+b);});if(name=="m"&&params.length>2){data.push([b][concat](params.splice(0,2)));name="l";b=b=="m"?"l":"L";}
if(name=="r"){data.push([b][concat](params));}else while(params.length>=paramCounts[name]){data.push([b][concat](params.splice(0,paramCounts[name])));if(!paramCounts[name]){break;}}});}
data.toString=R._path2string;pth.arr=pathClone(data);return data;};R.parseTransformString=cacher(function(TString){if(!TString){return null;}
var paramCounts={r:3,s:4,t:2,m:6},data=[];if(R.is(TString,array)&&R.is(TString[0],array)){data=pathClone(TString);}
if(!data.length){Str(TString).replace(tCommand,function(a,b,c){var params=[],name=lowerCase.call(b);c.replace(pathValues,function(a,b){b&&params.push(+b);});data.push([b][concat](params));});}
data.toString=R._path2string;return data;});var paths=function(ps){var p=paths.ps=paths.ps||{};if(p[ps]){p[ps].sleep=100;}else{p[ps]={sleep:100};}
setTimeout(function(){for(var key in p)if(p[has](key)&&key!=ps){p[key].sleep--;!p[key].sleep&&delete p[key];}});return p[ps];};R.findDotsAtSegment=function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t){var t1=1-t,t13=pow(t1,3),t12=pow(t1,2),t2=t*t,t3=t2*t,x=t13*p1x+t12*3*t*c1x+t1*3*t*t*c2x+t3*p2x,y=t13*p1y+t12*3*t*c1y+t1*3*t*t*c2y+t3*p2y,mx=p1x+2*t*(c1x-p1x)+t2*(c2x-2*c1x+p1x),my=p1y+2*t*(c1y-p1y)+t2*(c2y-2*c1y+p1y),nx=c1x+2*t*(c2x-c1x)+t2*(p2x-2*c2x+c1x),ny=c1y+2*t*(c2y-c1y)+t2*(p2y-2*c2y+c1y),ax=t1*p1x+t*c1x,ay=t1*p1y+t*c1y,cx=t1*c2x+t*p2x,cy=t1*c2y+t*p2y,alpha=(90-math.atan2(mx-nx,my-ny)*180/PI);(mx>nx||my<ny)&&(alpha+=180);return{x:x,y:y,m:{x:mx,y:my},n:{x:nx,y:ny},start:{x:ax,y:ay},end:{x:cx,y:cy},alpha:alpha};};R.bezierBBox=function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y){if(!R.is(p1x,"array")){p1x=[p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y];}
var bbox=curveDim.apply(null,p1x);return{x:bbox.min.x,y:bbox.min.y,x2:bbox.max.x,y2:bbox.max.y,width:bbox.max.x-bbox.min.x,height:bbox.max.y-bbox.min.y};};R.isPointInsideBBox=function(bbox,x,y){return x>=bbox.x&&x<=bbox.x2&&y>=bbox.y&&y<=bbox.y2;};R.isBBoxIntersect=function(bbox1,bbox2){var i=R.isPointInsideBBox;return i(bbox2,bbox1.x,bbox1.y)||i(bbox2,bbox1.x2,bbox1.y)||i(bbox2,bbox1.x,bbox1.y2)||i(bbox2,bbox1.x2,bbox1.y2)||i(bbox1,bbox2.x,bbox2.y)||i(bbox1,bbox2.x2,bbox2.y)||i(bbox1,bbox2.x,bbox2.y2)||i(bbox1,bbox2.x2,bbox2.y2)||(bbox1.x<bbox2.x2&&bbox1.x>bbox2.x||bbox2.x<bbox1.x2&&bbox2.x>bbox1.x)&&(bbox1.y<bbox2.y2&&bbox1.y>bbox2.y||bbox2.y<bbox1.y2&&bbox2.y>bbox1.y);};function base3(t,p1,p2,p3,p4){var t1=-3*p1+9*p2-9*p3+3*p4,t2=t*t1+6*p1-12*p2+6*p3;return t*t2-3*p1+3*p2;}
function bezlen(x1,y1,x2,y2,x3,y3,x4,y4,z){if(z==null){z=1;}
z=z>1?1:z<0?0:z;var z2=z/2,n=12,Tvalues=[-0.1252,0.1252,-0.3678,0.3678,-0.5873,0.5873,-0.7699,0.7699,-0.9041,0.9041,-0.9816,0.9816],Cvalues=[0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472],sum=0;for(var i=0;i<n;i++){var ct=z2*Tvalues[i]+z2,xbase=base3(ct,x1,x2,x3,x4),ybase=base3(ct,y1,y2,y3,y4),comb=xbase*xbase+ybase*ybase;sum+=Cvalues[i]*math.sqrt(comb);}
return z2*sum;}
function getTatLen(x1,y1,x2,y2,x3,y3,x4,y4,ll){if(ll<0||bezlen(x1,y1,x2,y2,x3,y3,x4,y4)<ll){return;}
var t=1,step=t/2,t2=t-step,l,e=.01;l=bezlen(x1,y1,x2,y2,x3,y3,x4,y4,t2);while(abs(l-ll)>e){step/=2;t2+=(l<ll?1:-1)*step;l=bezlen(x1,y1,x2,y2,x3,y3,x4,y4,t2);}
return t2;}
function intersect(x1,y1,x2,y2,x3,y3,x4,y4){if(mmax(x1,x2)<mmin(x3,x4)||mmin(x1,x2)>mmax(x3,x4)||mmax(y1,y2)<mmin(y3,y4)||mmin(y1,y2)>mmax(y3,y4)){return;}
var nx=(x1*y2-y1*x2)*(x3-x4)-(x1-x2)*(x3*y4-y3*x4),ny=(x1*y2-y1*x2)*(y3-y4)-(y1-y2)*(x3*y4-y3*x4),denominator=(x1-x2)*(y3-y4)-(y1-y2)*(x3-x4);if(!denominator){return;}
var px=nx/denominator,py=ny/denominator,px2=+px.toFixed(2),py2=+py.toFixed(2);if(px2<+mmin(x1,x2).toFixed(2)||px2>+mmax(x1,x2).toFixed(2)||px2<+mmin(x3,x4).toFixed(2)||px2>+mmax(x3,x4).toFixed(2)||py2<+mmin(y1,y2).toFixed(2)||py2>+mmax(y1,y2).toFixed(2)||py2<+mmin(y3,y4).toFixed(2)||py2>+mmax(y3,y4).toFixed(2)){return;}
return{x:px,y:py};}
function inter(bez1,bez2){return interHelper(bez1,bez2);}
function interCount(bez1,bez2){return interHelper(bez1,bez2,1);}
function interHelper(bez1,bez2,justCount){var bbox1=R.bezierBBox(bez1),bbox2=R.bezierBBox(bez2);if(!R.isBBoxIntersect(bbox1,bbox2)){return justCount?0:[];}
var l1=bezlen.apply(0,bez1),l2=bezlen.apply(0,bez2),n1=mmax(~~(l1/5),1),n2=mmax(~~(l2/5),1),dots1=[],dots2=[],xy={},res=justCount?0:[];for(var i=0;i<n1+1;i++){var p=R.findDotsAtSegment.apply(R,bez1.concat(i/n1));dots1.push({x:p.x,y:p.y,t:i/n1});}
for(i=0;i<n2+1;i++){p=R.findDotsAtSegment.apply(R,bez2.concat(i/n2));dots2.push({x:p.x,y:p.y,t:i/n2});}
for(i=0;i<n1;i++){for(var j=0;j<n2;j++){var di=dots1[i],di1=dots1[i+1],dj=dots2[j],dj1=dots2[j+1],ci=abs(di1.x-di.x)<.001?"y":"x",cj=abs(dj1.x-dj.x)<.001?"y":"x",is=intersect(di.x,di.y,di1.x,di1.y,dj.x,dj.y,dj1.x,dj1.y);if(is){if(xy[is.x.toFixed(4)]==is.y.toFixed(4)){continue;}
xy[is.x.toFixed(4)]=is.y.toFixed(4);var t1=di.t+abs((is[ci]-di[ci])/(di1[ci]-di[ci]))*(di1.t-di.t),t2=dj.t+abs((is[cj]-dj[cj])/(dj1[cj]-dj[cj]))*(dj1.t-dj.t);if(t1>=0&&t1<=1.001&&t2>=0&&t2<=1.001){if(justCount){res++;}else{res.push({x:is.x,y:is.y,t1:mmin(t1,1),t2:mmin(t2,1)});}}}}}
return res;}
R.pathIntersection=function(path1,path2){return interPathHelper(path1,path2);};R.pathIntersectionNumber=function(path1,path2){return interPathHelper(path1,path2,1);};function interPathHelper(path1,path2,justCount){path1=R._path2curve(path1);path2=R._path2curve(path2);var x1,y1,x2,y2,x1m,y1m,x2m,y2m,bez1,bez2,res=justCount?0:[];for(var i=0,ii=path1.length;i<ii;i++){var pi=path1[i];if(pi[0]=="M"){x1=x1m=pi[1];y1=y1m=pi[2];}else{if(pi[0]=="C"){bez1=[x1,y1].concat(pi.slice(1));x1=bez1[6];y1=bez1[7];}else{bez1=[x1,y1,x1,y1,x1m,y1m,x1m,y1m];x1=x1m;y1=y1m;}
for(var j=0,jj=path2.length;j<jj;j++){var pj=path2[j];if(pj[0]=="M"){x2=x2m=pj[1];y2=y2m=pj[2];}else{if(pj[0]=="C"){bez2=[x2,y2].concat(pj.slice(1));x2=bez2[6];y2=bez2[7];}else{bez2=[x2,y2,x2,y2,x2m,y2m,x2m,y2m];x2=x2m;y2=y2m;}
var intr=interHelper(bez1,bez2,justCount);if(justCount){res+=intr;}else{for(var k=0,kk=intr.length;k<kk;k++){intr[k].segment1=i;intr[k].segment2=j;intr[k].bez1=bez1;intr[k].bez2=bez2;}
res=res.concat(intr);}}}}}
return res;}
R.isPointInsidePath=function(path,x,y){var bbox=R.pathBBox(path);return R.isPointInsideBBox(bbox,x,y)&&interPathHelper(path,[["M",x,y],["H",bbox.x2+10]],1)%2==1;};R._removedFactory=function(methodname){return function(){eve("raphael.log",null,"Rapha\xebl: you are calling to method \u201c"+methodname+"\u201d of removed object",methodname);};};var pathDimensions=R.pathBBox=function(path){var pth=paths(path);if(pth.bbox){return clone(pth.bbox);}
if(!path){return{x:0,y:0,width:0,height:0,x2:0,y2:0};}
path=path2curve(path);var x=0,y=0,X=[],Y=[],p;for(var i=0,ii=path.length;i<ii;i++){p=path[i];if(p[0]=="M"){x=p[1];y=p[2];X.push(x);Y.push(y);}else{var dim=curveDim(x,y,p[1],p[2],p[3],p[4],p[5],p[6]);X=X[concat](dim.min.x,dim.max.x);Y=Y[concat](dim.min.y,dim.max.y);x=p[5];y=p[6];}}
var xmin=mmin[apply](0,X),ymin=mmin[apply](0,Y),xmax=mmax[apply](0,X),ymax=mmax[apply](0,Y),width=xmax-xmin,height=ymax-ymin,bb={x:xmin,y:ymin,x2:xmax,y2:ymax,width:width,height:height,cx:xmin+width/2,cy:ymin+height/2};pth.bbox=clone(bb);return bb;},pathClone=function(pathArray){var res=clone(pathArray);res.toString=R._path2string;return res;},pathToRelative=R._pathToRelative=function(pathArray){var pth=paths(pathArray);if(pth.rel){return pathClone(pth.rel);}
if(!R.is(pathArray,array)||!R.is(pathArray&&pathArray[0],array)){pathArray=R.parsePathString(pathArray);}
var res=[],x=0,y=0,mx=0,my=0,start=0;if(pathArray[0][0]=="M"){x=pathArray[0][1];y=pathArray[0][2];mx=x;my=y;start++;res.push(["M",x,y]);}
for(var i=start,ii=pathArray.length;i<ii;i++){var r=res[i]=[],pa=pathArray[i];if(pa[0]!=lowerCase.call(pa[0])){r[0]=lowerCase.call(pa[0]);switch(r[0]){case"a":r[1]=pa[1];r[2]=pa[2];r[3]=pa[3];r[4]=pa[4];r[5]=pa[5];r[6]=+(pa[6]-x).toFixed(3);r[7]=+(pa[7]-y).toFixed(3);break;case"v":r[1]=+(pa[1]-y).toFixed(3);break;case"m":mx=pa[1];my=pa[2];default:for(var j=1,jj=pa.length;j<jj;j++){r[j]=+(pa[j]-((j%2)?x:y)).toFixed(3);}}}else{r=res[i]=[];if(pa[0]=="m"){mx=pa[1]+x;my=pa[2]+y;}
for(var k=0,kk=pa.length;k<kk;k++){res[i][k]=pa[k];}}
var len=res[i].length;switch(res[i][0]){case"z":x=mx;y=my;break;case"h":x+=+res[i][len-1];break;case"v":y+=+res[i][len-1];break;default:x+=+res[i][len-2];y+=+res[i][len-1];}}
res.toString=R._path2string;pth.rel=pathClone(res);return res;},pathToAbsolute=R._pathToAbsolute=function(pathArray){var pth=paths(pathArray);if(pth.abs){return pathClone(pth.abs);}
if(!R.is(pathArray,array)||!R.is(pathArray&&pathArray[0],array)){pathArray=R.parsePathString(pathArray);}
if(!pathArray||!pathArray.length){return[["M",0,0]];}
var res=[],x=0,y=0,mx=0,my=0,start=0;if(pathArray[0][0]=="M"){x=+pathArray[0][1];y=+pathArray[0][2];mx=x;my=y;start++;res[0]=["M",x,y];}
var crz=pathArray.length==3&&pathArray[0][0]=="M"&&pathArray[1][0].toUpperCase()=="R"&&pathArray[2][0].toUpperCase()=="Z";for(var r,pa,i=start,ii=pathArray.length;i<ii;i++){res.push(r=[]);pa=pathArray[i];if(pa[0]!=upperCase.call(pa[0])){r[0]=upperCase.call(pa[0]);switch(r[0]){case"A":r[1]=pa[1];r[2]=pa[2];r[3]=pa[3];r[4]=pa[4];r[5]=pa[5];r[6]=+(pa[6]+x);r[7]=+(pa[7]+y);break;case"V":r[1]=+pa[1]+y;break;case"H":r[1]=+pa[1]+x;break;case"R":var dots=[x,y][concat](pa.slice(1));for(var j=2,jj=dots.length;j<jj;j++){dots[j]=+dots[j]+x;dots[++j]=+dots[j]+y;}
res.pop();res=res[concat](catmullRom2bezier(dots,crz));break;case"M":mx=+pa[1]+x;my=+pa[2]+y;default:for(j=1,jj=pa.length;j<jj;j++){r[j]=+pa[j]+((j%2)?x:y);}}}else if(pa[0]=="R"){dots=[x,y][concat](pa.slice(1));res.pop();res=res[concat](catmullRom2bezier(dots,crz));r=["R"][concat](pa.slice(-2));}else{for(var k=0,kk=pa.length;k<kk;k++){r[k]=pa[k];}}
switch(r[0]){case"Z":x=mx;y=my;break;case"H":x=r[1];break;case"V":y=r[1];break;case"M":mx=r[r.length-2];my=r[r.length-1];default:x=r[r.length-2];y=r[r.length-1];}}
res.toString=R._path2string;pth.abs=pathClone(res);return res;},l2c=function(x1,y1,x2,y2){return[x1,y1,x2,y2,x2,y2];},q2c=function(x1,y1,ax,ay,x2,y2){var _13=1/3,_23=2/3;return[_13*x1+_23*ax,_13*y1+_23*ay,_13*x2+_23*ax,_13*y2+_23*ay,x2,y2];},a2c=function(x1,y1,rx,ry,angle,large_arc_flag,sweep_flag,x2,y2,recursive){var _120=PI*120/180,rad=PI/180*(+angle||0),res=[],xy,rotate=cacher(function(x,y,rad){var X=x*math.cos(rad)-y*math.sin(rad),Y=x*math.sin(rad)+y*math.cos(rad);return{x:X,y:Y};});if(!recursive){xy=rotate(x1,y1,-rad);x1=xy.x;y1=xy.y;xy=rotate(x2,y2,-rad);x2=xy.x;y2=xy.y;var cos=math.cos(PI/180*angle),sin=math.sin(PI/180*angle),x=(x1-x2)/2,y=(y1-y2)/2;var h=(x*x)/(rx*rx)+(y*y)/(ry*ry);if(h>1){h=math.sqrt(h);rx=h*rx;ry=h*ry;}
var rx2=rx*rx,ry2=ry*ry,k=(large_arc_flag==sweep_flag?-1:1)*math.sqrt(abs((rx2*ry2-rx2*y*y-ry2*x*x)/(rx2*y*y+ry2*x*x))),cx=k*rx*y/ry+(x1+x2)/2,cy=k*-ry*x/rx+(y1+y2)/2,f1=math.asin(((y1-cy)/ry).toFixed(9)),f2=math.asin(((y2-cy)/ry).toFixed(9));f1=x1<cx?PI-f1:f1;f2=x2<cx?PI-f2:f2;f1<0&&(f1=PI*2+f1);f2<0&&(f2=PI*2+f2);if(sweep_flag&&f1>f2){f1=f1-PI*2;}
if(!sweep_flag&&f2>f1){f2=f2-PI*2;}}else{f1=recursive[0];f2=recursive[1];cx=recursive[2];cy=recursive[3];}
var df=f2-f1;if(abs(df)>_120){var f2old=f2,x2old=x2,y2old=y2;f2=f1+_120*(sweep_flag&&f2>f1?1:-1);x2=cx+rx*math.cos(f2);y2=cy+ry*math.sin(f2);res=a2c(x2,y2,rx,ry,angle,0,sweep_flag,x2old,y2old,[f2,f2old,cx,cy]);}
df=f2-f1;var c1=math.cos(f1),s1=math.sin(f1),c2=math.cos(f2),s2=math.sin(f2),t=math.tan(df/4),hx=4/3*rx*t,hy=4/3*ry*t,m1=[x1,y1],m2=[x1+hx*s1,y1-hy*c1],m3=[x2+hx*s2,y2-hy*c2],m4=[x2,y2];m2[0]=2*m1[0]-m2[0];m2[1]=2*m1[1]-m2[1];if(recursive){return[m2,m3,m4][concat](res);}else{res=[m2,m3,m4][concat](res).join()[split](",");var newres=[];for(var i=0,ii=res.length;i<ii;i++){newres[i]=i%2?rotate(res[i-1],res[i],rad).y:rotate(res[i],res[i+1],rad).x;}
return newres;}},findDotAtSegment=function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t){var t1=1-t;return{x:pow(t1,3)*p1x+pow(t1,2)*3*t*c1x+t1*3*t*t*c2x+pow(t,3)*p2x,y:pow(t1,3)*p1y+pow(t1,2)*3*t*c1y+t1*3*t*t*c2y+pow(t,3)*p2y};},curveDim=cacher(function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y){var a=(c2x-2*c1x+p1x)-(p2x-2*c2x+c1x),b=2*(c1x-p1x)-2*(c2x-c1x),c=p1x-c1x,t1=(-b+math.sqrt(b*b-4*a*c))/2/a,t2=(-b-math.sqrt(b*b-4*a*c))/2/a,y=[p1y,p2y],x=[p1x,p2x],dot;abs(t1)>"1e12"&&(t1=.5);abs(t2)>"1e12"&&(t2=.5);if(t1>0&&t1<1){dot=findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t1);x.push(dot.x);y.push(dot.y);}
if(t2>0&&t2<1){dot=findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t2);x.push(dot.x);y.push(dot.y);}
a=(c2y-2*c1y+p1y)-(p2y-2*c2y+c1y);b=2*(c1y-p1y)-2*(c2y-c1y);c=p1y-c1y;t1=(-b+math.sqrt(b*b-4*a*c))/2/a;t2=(-b-math.sqrt(b*b-4*a*c))/2/a;abs(t1)>"1e12"&&(t1=.5);abs(t2)>"1e12"&&(t2=.5);if(t1>0&&t1<1){dot=findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t1);x.push(dot.x);y.push(dot.y);}
if(t2>0&&t2<1){dot=findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t2);x.push(dot.x);y.push(dot.y);}
return{min:{x:mmin[apply](0,x),y:mmin[apply](0,y)},max:{x:mmax[apply](0,x),y:mmax[apply](0,y)}};}),path2curve=R._path2curve=cacher(function(path,path2){var pth=!path2&&paths(path);if(!path2&&pth.curve){return pathClone(pth.curve);}
var p=pathToAbsolute(path),p2=path2&&pathToAbsolute(path2),attrs={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},attrs2={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},processPath=function(path,d,pcom){var nx,ny,tq={T:1,Q:1};if(!path){return["C",d.x,d.y,d.x,d.y,d.x,d.y];}
!(path[0]in tq)&&(d.qx=d.qy=null);switch(path[0]){case"M":d.X=path[1];d.Y=path[2];break;case"A":path=["C"][concat](a2c[apply](0,[d.x,d.y][concat](path.slice(1))));break;case"S":if(pcom=="C"||pcom=="S"){nx=d.x*2-d.bx;ny=d.y*2-d.by;}
else{nx=d.x;ny=d.y;}
path=["C",nx,ny][concat](path.slice(1));break;case"T":if(pcom=="Q"||pcom=="T"){d.qx=d.x*2-d.qx;d.qy=d.y*2-d.qy;}
else{d.qx=d.x;d.qy=d.y;}
path=["C"][concat](q2c(d.x,d.y,d.qx,d.qy,path[1],path[2]));break;case"Q":d.qx=path[1];d.qy=path[2];path=["C"][concat](q2c(d.x,d.y,path[1],path[2],path[3],path[4]));break;case"L":path=["C"][concat](l2c(d.x,d.y,path[1],path[2]));break;case"H":path=["C"][concat](l2c(d.x,d.y,path[1],d.y));break;case"V":path=["C"][concat](l2c(d.x,d.y,d.x,path[1]));break;case"Z":path=["C"][concat](l2c(d.x,d.y,d.X,d.Y));break;}
return path;},fixArc=function(pp,i){if(pp[i].length>7){pp[i].shift();var pi=pp[i];while(pi.length){pp.splice(i++,0,["C"][concat](pi.splice(0,6)));}
pp.splice(i,1);ii=mmax(p.length,p2&&p2.length||0);}},fixM=function(path1,path2,a1,a2,i){if(path1&&path2&&path1[i][0]=="M"&&path2[i][0]!="M"){path2.splice(i,0,["M",a2.x,a2.y]);a1.bx=0;a1.by=0;a1.x=path1[i][1];a1.y=path1[i][2];ii=mmax(p.length,p2&&p2.length||0);}};for(var i=0,ii=mmax(p.length,p2&&p2.length||0);i<ii;i++){p[i]=processPath(p[i],attrs);fixArc(p,i);p2&&(p2[i]=processPath(p2[i],attrs2));p2&&fixArc(p2,i);fixM(p,p2,attrs,attrs2,i);fixM(p2,p,attrs2,attrs,i);var seg=p[i],seg2=p2&&p2[i],seglen=seg.length,seg2len=p2&&seg2.length;attrs.x=seg[seglen-2];attrs.y=seg[seglen-1];attrs.bx=toFloat(seg[seglen-4])||attrs.x;attrs.by=toFloat(seg[seglen-3])||attrs.y;attrs2.bx=p2&&(toFloat(seg2[seg2len-4])||attrs2.x);attrs2.by=p2&&(toFloat(seg2[seg2len-3])||attrs2.y);attrs2.x=p2&&seg2[seg2len-2];attrs2.y=p2&&seg2[seg2len-1];}
if(!p2){pth.curve=pathClone(p);}
return p2?[p,p2]:p;},null,pathClone),parseDots=R._parseDots=cacher(function(gradient){var dots=[];for(var i=0,ii=gradient.length;i<ii;i++){var dot={},par=gradient[i].match(/^([^:]*):?([\d\.]*)/);dot.color=R.getRGB(par[1]);if(dot.color.error){return null;}
dot.color=dot.color.hex;par[2]&&(dot.offset=par[2]+"%");dots.push(dot);}
for(i=1,ii=dots.length-1;i<ii;i++){if(!dots[i].offset){var start=toFloat(dots[i-1].offset||0),end=0;for(var j=i+1;j<ii;j++){if(dots[j].offset){end=dots[j].offset;break;}}
if(!end){end=100;j=ii;}
end=toFloat(end);var d=(end-start)/(j-i+1);for(;i<j;i++){start+=d;dots[i].offset=start+"%";}}}
return dots;}),tear=R._tear=function(el,paper){el==paper.top&&(paper.top=el.prev);el==paper.bottom&&(paper.bottom=el.next);el.next&&(el.next.prev=el.prev);el.prev&&(el.prev.next=el.next);},tofront=R._tofront=function(el,paper){if(paper.top===el){return;}
tear(el,paper);el.next=null;el.prev=paper.top;paper.top.next=el;paper.top=el;},toback=R._toback=function(el,paper){if(paper.bottom===el){return;}
tear(el,paper);el.next=paper.bottom;el.prev=null;paper.bottom.prev=el;paper.bottom=el;},insertafter=R._insertafter=function(el,el2,paper){tear(el,paper);el2==paper.top&&(paper.top=el);el2.next&&(el2.next.prev=el);el.next=el2.next;el.prev=el2;el2.next=el;},insertbefore=R._insertbefore=function(el,el2,paper){tear(el,paper);el2==paper.bottom&&(paper.bottom=el);el2.prev&&(el2.prev.next=el);el.prev=el2.prev;el2.prev=el;el.next=el2;},toMatrix=R.toMatrix=function(path,transform){var bb=pathDimensions(path),el={_:{transform:E},getBBox:function(){return bb;}};extractTransform(el,transform);return el.matrix;},transformPath=R.transformPath=function(path,transform){return mapPath(path,toMatrix(path,transform));},extractTransform=R._extractTransform=function(el,tstr){if(tstr==null){return el._.transform;}
tstr=Str(tstr).replace(/\.{3}|\u2026/g,el._.transform||E);var tdata=R.parseTransformString(tstr),deg=0,dx=0,dy=0,sx=1,sy=1,_=el._,m=new Matrix;_.transform=tdata||[];if(tdata){for(var i=0,ii=tdata.length;i<ii;i++){var t=tdata[i],tlen=t.length,command=Str(t[0]).toLowerCase(),absolute=t[0]!=command,inver=absolute?m.invert():0,x1,y1,x2,y2,bb;if(command=="t"&&tlen==3){if(absolute){x1=inver.x(0,0);y1=inver.y(0,0);x2=inver.x(t[1],t[2]);y2=inver.y(t[1],t[2]);m.translate(x2-x1,y2-y1);}else{m.translate(t[1],t[2]);}}else if(command=="r"){if(tlen==2){bb=bb||el.getBBox(1);m.rotate(t[1],bb.x+bb.width/2,bb.y+bb.height/2);deg+=t[1];}else if(tlen==4){if(absolute){x2=inver.x(t[2],t[3]);y2=inver.y(t[2],t[3]);m.rotate(t[1],x2,y2);}else{m.rotate(t[1],t[2],t[3]);}
deg+=t[1];}}else if(command=="s"){if(tlen==2||tlen==3){bb=bb||el.getBBox(1);m.scale(t[1],t[tlen-1],bb.x+bb.width/2,bb.y+bb.height/2);sx*=t[1];sy*=t[tlen-1];}else if(tlen==5){if(absolute){x2=inver.x(t[3],t[4]);y2=inver.y(t[3],t[4]);m.scale(t[1],t[2],x2,y2);}else{m.scale(t[1],t[2],t[3],t[4]);}
sx*=t[1];sy*=t[2];}}else if(command=="m"&&tlen==7){m.add(t[1],t[2],t[3],t[4],t[5],t[6]);}
_.dirtyT=1;el.matrix=m;}}
el.matrix=m;_.sx=sx;_.sy=sy;_.deg=deg;_.dx=dx=m.e;_.dy=dy=m.f;if(sx==1&&sy==1&&!deg&&_.bbox){_.bbox.x+=+dx;_.bbox.y+=+dy;}else{_.dirtyT=1;}},getEmpty=function(item){var l=item[0];switch(l.toLowerCase()){case"t":return[l,0,0];case"m":return[l,1,0,0,1,0,0];case"r":if(item.length==4){return[l,0,item[2],item[3]];}else{return[l,0];}
case"s":if(item.length==5){return[l,1,1,item[3],item[4]];}else if(item.length==3){return[l,1,1];}else{return[l,1];}}},equaliseTransform=R._equaliseTransform=function(t1,t2){t2=Str(t2).replace(/\.{3}|\u2026/g,t1);t1=R.parseTransformString(t1)||[];t2=R.parseTransformString(t2)||[];var maxlength=mmax(t1.length,t2.length),from=[],to=[],i=0,j,jj,tt1,tt2;for(;i<maxlength;i++){tt1=t1[i]||getEmpty(t2[i]);tt2=t2[i]||getEmpty(tt1);if((tt1[0]!=tt2[0])||(tt1[0].toLowerCase()=="r"&&(tt1[2]!=tt2[2]||tt1[3]!=tt2[3]))||(tt1[0].toLowerCase()=="s"&&(tt1[3]!=tt2[3]||tt1[4]!=tt2[4]))){return;}
from[i]=[];to[i]=[];for(j=0,jj=mmax(tt1.length,tt2.length);j<jj;j++){j in tt1&&(from[i][j]=tt1[j]);j in tt2&&(to[i][j]=tt2[j]);}}
return{from:from,to:to};};R._getContainer=function(x,y,w,h){var container;container=h==null&&!R.is(x,"object")?g.doc.getElementById(x):x;if(container==null){return;}
if(container.tagName){if(y==null){return{container:container,width:container.style.pixelWidth||container.offsetWidth,height:container.style.pixelHeight||container.offsetHeight};}else{return{container:container,width:y,height:w};}}
return{container:1,x:x,y:y,width:w,height:h};};R.pathToRelative=pathToRelative;R._engine={};R.path2curve=path2curve;R.matrix=function(a,b,c,d,e,f){return new Matrix(a,b,c,d,e,f);};function Matrix(a,b,c,d,e,f){if(a!=null){this.a=+a;this.b=+b;this.c=+c;this.d=+d;this.e=+e;this.f=+f;}else{this.a=1;this.b=0;this.c=0;this.d=1;this.e=0;this.f=0;}}
(function(matrixproto){matrixproto.add=function(a,b,c,d,e,f){var out=[[],[],[]],m=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],matrix=[[a,c,e],[b,d,f],[0,0,1]],x,y,z,res;if(a&&a instanceof Matrix){matrix=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1]];}
for(x=0;x<3;x++){for(y=0;y<3;y++){res=0;for(z=0;z<3;z++){res+=m[x][z]*matrix[z][y];}
out[x][y]=res;}}
this.a=out[0][0];this.b=out[1][0];this.c=out[0][1];this.d=out[1][1];this.e=out[0][2];this.f=out[1][2];};matrixproto.invert=function(){var me=this,x=me.a*me.d-me.b*me.c;return new Matrix(me.d/x,-me.b/x,-me.c/x,me.a/x,(me.c*me.f-me.d*me.e)/x,(me.b*me.e-me.a*me.f)/x);};matrixproto.clone=function(){return new Matrix(this.a,this.b,this.c,this.d,this.e,this.f);};matrixproto.translate=function(x,y){this.add(1,0,0,1,x,y);};matrixproto.scale=function(x,y,cx,cy){y==null&&(y=x);(cx||cy)&&this.add(1,0,0,1,cx,cy);this.add(x,0,0,y,0,0);(cx||cy)&&this.add(1,0,0,1,-cx,-cy);};matrixproto.rotate=function(a,x,y){a=R.rad(a);x=x||0;y=y||0;var cos=+math.cos(a).toFixed(9),sin=+math.sin(a).toFixed(9);this.add(cos,sin,-sin,cos,x,y);this.add(1,0,0,1,-x,-y);};matrixproto.x=function(x,y){return x*this.a+y*this.c+this.e;};matrixproto.y=function(x,y){return x*this.b+y*this.d+this.f;};matrixproto.get=function(i){return+this[Str.fromCharCode(97+i)].toFixed(4);};matrixproto.toString=function(){return R.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join();};matrixproto.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')";};matrixproto.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)];};function norm(a){return a[0]*a[0]+a[1]*a[1];}
function normalize(a){var mag=math.sqrt(norm(a));a[0]&&(a[0]/=mag);a[1]&&(a[1]/=mag);}
matrixproto.split=function(){var out={};out.dx=this.e;out.dy=this.f;var row=[[this.a,this.c],[this.b,this.d]];out.scalex=math.sqrt(norm(row[0]));normalize(row[0]);out.shear=row[0][0]*row[1][0]+row[0][1]*row[1][1];row[1]=[row[1][0]-row[0][0]*out.shear,row[1][1]-row[0][1]*out.shear];out.scaley=math.sqrt(norm(row[1]));normalize(row[1]);out.shear/=out.scaley;var sin=-row[0][1],cos=row[1][1];if(cos<0){out.rotate=R.deg(math.acos(cos));if(sin<0){out.rotate=360-out.rotate;}}else{out.rotate=R.deg(math.asin(sin));}
out.isSimple=!+out.shear.toFixed(9)&&(out.scalex.toFixed(9)==out.scaley.toFixed(9)||!out.rotate);out.isSuperSimple=!+out.shear.toFixed(9)&&out.scalex.toFixed(9)==out.scaley.toFixed(9)&&!out.rotate;out.noRotation=!+out.shear.toFixed(9)&&!out.rotate;return out;};matrixproto.toTransformString=function(shorter){var s=shorter||this[split]();if(s.isSimple){s.scalex=+s.scalex.toFixed(4);s.scaley=+s.scaley.toFixed(4);s.rotate=+s.rotate.toFixed(4);return(s.dx||s.dy?"t"+[s.dx,s.dy]:E)+
(s.scalex!=1||s.scaley!=1?"s"+[s.scalex,s.scaley,0,0]:E)+
(s.rotate?"r"+[s.rotate,0,0]:E);}else{return"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)];}};})(Matrix.prototype);var version=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);if((navigator.vendor=="Apple Computer, Inc.")&&(version&&version[1]<4||navigator.platform.slice(0,2)=="iP")||(navigator.vendor=="Google Inc."&&version&&version[1]<8)){paperproto.safari=function(){var rect=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){rect.remove();});};}else{paperproto.safari=fun;}
var preventDefault=function(){this.returnValue=false;},preventTouch=function(){return this.originalEvent.preventDefault();},stopPropagation=function(){this.cancelBubble=true;},stopTouch=function(){return this.originalEvent.stopPropagation();},getEventPosition=function(e){var scrollY=g.doc.documentElement.scrollTop||g.doc.body.scrollTop,scrollX=g.doc.documentElement.scrollLeft||g.doc.body.scrollLeft;return{x:e.clientX+scrollX,y:e.clientY+scrollY};},addEvent=(function(){if(g.doc.addEventListener){return function(obj,type,fn,element){var f=function(e){var pos=getEventPosition(e);return fn.call(element,e,pos.x,pos.y);};obj.addEventListener(type,f,false);if(supportsTouch&&touchMap[type]){var _f=function(e){var pos=getEventPosition(e),olde=e;for(var i=0,ii=e.targetTouches&&e.targetTouches.length;i<ii;i++){if(e.targetTouches[i].target==obj){e=e.targetTouches[i];e.originalEvent=olde;e.preventDefault=preventTouch;e.stopPropagation=stopTouch;break;}}
return fn.call(element,e,pos.x,pos.y);};obj.addEventListener(touchMap[type],_f,false);}
return function(){obj.removeEventListener(type,f,false);if(supportsTouch&&touchMap[type])
obj.removeEventListener(touchMap[type],f,false);return true;};};}else if(g.doc.attachEvent){return function(obj,type,fn,element){var f=function(e){e=e||g.win.event;var scrollY=g.doc.documentElement.scrollTop||g.doc.body.scrollTop,scrollX=g.doc.documentElement.scrollLeft||g.doc.body.scrollLeft,x=e.clientX+scrollX,y=e.clientY+scrollY;e.preventDefault=e.preventDefault||preventDefault;e.stopPropagation=e.stopPropagation||stopPropagation;return fn.call(element,e,x,y);};obj.attachEvent("on"+type,f);var detacher=function(){obj.detachEvent("on"+type,f);return true;};return detacher;};}})(),drag=[],dragMove=function(e){var x=e.clientX,y=e.clientY,scrollY=g.doc.documentElement.scrollTop||g.doc.body.scrollTop,scrollX=g.doc.documentElement.scrollLeft||g.doc.body.scrollLeft,dragi,j=drag.length;while(j--){dragi=drag[j];if(supportsTouch&&e.touches){var i=e.touches.length,touch;while(i--){touch=e.touches[i];if(touch.identifier==dragi.el._drag.id){x=touch.clientX;y=touch.clientY;(e.originalEvent?e.originalEvent:e).preventDefault();break;}}}else{e.preventDefault();}
var node=dragi.el.node,o,next=node.nextSibling,parent=node.parentNode,display=node.style.display;g.win.opera&&parent.removeChild(node);node.style.display="none";o=dragi.el.paper.getElementByPoint(x,y);node.style.display=display;g.win.opera&&(next?parent.insertBefore(node,next):parent.appendChild(node));o&&eve("raphael.drag.over."+dragi.el.id,dragi.el,o);x+=scrollX;y+=scrollY;eve("raphael.drag.move."+dragi.el.id,dragi.move_scope||dragi.el,x-dragi.el._drag.x,y-dragi.el._drag.y,x,y,e);}},dragUp=function(e){R.unmousemove(dragMove).unmouseup(dragUp);var i=drag.length,dragi;while(i--){dragi=drag[i];dragi.el._drag={};eve("raphael.drag.end."+dragi.el.id,dragi.end_scope||dragi.start_scope||dragi.move_scope||dragi.el,e);}
drag=[];},elproto=R.el={};for(var i=events.length;i--;){(function(eventName){R[eventName]=elproto[eventName]=function(fn,scope){if(R.is(fn,"function")){this.events=this.events||[];this.events.push({name:eventName,f:fn,unbind:addEvent(this.shape||this.node||g.doc,eventName,fn,scope||this)});}
return this;};R["un"+eventName]=elproto["un"+eventName]=function(fn){var events=this.events||[],l=events.length;while(l--){if(events[l].name==eventName&&(R.is(fn,"undefined")||events[l].f==fn)){events[l].unbind();events.splice(l,1);!events.length&&delete this.events;}}
return this;};})(events[i]);}
elproto.data=function(key,value){var data=eldata[this.id]=eldata[this.id]||{};if(arguments.length==0){return data;}
if(arguments.length==1){if(R.is(key,"object")){for(var i in key)if(key[has](i)){this.data(i,key[i]);}
return this;}
eve("raphael.data.get."+this.id,this,data[key],key);return data[key];}
data[key]=value;eve("raphael.data.set."+this.id,this,value,key);return this;};elproto.removeData=function(key){if(key==null){eldata[this.id]={};}else{eldata[this.id]&&delete eldata[this.id][key];}
return this;};elproto.getData=function(){return clone(eldata[this.id]||{});};elproto.hover=function(f_in,f_out,scope_in,scope_out){return this.mouseover(f_in,scope_in).mouseout(f_out,scope_out||scope_in);};elproto.unhover=function(f_in,f_out){return this.unmouseover(f_in).unmouseout(f_out);};var draggable=[];elproto.drag=function(onmove,onstart,onend,move_scope,start_scope,end_scope){function start(e){(e.originalEvent||e).preventDefault();var x=e.clientX,y=e.clientY,scrollY=g.doc.documentElement.scrollTop||g.doc.body.scrollTop,scrollX=g.doc.documentElement.scrollLeft||g.doc.body.scrollLeft;this._drag.id=e.identifier;if(supportsTouch&&e.touches){var i=e.touches.length,touch;while(i--){touch=e.touches[i];this._drag.id=touch.identifier;if(touch.identifier==this._drag.id){x=touch.clientX;y=touch.clientY;break;}}}
this._drag.x=x+scrollX;this._drag.y=y+scrollY;!drag.length&&R.mousemove(dragMove).mouseup(dragUp);drag.push({el:this,move_scope:move_scope,start_scope:start_scope,end_scope:end_scope});onstart&&eve.on("raphael.drag.start."+this.id,onstart);onmove&&eve.on("raphael.drag.move."+this.id,onmove);onend&&eve.on("raphael.drag.end."+this.id,onend);eve("raphael.drag.start."+this.id,start_scope||move_scope||this,e.clientX+scrollX,e.clientY+scrollY,e);}
this._drag={};draggable.push({el:this,start:start});this.mousedown(start);return this;};elproto.onDragOver=function(f){f?eve.on("raphael.drag.over."+this.id,f):eve.unbind("raphael.drag.over."+this.id);};elproto.undrag=function(){var i=draggable.length;while(i--)if(draggable[i].el==this){this.unmousedown(draggable[i].start);draggable.splice(i,1);eve.unbind("raphael.drag.*."+this.id);}
!draggable.length&&R.unmousemove(dragMove).unmouseup(dragUp);drag=[];};paperproto.circle=function(x,y,r){var out=R._engine.circle(this,x||0,y||0,r||0);this.__set__&&this.__set__.push(out);return out;};paperproto.rect=function(x,y,w,h,r){var out=R._engine.rect(this,x||0,y||0,w||0,h||0,r||0);this.__set__&&this.__set__.push(out);return out;};paperproto.ellipse=function(x,y,rx,ry){var out=R._engine.ellipse(this,x||0,y||0,rx||0,ry||0);this.__set__&&this.__set__.push(out);return out;};paperproto.path=function(pathString){pathString&&!R.is(pathString,string)&&!R.is(pathString[0],array)&&(pathString+=E);var out=R._engine.path(R.format[apply](R,arguments),this);this.__set__&&this.__set__.push(out);return out;};paperproto.image=function(src,x,y,w,h){var out=R._engine.image(this,src||"about:blank",x||0,y||0,w||0,h||0);this.__set__&&this.__set__.push(out);return out;};paperproto.text=function(x,y,text){var out=R._engine.text(this,x||0,y||0,Str(text));this.__set__&&this.__set__.push(out);return out;};paperproto.set=function(itemsArray){!R.is(itemsArray,"array")&&(itemsArray=Array.prototype.splice.call(arguments,0,arguments.length));var out=new Set(itemsArray);this.__set__&&this.__set__.push(out);out["paper"]=this;out["type"]="set";return out;};paperproto.setStart=function(set){this.__set__=set||this.set();};paperproto.setFinish=function(set){var out=this.__set__;delete this.__set__;return out;};paperproto.setSize=function(width,height){return R._engine.setSize.call(this,width,height);};paperproto.setViewBox=function(x,y,w,h,fit){return R._engine.setViewBox.call(this,x,y,w,h,fit);};paperproto.top=paperproto.bottom=null;paperproto.raphael=R;var getOffset=function(elem){var box=elem.getBoundingClientRect(),doc=elem.ownerDocument,body=doc.body,docElem=doc.documentElement,clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,top=box.top+(g.win.pageYOffset||docElem.scrollTop||body.scrollTop)-clientTop,left=box.left+(g.win.pageXOffset||docElem.scrollLeft||body.scrollLeft)-clientLeft;return{y:top,x:left};};paperproto.getElementByPoint=function(x,y){var paper=this,svg=paper.canvas,target=g.doc.elementFromPoint(x,y);if(g.win.opera&&target.tagName=="svg"){var so=getOffset(svg),sr=svg.createSVGRect();sr.x=x-so.x;sr.y=y-so.y;sr.width=sr.height=1;var hits=svg.getIntersectionList(sr,null);if(hits.length){target=hits[hits.length-1];}}
if(!target){return null;}
while(target.parentNode&&target!=svg.parentNode&&!target.raphael){target=target.parentNode;}
target==paper.canvas.parentNode&&(target=svg);target=target&&target.raphael?paper.getById(target.raphaelid):null;return target;};paperproto.getElementsByBBox=function(bbox){var set=this.set();this.forEach(function(el){if(R.isBBoxIntersect(el.getBBox(),bbox)){set.push(el);}});return set;};paperproto.getById=function(id){var bot=this.bottom;while(bot){if(bot.id==id){return bot;}
bot=bot.next;}
return null;};paperproto.forEach=function(callback,thisArg){var bot=this.bottom;while(bot){if(callback.call(thisArg,bot)===false){return this;}
bot=bot.next;}
return this;};paperproto.getElementsByPoint=function(x,y){var set=this.set();this.forEach(function(el){if(el.isPointInside(x,y)){set.push(el);}});return set;};function x_y(){return this.x+S+this.y;}
function x_y_w_h(){return this.x+S+this.y+S+this.width+" \xd7 "+this.height;}
elproto.isPointInside=function(x,y){var rp=this.realPath=getPath[this.type](this);if(this.attr('transform')&&this.attr('transform').length){rp=R.transformPath(rp,this.attr('transform'));}
return R.isPointInsidePath(rp,x,y);};elproto.getBBox=function(isWithoutTransform){if(this.removed){return{};}
var _=this._;if(isWithoutTransform){if(_.dirty||!_.bboxwt){this.realPath=getPath[this.type](this);_.bboxwt=pathDimensions(this.realPath);_.bboxwt.toString=x_y_w_h;_.dirty=0;}
return _.bboxwt;}
if(_.dirty||_.dirtyT||!_.bbox){if(_.dirty||!this.realPath){_.bboxwt=0;this.realPath=getPath[this.type](this);}
_.bbox=pathDimensions(mapPath(this.realPath,this.matrix));_.bbox.toString=x_y_w_h;_.dirty=_.dirtyT=0;}
return _.bbox;};elproto.clone=function(){if(this.removed){return null;}
var out=this.paper[this.type]().attr(this.attr());this.__set__&&this.__set__.push(out);return out;};elproto.glow=function(glow){if(this.type=="text"){return null;}
glow=glow||{};var s={width:(glow.width||10)+(+this.attr("stroke-width")||1),fill:glow.fill||false,opacity:glow.opacity||.5,offsetx:glow.offsetx||0,offsety:glow.offsety||0,color:glow.color||"#000"},c=s.width/2,r=this.paper,out=r.set(),path=this.realPath||getPath[this.type](this);path=this.matrix?mapPath(path,this.matrix):path;for(var i=1;i<c+1;i++){out.push(r.path(path).attr({stroke:s.color,fill:s.fill?s.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(s.width/c*i).toFixed(3),opacity:+(s.opacity/c).toFixed(3)}));}
return out.insertBefore(this).translate(s.offsetx,s.offsety);};var curveslengths={},getPointAtSegmentLength=function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,length){if(length==null){return bezlen(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y);}else{return R.findDotsAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,getTatLen(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,length));}},getLengthFactory=function(istotal,subpath){return function(path,length,onlystart){path=path2curve(path);var x,y,p,l,sp="",subpaths={},point,len=0;for(var i=0,ii=path.length;i<ii;i++){p=path[i];if(p[0]=="M"){x=+p[1];y=+p[2];}else{l=getPointAtSegmentLength(x,y,p[1],p[2],p[3],p[4],p[5],p[6]);if(len+l>length){if(subpath&&!subpaths.start){point=getPointAtSegmentLength(x,y,p[1],p[2],p[3],p[4],p[5],p[6],length-len);sp+=["C"+point.start.x,point.start.y,point.m.x,point.m.y,point.x,point.y];if(onlystart){return sp;}
subpaths.start=sp;sp=["M"+point.x,point.y+"C"+point.n.x,point.n.y,point.end.x,point.end.y,p[5],p[6]].join();len+=l;x=+p[5];y=+p[6];continue;}
if(!istotal&&!subpath){point=getPointAtSegmentLength(x,y,p[1],p[2],p[3],p[4],p[5],p[6],length-len);return{x:point.x,y:point.y,alpha:point.alpha};}}
len+=l;x=+p[5];y=+p[6];}
sp+=p.shift()+p;}
subpaths.end=sp;point=istotal?len:subpath?subpaths:R.findDotsAtSegment(x,y,p[0],p[1],p[2],p[3],p[4],p[5],1);point.alpha&&(point={x:point.x,y:point.y,alpha:point.alpha});return point;};};var getTotalLength=getLengthFactory(1),getPointAtLength=getLengthFactory(),getSubpathsAtLength=getLengthFactory(0,1);R.getTotalLength=getTotalLength;R.getPointAtLength=getPointAtLength;R.getSubpath=function(path,from,to){if(this.getTotalLength(path)-to<1e-6){return getSubpathsAtLength(path,from).end;}
var a=getSubpathsAtLength(path,to,1);return from?getSubpathsAtLength(a,from).end:a;};elproto.getTotalLength=function(){var path=this.getPath();if(!path){return;}
if(this.node.getTotalLength){return this.node.getTotalLength();}
return getTotalLength(path);};elproto.getPointAtLength=function(length){var path=this.getPath();if(!path){return;}
return getPointAtLength(path,length);};elproto.getPath=function(){var path,getPath=R._getPath[this.type];if(this.type=="text"||this.type=="set"){return;}
if(getPath){path=getPath(this);}
return path;};elproto.getSubpath=function(from,to){var path=this.getPath();if(!path){return;}
return R.getSubpath(path,from,to);};var ef=R.easing_formulas={linear:function(n){return n;},"<":function(n){return pow(n,1.7);},">":function(n){return pow(n,.48);},"<>":function(n){var q=.48-n/1.04,Q=math.sqrt(.1734+q*q),x=Q-q,X=pow(abs(x),1/3)*(x<0?-1:1),y=-Q-q,Y=pow(abs(y),1/3)*(y<0?-1:1),t=X+Y+.5;return(1-t)*3*t*t+t*t*t;},backIn:function(n){var s=1.70158;return n*n*((s+1)*n-s);},backOut:function(n){n=n-1;var s=1.70158;return n*n*((s+1)*n+s)+1;},elastic:function(n){if(n==!!n){return n;}
return pow(2,-10*n)*math.sin((n-.075)*(2*PI)/.3)+1;},bounce:function(n){var s=7.5625,p=2.75,l;if(n<(1/p)){l=s*n*n;}else{if(n<(2/p)){n-=(1.5/p);l=s*n*n+.75;}else{if(n<(2.5/p)){n-=(2.25/p);l=s*n*n+.9375;}else{n-=(2.625/p);l=s*n*n+.984375;}}}
return l;}};ef.easeIn=ef["ease-in"]=ef["<"];ef.easeOut=ef["ease-out"]=ef[">"];ef.easeInOut=ef["ease-in-out"]=ef["<>"];ef["back-in"]=ef.backIn;ef["back-out"]=ef.backOut;var animationElements=[],requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){setTimeout(callback,16);},animation=function(){var Now=+new Date,l=0;for(;l<animationElements.length;l++){var e=animationElements[l];if(e.el.removed||e.paused){continue;}
var time=Now-e.start,ms=e.ms,easing=e.easing,from=e.from,diff=e.diff,to=e.to,t=e.t,that=e.el,set={},now,init={},key;if(e.initstatus){time=(e.initstatus*e.anim.top-e.prev)/(e.percent-e.prev)*ms;e.status=e.initstatus;delete e.initstatus;e.stop&&animationElements.splice(l--,1);}else{e.status=(e.prev+(e.percent-e.prev)*(time/ms))/e.anim.top;}
if(time<0){continue;}
if(time<ms){var pos=easing(time/ms);for(var attr in from)if(from[has](attr)){switch(availableAnimAttrs[attr]){case nu:now=+from[attr]+pos*ms*diff[attr];break;case"colour":now="rgb("+[upto255(round(from[attr].r+pos*ms*diff[attr].r)),upto255(round(from[attr].g+pos*ms*diff[attr].g)),upto255(round(from[attr].b+pos*ms*diff[attr].b))].join(",")+")";break;case"path":now=[];for(var i=0,ii=from[attr].length;i<ii;i++){now[i]=[from[attr][i][0]];for(var j=1,jj=from[attr][i].length;j<jj;j++){now[i][j]=+from[attr][i][j]+pos*ms*diff[attr][i][j];}
now[i]=now[i].join(S);}
now=now.join(S);break;case"transform":if(diff[attr].real){now=[];for(i=0,ii=from[attr].length;i<ii;i++){now[i]=[from[attr][i][0]];for(j=1,jj=from[attr][i].length;j<jj;j++){now[i][j]=from[attr][i][j]+pos*ms*diff[attr][i][j];}}}else{var get=function(i){return+from[attr][i]+pos*ms*diff[attr][i];};now=[["m",get(0),get(1),get(2),get(3),get(4),get(5)]];}
break;case"csv":if(attr=="clip-rect"){now=[];i=4;while(i--){now[i]=+from[attr][i]+pos*ms*diff[attr][i];}}
break;default:var from2=[][concat](from[attr]);now=[];i=that.paper.customAttributes[attr].length;while(i--){now[i]=+from2[i]+pos*ms*diff[attr][i];}
break;}
set[attr]=now;}
that.attr(set);(function(id,that,anim){setTimeout(function(){eve("raphael.anim.frame."+id,that,anim);});})(that.id,that,e.anim);}else{(function(f,el,a){setTimeout(function(){eve("raphael.anim.frame."+el.id,el,a);eve("raphael.anim.finish."+el.id,el,a);R.is(f,"function")&&f.call(el);});})(e.callback,that,e.anim);that.attr(to);animationElements.splice(l--,1);if(e.repeat>1&&!e.next){for(key in to)if(to[has](key)){init[key]=e.totalOrigin[key];}
e.el.attr(init);runAnimation(e.anim,e.el,e.anim.percents[0],null,e.totalOrigin,e.repeat-1);}
if(e.next&&!e.stop){runAnimation(e.anim,e.el,e.next,null,e.totalOrigin,e.repeat);}}}
R.svg&&that&&that.paper&&that.paper.safari();animationElements.length&&requestAnimFrame(animation);},upto255=function(color){return color>255?255:color<0?0:color;};elproto.animateWith=function(el,anim,params,ms,easing,callback){var element=this;if(element.removed){callback&&callback.call(element);return element;}
var a=params instanceof Animation?params:R.animation(params,ms,easing,callback),x,y;runAnimation(a,element,a.percents[0],null,element.attr());for(var i=0,ii=animationElements.length;i<ii;i++){if(animationElements[i].anim==anim&&animationElements[i].el==el){animationElements[ii-1].start=animationElements[i].start;break;}}
return element;};function CubicBezierAtTime(t,p1x,p1y,p2x,p2y,duration){var cx=3*p1x,bx=3*(p2x-p1x)-cx,ax=1-cx-bx,cy=3*p1y,by=3*(p2y-p1y)-cy,ay=1-cy-by;function sampleCurveX(t){return((ax*t+bx)*t+cx)*t;}
function solve(x,epsilon){var t=solveCurveX(x,epsilon);return((ay*t+by)*t+cy)*t;}
function solveCurveX(x,epsilon){var t0,t1,t2,x2,d2,i;for(t2=x,i=0;i<8;i++){x2=sampleCurveX(t2)-x;if(abs(x2)<epsilon){return t2;}
d2=(3*ax*t2+2*bx)*t2+cx;if(abs(d2)<1e-6){break;}
t2=t2-x2/d2;}
t0=0;t1=1;t2=x;if(t2<t0){return t0;}
if(t2>t1){return t1;}
while(t0<t1){x2=sampleCurveX(t2);if(abs(x2-x)<epsilon){return t2;}
if(x>x2){t0=t2;}else{t1=t2;}
t2=(t1-t0)/2+t0;}
return t2;}
return solve(t,1/(200*duration));}
elproto.onAnimation=function(f){f?eve.on("raphael.anim.frame."+this.id,f):eve.unbind("raphael.anim.frame."+this.id);return this;};function Animation(anim,ms){var percents=[],newAnim={};this.ms=ms;this.times=1;if(anim){for(var attr in anim)if(anim[has](attr)){newAnim[toFloat(attr)]=anim[attr];percents.push(toFloat(attr));}
percents.sort(sortByNumber);}
this.anim=newAnim;this.top=percents[percents.length-1];this.percents=percents;}
Animation.prototype.delay=function(delay){var a=new Animation(this.anim,this.ms);a.times=this.times;a.del=+delay||0;return a;};Animation.prototype.repeat=function(times){var a=new Animation(this.anim,this.ms);a.del=this.del;a.times=math.floor(mmax(times,0))||1;return a;};function runAnimation(anim,element,percent,status,totalOrigin,times){percent=toFloat(percent);var params,isInAnim,isInAnimSet,percents=[],next,prev,timestamp,ms=anim.ms,from={},to={},diff={};if(status){for(i=0,ii=animationElements.length;i<ii;i++){var e=animationElements[i];if(e.el.id==element.id&&e.anim==anim){if(e.percent!=percent){animationElements.splice(i,1);isInAnimSet=1;}else{isInAnim=e;}
element.attr(e.totalOrigin);break;}}}else{status=+to;}
for(var i=0,ii=anim.percents.length;i<ii;i++){if(anim.percents[i]==percent||anim.percents[i]>status*anim.top){percent=anim.percents[i];prev=anim.percents[i-1]||0;ms=ms/anim.top*(percent-prev);next=anim.percents[i+1];params=anim.anim[percent];break;}else if(status){element.attr(anim.anim[anim.percents[i]]);}}
if(!params){return;}
if(!isInAnim){for(var attr in params)if(params[has](attr)){if(availableAnimAttrs[has](attr)||element.paper.customAttributes[has](attr)){from[attr]=element.attr(attr);(from[attr]==null)&&(from[attr]=availableAttrs[attr]);to[attr]=params[attr];switch(availableAnimAttrs[attr]){case nu:diff[attr]=(to[attr]-from[attr])/ms;break;case"colour":from[attr]=R.getRGB(from[attr]);var toColour=R.getRGB(to[attr]);diff[attr]={r:(toColour.r-from[attr].r)/ms,g:(toColour.g-from[attr].g)/ms,b:(toColour.b-from[attr].b)/ms};break;case"path":var pathes=path2curve(from[attr],to[attr]),toPath=pathes[1];from[attr]=pathes[0];diff[attr]=[];for(i=0,ii=from[attr].length;i<ii;i++){diff[attr][i]=[0];for(var j=1,jj=from[attr][i].length;j<jj;j++){diff[attr][i][j]=(toPath[i][j]-from[attr][i][j])/ms;}}
break;case"transform":var _=element._,eq=equaliseTransform(_[attr],to[attr]);if(eq){from[attr]=eq.from;to[attr]=eq.to;diff[attr]=[];diff[attr].real=true;for(i=0,ii=from[attr].length;i<ii;i++){diff[attr][i]=[from[attr][i][0]];for(j=1,jj=from[attr][i].length;j<jj;j++){diff[attr][i][j]=(to[attr][i][j]-from[attr][i][j])/ms;}}}else{var m=(element.matrix||new Matrix),to2={_:{transform:_.transform},getBBox:function(){return element.getBBox(1);}};from[attr]=[m.a,m.b,m.c,m.d,m.e,m.f];extractTransform(to2,to[attr]);to[attr]=to2._.transform;diff[attr]=[(to2.matrix.a-m.a)/ms,(to2.matrix.b-m.b)/ms,(to2.matrix.c-m.c)/ms,(to2.matrix.d-m.d)/ms,(to2.matrix.e-m.e)/ms,(to2.matrix.f-m.f)/ms];}
break;case"csv":var values=Str(params[attr])[split](separator),from2=Str(from[attr])[split](separator);if(attr=="clip-rect"){from[attr]=from2;diff[attr]=[];i=from2.length;while(i--){diff[attr][i]=(values[i]-from[attr][i])/ms;}}
to[attr]=values;break;default:values=[][concat](params[attr]);from2=[][concat](from[attr]);diff[attr]=[];i=element.paper.customAttributes[attr].length;while(i--){diff[attr][i]=((values[i]||0)-(from2[i]||0))/ms;}
break;}}}
var easing=params.easing,easyeasy=R.easing_formulas[easing];if(!easyeasy){easyeasy=Str(easing).match(bezierrg);if(easyeasy&&easyeasy.length==5){var curve=easyeasy;easyeasy=function(t){return CubicBezierAtTime(t,+curve[1],+curve[2],+curve[3],+curve[4],ms);};}else{easyeasy=pipe;}}
timestamp=params.start||anim.start||+new Date;e={anim:anim,percent:percent,timestamp:timestamp,start:timestamp+(anim.del||0),status:0,initstatus:status||0,stop:false,ms:ms,easing:easyeasy,from:from,diff:diff,to:to,el:element,callback:params.callback,prev:prev,next:next,repeat:times||anim.times,origin:element.attr(),totalOrigin:totalOrigin};animationElements.push(e);if(status&&!isInAnim&&!isInAnimSet){e.stop=true;e.start=new Date-ms*status;if(animationElements.length==1){return animation();}}
if(isInAnimSet){e.start=new Date-e.ms*status;}
animationElements.length==1&&requestAnimFrame(animation);}else{isInAnim.initstatus=status;isInAnim.start=new Date-isInAnim.ms*status;}
eve("raphael.anim.start."+element.id,element,anim);}
R.animation=function(params,ms,easing,callback){if(params instanceof Animation){return params;}
if(R.is(easing,"function")||!easing){callback=callback||easing||null;easing=null;}
params=Object(params);ms=+ms||0;var p={},json,attr;for(attr in params)if(params[has](attr)&&toFloat(attr)!=attr&&toFloat(attr)+"%"!=attr){json=true;p[attr]=params[attr];}
if(!json){return new Animation(params,ms);}else{easing&&(p.easing=easing);callback&&(p.callback=callback);return new Animation({100:p},ms);}};elproto.animate=function(params,ms,easing,callback){var element=this;if(element.removed){callback&&callback.call(element);return element;}
var anim=params instanceof Animation?params:R.animation(params,ms,easing,callback);runAnimation(anim,element,anim.percents[0],null,element.attr());return element;};elproto.setTime=function(anim,value){if(anim&&value!=null){this.status(anim,mmin(value,anim.ms)/anim.ms);}
return this;};elproto.status=function(anim,value){var out=[],i=0,len,e;if(value!=null){runAnimation(anim,this,-1,mmin(value,1));return this;}else{len=animationElements.length;for(;i<len;i++){e=animationElements[i];if(e.el.id==this.id&&(!anim||e.anim==anim)){if(anim){return e.status;}
out.push({anim:e.anim,status:e.status});}}
if(anim){return 0;}
return out;}};elproto.pause=function(anim){for(var i=0;i<animationElements.length;i++)if(animationElements[i].el.id==this.id&&(!anim||animationElements[i].anim==anim)){if(eve("raphael.anim.pause."+this.id,this,animationElements[i].anim)!==false){animationElements[i].paused=true;}}
return this;};elproto.resume=function(anim){for(var i=0;i<animationElements.length;i++)if(animationElements[i].el.id==this.id&&(!anim||animationElements[i].anim==anim)){var e=animationElements[i];if(eve("raphael.anim.resume."+this.id,this,e.anim)!==false){delete e.paused;this.status(e.anim,e.status);}}
return this;};elproto.stop=function(anim){for(var i=0;i<animationElements.length;i++)if(animationElements[i].el.id==this.id&&(!anim||animationElements[i].anim==anim)){if(eve("raphael.anim.stop."+this.id,this,animationElements[i].anim)!==false){animationElements.splice(i--,1);}}
return this;};function stopAnimation(paper){for(var i=0;i<animationElements.length;i++)if(animationElements[i].el.paper==paper){animationElements.splice(i--,1);}}
eve.on("raphael.remove",stopAnimation);eve.on("raphael.clear",stopAnimation);elproto.toString=function(){return"Rapha\xebl\u2019s object";};var Set=function(items){this.items=[];this.length=0;this.type="set";if(items){for(var i=0,ii=items.length;i<ii;i++){if(items[i]&&(items[i].constructor==elproto.constructor||items[i].constructor==Set)){this[this.items.length]=this.items[this.items.length]=items[i];this.length++;}}}},setproto=Set.prototype;setproto.push=function(){var item,len;for(var i=0,ii=arguments.length;i<ii;i++){item=arguments[i];if(item&&(item.constructor==elproto.constructor||item.constructor==Set)){len=this.items.length;this[len]=this.items[len]=item;this.length++;}}
return this;};setproto.pop=function(){this.length&&delete this[this.length--];return this.items.pop();};setproto.forEach=function(callback,thisArg){for(var i=0,ii=this.items.length;i<ii;i++){if(callback.call(thisArg,this.items[i],i)===false){return this;}}
return this;};for(var method in elproto)if(elproto[has](method)){setproto[method]=(function(methodname){return function(){var arg=arguments;return this.forEach(function(el){el[methodname][apply](el,arg);});};})(method);}
setproto.attr=function(name,value){if(name&&R.is(name,array)&&R.is(name[0],"object")){for(var j=0,jj=name.length;j<jj;j++){this.items[j].attr(name[j]);}}else{for(var i=0,ii=this.items.length;i<ii;i++){this.items[i].attr(name,value);}}
return this;};setproto.clear=function(){while(this.length){this.pop();}};setproto.splice=function(index,count,insertion){index=index<0?mmax(this.length+index,0):index;count=mmax(0,mmin(this.length-index,count));var tail=[],todel=[],args=[],i;for(i=2;i<arguments.length;i++){args.push(arguments[i]);}
for(i=0;i<count;i++){todel.push(this[index+i]);}
for(;i<this.length-index;i++){tail.push(this[index+i]);}
var arglen=args.length;for(i=0;i<arglen+tail.length;i++){this.items[index+i]=this[index+i]=i<arglen?args[i]:tail[i-arglen];}
i=this.items.length=this.length-=count-arglen;while(this[i]){delete this[i++];}
return new Set(todel);};setproto.exclude=function(el){for(var i=0,ii=this.length;i<ii;i++)if(this[i]==el){this.splice(i,1);return true;}};setproto.animate=function(params,ms,easing,callback){(R.is(easing,"function")||!easing)&&(callback=easing||null);var len=this.items.length,i=len,item,set=this,collector;if(!len){return this;}
callback&&(collector=function(){!--len&&callback.call(set);});easing=R.is(easing,string)?easing:collector;var anim=R.animation(params,ms,easing,collector);item=this.items[--i].animate(anim);while(i--){this.items[i]&&!this.items[i].removed&&this.items[i].animateWith(item,anim,anim);(this.items[i]&&!this.items[i].removed)||len--;}
return this;};setproto.insertAfter=function(el){var i=this.items.length;while(i--){this.items[i].insertAfter(el);}
return this;};setproto.getBBox=function(){var x=[],y=[],x2=[],y2=[];for(var i=this.items.length;i--;)if(!this.items[i].removed){var box=this.items[i].getBBox();x.push(box.x);y.push(box.y);x2.push(box.x+box.width);y2.push(box.y+box.height);}
x=mmin[apply](0,x);y=mmin[apply](0,y);x2=mmax[apply](0,x2);y2=mmax[apply](0,y2);return{x:x,y:y,x2:x2,y2:y2,width:x2-x,height:y2-y};};setproto.clone=function(s){s=this.paper.set();for(var i=0,ii=this.items.length;i<ii;i++){s.push(this.items[i].clone());}
return s;};setproto.toString=function(){return"Rapha\xebl\u2018s set";};setproto.glow=function(glowConfig){var ret=this.paper.set();this.forEach(function(shape,index){var g=shape.glow(glowConfig);if(g!=null){g.forEach(function(shape2,index2){ret.push(shape2);});}});return ret;};setproto.isPointInside=function(x,y){var isPointInside=false;this.forEach(function(el){if(el.isPointInside(x,y)){isPointInside=true;return false;}});return isPointInside;};R.registerFont=function(font){if(!font.face){return font;}
this.fonts=this.fonts||{};var fontcopy={w:font.w,face:{},glyphs:{}},family=font.face["font-family"];for(var prop in font.face)if(font.face[has](prop)){fontcopy.face[prop]=font.face[prop];}
if(this.fonts[family]){this.fonts[family].push(fontcopy);}else{this.fonts[family]=[fontcopy];}
if(!font.svg){fontcopy.face["units-per-em"]=toInt(font.face["units-per-em"],10);for(var glyph in font.glyphs)if(font.glyphs[has](glyph)){var path=font.glyphs[glyph];fontcopy.glyphs[glyph]={w:path.w,k:{},d:path.d&&"M"+path.d.replace(/[mlcxtrv]/g,function(command){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[command]||"M";})+"z"};if(path.k){for(var k in path.k)if(path[has](k)){fontcopy.glyphs[glyph].k[k]=path.k[k];}}}}
return font;};paperproto.getFont=function(family,weight,style,stretch){stretch=stretch||"normal";style=style||"normal";weight=+weight||{normal:400,bold:700,lighter:300,bolder:800}[weight]||400;if(!R.fonts){return;}
var font=R.fonts[family];if(!font){var name=new RegExp("(^|\\s)"+family.replace(/[^\w\d\s+!~.:_-]/g,E)+"(\\s|$)","i");for(var fontName in R.fonts)if(R.fonts[has](fontName)){if(name.test(fontName)){font=R.fonts[fontName];break;}}}
var thefont;if(font){for(var i=0,ii=font.length;i<ii;i++){thefont=font[i];if(thefont.face["font-weight"]==weight&&(thefont.face["font-style"]==style||!thefont.face["font-style"])&&thefont.face["font-stretch"]==stretch){break;}}}
return thefont;};paperproto.print=function(x,y,string,font,size,origin,letter_spacing,line_spacing){origin=origin||"middle";letter_spacing=mmax(mmin(letter_spacing||0,1),-1);line_spacing=mmax(mmin(line_spacing||1,3),1);var letters=Str(string)[split](E),shift=0,notfirst=0,path=E,scale;R.is(font,"string")&&(font=this.getFont(font));if(font){scale=(size||16)/font.face["units-per-em"];var bb=font.face.bbox[split](separator),top=+bb[0],lineHeight=bb[3]-bb[1],shifty=0,height=+bb[1]+(origin=="baseline"?lineHeight+(+font.face.descent):lineHeight/2);for(var i=0,ii=letters.length;i<ii;i++){if(letters[i]=="\n"){shift=0;curr=0;notfirst=0;shifty+=lineHeight*line_spacing;}else{var prev=notfirst&&font.glyphs[letters[i-1]]||{},curr=font.glyphs[letters[i]];shift+=notfirst?(prev.w||font.w)+(prev.k&&prev.k[letters[i]]||0)+(font.w*letter_spacing):0;notfirst=1;}
if(curr&&curr.d){path+=R.transformPath(curr.d,["t",shift*scale,shifty*scale,"s",scale,scale,top,height,"t",(x-top)/scale,(y-height)/scale]);}}}
return this.path(path).attr({fill:"#000",stroke:"none"});};paperproto.add=function(json){if(R.is(json,"array")){var res=this.set(),i=0,ii=json.length,j;for(;i<ii;i++){j=json[i]||{};elements[has](j.type)&&res.push(this[j.type]().attr(j));}}
return res;};R.format=function(token,params){var args=R.is(params,array)?[0][concat](params):arguments;token&&R.is(token,string)&&args.length-1&&(token=token.replace(formatrg,function(str,i){return args[++i]==null?E:args[i];}));return token||E;};R.fullfill=(function(){var tokenRegex=/\{([^\}]+)\}/g,objNotationRegex=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,replacer=function(all,key,obj){var res=obj;key.replace(objNotationRegex,function(all,name,quote,quotedName,isFunc){name=name||quotedName;if(res){if(name in res){res=res[name];}
typeof res=="function"&&isFunc&&(res=res());}});res=(res==null||res==obj?all:res)+"";return res;};return function(str,obj){return String(str).replace(tokenRegex,function(all,key){return replacer(all,key,obj);});};})();R.ninja=function(){oldRaphael.was?(g.win.Raphael=oldRaphael.is):delete Raphael;return R;};R.st=setproto;(function(doc,loaded,f){if(doc.readyState==null&&doc.addEventListener){doc.addEventListener(loaded,f=function(){doc.removeEventListener(loaded,f,false);doc.readyState="complete";},false);doc.readyState="loading";}
function isLoaded(){(/in/).test(doc.readyState)?setTimeout(isLoaded,9):R.eve("raphael.DOMload");}
isLoaded();})(document,"DOMContentLoaded");eve.on("raphael.DOMload",function(){loaded=true;});(function(){if(!R.svg){return;}
var has="hasOwnProperty",Str=String,toFloat=parseFloat,toInt=parseInt,math=Math,mmax=math.max,abs=math.abs,pow=math.pow,separator=/[, ]+/,eve=R.eve,E="",S=" ";var xlink="http://www.w3.org/1999/xlink",markers={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},markerCounter={};R.toString=function(){return"Your browser supports SVG.\nYou are running Rapha\xebl "+this.version;};var $=function(el,attr){if(attr){if(typeof el=="string"){el=$(el);}
for(var key in attr)if(attr[has](key)){if(key.substring(0,6)=="xlink:"){el.setAttributeNS(xlink,key.substring(6),Str(attr[key]));}else{el.setAttribute(key,Str(attr[key]));}}}else{el=R._g.doc.createElementNS("http://www.w3.org/2000/svg",el);el.style&&(el.style.webkitTapHighlightColor="rgba(0,0,0,0)");}
return el;},addGradientFill=function(element,gradient){var type="linear",id=element.id+gradient,fx=.5,fy=.5,o=element.node,SVG=element.paper,s=o.style,el=R._g.doc.getElementById(id);if(!el){gradient=Str(gradient).replace(R._radial_gradient,function(all,_fx,_fy){type="radial";if(_fx&&_fy){fx=toFloat(_fx);fy=toFloat(_fy);var dir=((fy>.5)*2-1);pow(fx-.5,2)+pow(fy-.5,2)>.25&&(fy=math.sqrt(.25-pow(fx-.5,2))*dir+.5)&&fy!=.5&&(fy=fy.toFixed(5)-1e-5*dir);}
return E;});gradient=gradient.split(/\s*\-\s*/);if(type=="linear"){var angle=gradient.shift();angle=-toFloat(angle);if(isNaN(angle)){return null;}
var vector=[0,0,math.cos(R.rad(angle)),math.sin(R.rad(angle))],max=1/(mmax(abs(vector[2]),abs(vector[3]))||1);vector[2]*=max;vector[3]*=max;if(vector[2]<0){vector[0]=-vector[2];vector[2]=0;}
if(vector[3]<0){vector[1]=-vector[3];vector[3]=0;}}
var dots=R._parseDots(gradient);if(!dots){return null;}
id=id.replace(/[\(\)\s,\xb0#]/g,"_");if(element.gradient&&id!=element.gradient.id){SVG.defs.removeChild(element.gradient);delete element.gradient;}
if(!element.gradient){el=$(type+"Gradient",{id:id});element.gradient=el;$(el,type=="radial"?{fx:fx,fy:fy}:{x1:vector[0],y1:vector[1],x2:vector[2],y2:vector[3],gradientTransform:element.matrix.invert()});SVG.defs.appendChild(el);for(var i=0,ii=dots.length;i<ii;i++){el.appendChild($("stop",{offset:dots[i].offset?dots[i].offset:i?"100%":"0%","stop-color":dots[i].color||"#fff"}));}}}
$(o,{fill:"url(#"+id+")",opacity:1,"fill-opacity":1});s.fill=E;s.opacity=1;s.fillOpacity=1;return 1;},updatePosition=function(o){var bbox=o.getBBox(1);$(o.pattern,{patternTransform:o.matrix.invert()+" translate("+bbox.x+","+bbox.y+")"});},addArrow=function(o,value,isEnd){if(o.type=="path"){var values=Str(value).toLowerCase().split("-"),p=o.paper,se=isEnd?"end":"start",node=o.node,attrs=o.attrs,stroke=attrs["stroke-width"],i=values.length,type="classic",from,to,dx,refX,attr,w=3,h=3,t=5;while(i--){switch(values[i]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":type=values[i];break;case"wide":h=5;break;case"narrow":h=2;break;case"long":w=5;break;case"short":w=2;break;}}
if(type=="open"){w+=2;h+=2;t+=2;dx=1;refX=isEnd?4:1;attr={fill:"none",stroke:attrs.stroke};}else{refX=dx=w/2;attr={fill:attrs.stroke,stroke:"none"};}
if(o._.arrows){if(isEnd){o._.arrows.endPath&&markerCounter[o._.arrows.endPath]--;o._.arrows.endMarker&&markerCounter[o._.arrows.endMarker]--;}else{o._.arrows.startPath&&markerCounter[o._.arrows.startPath]--;o._.arrows.startMarker&&markerCounter[o._.arrows.startMarker]--;}}else{o._.arrows={};}
if(type!="none"){var pathId="raphael-marker-"+type,markerId="raphael-marker-"+se+type+w+h;if(!R._g.doc.getElementById(pathId)){p.defs.appendChild($($("path"),{"stroke-linecap":"round",d:markers[type],id:pathId}));markerCounter[pathId]=1;}else{markerCounter[pathId]++;}
var marker=R._g.doc.getElementById(markerId),use;if(!marker){marker=$($("marker"),{id:markerId,markerHeight:h,markerWidth:w,orient:"auto",refX:refX,refY:h/2});use=$($("use"),{"xlink:href":"#"+pathId,transform:(isEnd?"rotate(180 "+w/2+" "+h/2+") ":E)+"scale("+w/t+","+h/t+")","stroke-width":(1/((w/t+h/t)/2)).toFixed(4)});marker.appendChild(use);p.defs.appendChild(marker);markerCounter[markerId]=1;}else{markerCounter[markerId]++;use=marker.getElementsByTagName("use")[0];}
$(use,attr);var delta=dx*(type!="diamond"&&type!="oval");if(isEnd){from=o._.arrows.startdx*stroke||0;to=R.getTotalLength(attrs.path)-delta*stroke;}else{from=delta*stroke;to=R.getTotalLength(attrs.path)-(o._.arrows.enddx*stroke||0);}
attr={};attr["marker-"+se]="url(#"+markerId+")";if(to||from){attr.d=R.getSubpath(attrs.path,from,to);}
$(node,attr);o._.arrows[se+"Path"]=pathId;o._.arrows[se+"Marker"]=markerId;o._.arrows[se+"dx"]=delta;o._.arrows[se+"Type"]=type;o._.arrows[se+"String"]=value;}else{if(isEnd){from=o._.arrows.startdx*stroke||0;to=R.getTotalLength(attrs.path)-from;}else{from=0;to=R.getTotalLength(attrs.path)-(o._.arrows.enddx*stroke||0);}
o._.arrows[se+"Path"]&&$(node,{d:R.getSubpath(attrs.path,from,to)});delete o._.arrows[se+"Path"];delete o._.arrows[se+"Marker"];delete o._.arrows[se+"dx"];delete o._.arrows[se+"Type"];delete o._.arrows[se+"String"];}
for(attr in markerCounter)if(markerCounter[has](attr)&&!markerCounter[attr]){var item=R._g.doc.getElementById(attr);item&&item.parentNode.removeChild(item);}}},dasharray={"":[0],"none":[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},addDashes=function(o,value,params){value=dasharray[Str(value).toLowerCase()];if(value){var width=o.attrs["stroke-width"]||"1",butt={round:width,square:width,butt:0}[o.attrs["stroke-linecap"]||params["stroke-linecap"]]||0,dashes=[],i=value.length;while(i--){dashes[i]=value[i]*width+((i%2)?1:-1)*butt;}
$(o.node,{"stroke-dasharray":dashes.join(",")});}},setFillAndStroke=function(o,params){var node=o.node,attrs=o.attrs,vis=node.style.visibility;node.style.visibility="hidden";for(var att in params){if(params[has](att)){if(!R._availableAttrs[has](att)){continue;}
var value=params[att];attrs[att]=value;switch(att){case"blur":o.blur(value);break;case"title":var title=node.getElementsByTagName("title");if(title.length&&(title=title[0])){title.firstChild.nodeValue=value;}else{title=$("title");var val=R._g.doc.createTextNode(value);title.appendChild(val);node.appendChild(title);}
break;case"href":case"target":var pn=node.parentNode;if(pn.tagName.toLowerCase()!="a"){var hl=$("a");pn.insertBefore(hl,node);hl.appendChild(node);pn=hl;}
if(att=="target"){pn.setAttributeNS(xlink,"show",value=="blank"?"new":value);}else{pn.setAttributeNS(xlink,att,value);}
break;case"cursor":node.style.cursor=value;break;case"transform":o.transform(value);break;case"arrow-start":addArrow(o,value);break;case"arrow-end":addArrow(o,value,1);break;case"clip-rect":var rect=Str(value).split(separator);if(rect.length==4){o.clip&&o.clip.parentNode.parentNode.removeChild(o.clip.parentNode);var el=$("clipPath"),rc=$("rect");el.id=R.createUUID();$(rc,{x:rect[0],y:rect[1],width:rect[2],height:rect[3]});el.appendChild(rc);o.paper.defs.appendChild(el);$(node,{"clip-path":"url(#"+el.id+")"});o.clip=rc;}
if(!value){var path=node.getAttribute("clip-path");if(path){var clip=R._g.doc.getElementById(path.replace(/(^url\(#|\)$)/g,E));clip&&clip.parentNode.removeChild(clip);$(node,{"clip-path":E});delete o.clip;}}
break;case"path":if(o.type=="path"){$(node,{d:value?attrs.path=R._pathToAbsolute(value):"M0,0"});o._.dirty=1;if(o._.arrows){"startString"in o._.arrows&&addArrow(o,o._.arrows.startString);"endString"in o._.arrows&&addArrow(o,o._.arrows.endString,1);}}
break;case"width":node.setAttribute(att,value);o._.dirty=1;if(attrs.fx){att="x";value=attrs.x;}else{break;}
case"x":if(attrs.fx){value=-attrs.x-(attrs.width||0);}
case"rx":if(att=="rx"&&o.type=="rect"){break;}
case"cx":node.setAttribute(att,value);o.pattern&&updatePosition(o);o._.dirty=1;break;case"height":node.setAttribute(att,value);o._.dirty=1;if(attrs.fy){att="y";value=attrs.y;}else{break;}
case"y":if(attrs.fy){value=-attrs.y-(attrs.height||0);}
case"ry":if(att=="ry"&&o.type=="rect"){break;}
case"cy":node.setAttribute(att,value);o.pattern&&updatePosition(o);o._.dirty=1;break;case"r":if(o.type=="rect"){$(node,{rx:value,ry:value});}else{node.setAttribute(att,value);}
o._.dirty=1;break;case"src":if(o.type=="image"){node.setAttributeNS(xlink,"href",value);}
break;case"stroke-width":if(o._.sx!=1||o._.sy!=1){value/=mmax(abs(o._.sx),abs(o._.sy))||1;}
if(o.paper._vbSize){value*=o.paper._vbSize;}
node.setAttribute(att,value);if(attrs["stroke-dasharray"]){addDashes(o,attrs["stroke-dasharray"],params);}
if(o._.arrows){"startString"in o._.arrows&&addArrow(o,o._.arrows.startString);"endString"in o._.arrows&&addArrow(o,o._.arrows.endString,1);}
break;case"stroke-dasharray":addDashes(o,value,params);break;case"fill":var isURL=Str(value).match(R._ISURL);if(isURL){el=$("pattern");var ig=$("image");el.id=R.createUUID();$(el,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});$(ig,{x:0,y:0,"xlink:href":isURL[1]});el.appendChild(ig);(function(el){R._preload(isURL[1],function(){var w=this.offsetWidth,h=this.offsetHeight;$(el,{width:w,height:h});$(ig,{width:w,height:h});o.paper.safari();});})(el);o.paper.defs.appendChild(el);$(node,{fill:"url(#"+el.id+")"});o.pattern=el;o.pattern&&updatePosition(o);break;}
var clr=R.getRGB(value);if(!clr.error){delete params.gradient;delete attrs.gradient;!R.is(attrs.opacity,"undefined")&&R.is(params.opacity,"undefined")&&$(node,{opacity:attrs.opacity});!R.is(attrs["fill-opacity"],"undefined")&&R.is(params["fill-opacity"],"undefined")&&$(node,{"fill-opacity":attrs["fill-opacity"]});}else if((o.type=="circle"||o.type=="ellipse"||Str(value).charAt()!="r")&&addGradientFill(o,value)){if("opacity"in attrs||"fill-opacity"in attrs){var gradient=R._g.doc.getElementById(node.getAttribute("fill").replace(/^url\(#|\)$/g,E));if(gradient){var stops=gradient.getElementsByTagName("stop");$(stops[stops.length-1],{"stop-opacity":("opacity"in attrs?attrs.opacity:1)*("fill-opacity"in attrs?attrs["fill-opacity"]:1)});}}
attrs.gradient=value;attrs.fill="none";break;}
clr[has]("opacity")&&$(node,{"fill-opacity":clr.opacity>1?clr.opacity/100:clr.opacity});case"stroke":clr=R.getRGB(value);node.setAttribute(att,clr.hex);att=="stroke"&&clr[has]("opacity")&&$(node,{"stroke-opacity":clr.opacity>1?clr.opacity/100:clr.opacity});if(att=="stroke"&&o._.arrows){"startString"in o._.arrows&&addArrow(o,o._.arrows.startString);"endString"in o._.arrows&&addArrow(o,o._.arrows.endString,1);}
break;case"gradient":(o.type=="circle"||o.type=="ellipse"||Str(value).charAt()!="r")&&addGradientFill(o,value);break;case"opacity":if(attrs.gradient&&!attrs[has]("stroke-opacity")){$(node,{"stroke-opacity":value>1?value/100:value});}
case"fill-opacity":if(attrs.gradient){gradient=R._g.doc.getElementById(node.getAttribute("fill").replace(/^url\(#|\)$/g,E));if(gradient){stops=gradient.getElementsByTagName("stop");$(stops[stops.length-1],{"stop-opacity":value});}
break;}
default:att=="font-size"&&(value=toInt(value,10)+"px");var cssrule=att.replace(/(\-.)/g,function(w){return w.substring(1).toUpperCase();});node.style[cssrule]=value;o._.dirty=1;node.setAttribute(att,value);break;}}}
tuneText(o,params);node.style.visibility=vis;},leading=1.2,tuneText=function(el,params){if(el.type!="text"||!(params[has]("text")||params[has]("font")||params[has]("font-size")||params[has]("x")||params[has]("y"))){return;}
var a=el.attrs,node=el.node,fontSize=node.firstChild?toInt(R._g.doc.defaultView.getComputedStyle(node.firstChild,E).getPropertyValue("font-size"),10):10;if(params[has]("text")){a.text=params.text;while(node.firstChild){node.removeChild(node.firstChild);}
var texts=Str(params.text).split("\n"),tspans=[],tspan;for(var i=0,ii=texts.length;i<ii;i++){tspan=$("tspan");i&&$(tspan,{dy:fontSize*leading,x:a.x});tspan.appendChild(R._g.doc.createTextNode(texts[i]));node.appendChild(tspan);tspans[i]=tspan;}}else{tspans=node.getElementsByTagName("tspan");for(i=0,ii=tspans.length;i<ii;i++)if(i){$(tspans[i],{dy:fontSize*leading,x:a.x});}else{$(tspans[0],{dy:0});}}
$(node,{x:a.x,y:a.y});el._.dirty=1;var bb=el._getBBox(),dif=a.y-(bb.y+bb.height/2);dif&&R.is(dif,"finite")&&$(tspans[0],{dy:dif});},Element=function(node,svg){var X=0,Y=0;this[0]=this.node=node;node.raphael=true;this.id=R._oid++;node.raphaelid=this.id;this.matrix=R.matrix();this.realPath=null;this.paper=svg;this.attrs=this.attrs||{};this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1};!svg.bottom&&(svg.bottom=this);this.prev=svg.top;svg.top&&(svg.top.next=this);svg.top=this;this.next=null;},elproto=R.el;Element.prototype=elproto;elproto.constructor=Element;R._engine.path=function(pathString,SVG){var el=$("path");SVG.canvas&&SVG.canvas.appendChild(el);var p=new Element(el,SVG);p.type="path";setFillAndStroke(p,{fill:"none",stroke:"#000",path:pathString});return p;};elproto.rotate=function(deg,cx,cy){if(this.removed){return this;}
deg=Str(deg).split(separator);if(deg.length-1){cx=toFloat(deg[1]);cy=toFloat(deg[2]);}
deg=toFloat(deg[0]);(cy==null)&&(cx=cy);if(cx==null||cy==null){var bbox=this.getBBox(1);cx=bbox.x+bbox.width/2;cy=bbox.y+bbox.height/2;}
this.transform(this._.transform.concat([["r",deg,cx,cy]]));return this;};elproto.scale=function(sx,sy,cx,cy){if(this.removed){return this;}
sx=Str(sx).split(separator);if(sx.length-1){sy=toFloat(sx[1]);cx=toFloat(sx[2]);cy=toFloat(sx[3]);}
sx=toFloat(sx[0]);(sy==null)&&(sy=sx);(cy==null)&&(cx=cy);if(cx==null||cy==null){var bbox=this.getBBox(1);}
cx=cx==null?bbox.x+bbox.width/2:cx;cy=cy==null?bbox.y+bbox.height/2:cy;this.transform(this._.transform.concat([["s",sx,sy,cx,cy]]));return this;};elproto.translate=function(dx,dy){if(this.removed){return this;}
dx=Str(dx).split(separator);if(dx.length-1){dy=toFloat(dx[1]);}
dx=toFloat(dx[0])||0;dy=+dy||0;this.transform(this._.transform.concat([["t",dx,dy]]));return this;};elproto.transform=function(tstr){var _=this._;if(tstr==null){return _.transform;}
R._extractTransform(this,tstr);this.clip&&$(this.clip,{transform:this.matrix.invert()});this.pattern&&updatePosition(this);this.node&&$(this.node,{transform:this.matrix});if(_.sx!=1||_.sy!=1){var sw=this.attrs[has]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":sw});}
return this;};elproto.hide=function(){!this.removed&&this.paper.safari(this.node.style.display="none");return this;};elproto.show=function(){!this.removed&&this.paper.safari(this.node.style.display="");return this;};elproto.remove=function(){if(this.removed||!this.node.parentNode){return;}
var paper=this.paper;paper.__set__&&paper.__set__.exclude(this);eve.unbind("raphael.*.*."+this.id);if(this.gradient){paper.defs.removeChild(this.gradient);}
R._tear(this,paper);if(this.node.parentNode.tagName.toLowerCase()=="a"){this.node.parentNode.parentNode.removeChild(this.node.parentNode);}else{this.node.parentNode.removeChild(this.node);}
for(var i in this){this[i]=typeof this[i]=="function"?R._removedFactory(i):null;}
this.removed=true;};elproto._getBBox=function(){if(this.node.style.display=="none"){this.show();var hide=true;}
var bbox={};try{bbox=this.node.getBBox();}catch(e){}finally{bbox=bbox||{};}
hide&&this.hide();return bbox;};elproto.attr=function(name,value){if(this.removed){return this;}
if(name==null){var res={};for(var a in this.attrs)if(this.attrs[has](a)){res[a]=this.attrs[a];}
res.gradient&&res.fill=="none"&&(res.fill=res.gradient)&&delete res.gradient;res.transform=this._.transform;return res;}
if(value==null&&R.is(name,"string")){if(name=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient){return this.attrs.gradient;}
if(name=="transform"){return this._.transform;}
var names=name.split(separator),out={};for(var i=0,ii=names.length;i<ii;i++){name=names[i];if(name in this.attrs){out[name]=this.attrs[name];}else if(R.is(this.paper.customAttributes[name],"function")){out[name]=this.paper.customAttributes[name].def;}else{out[name]=R._availableAttrs[name];}}
return ii-1?out:out[names[0]];}
if(value==null&&R.is(name,"array")){out={};for(i=0,ii=name.length;i<ii;i++){out[name[i]]=this.attr(name[i]);}
return out;}
if(value!=null){var params={};params[name]=value;}else if(name!=null&&R.is(name,"object")){params=name;}
for(var key in params){eve("raphael.attr."+key+"."+this.id,this,params[key]);}
for(key in this.paper.customAttributes)if(this.paper.customAttributes[has](key)&&params[has](key)&&R.is(this.paper.customAttributes[key],"function")){var par=this.paper.customAttributes[key].apply(this,[].concat(params[key]));this.attrs[key]=params[key];for(var subkey in par)if(par[has](subkey)){params[subkey]=par[subkey];}}
setFillAndStroke(this,params);return this;};elproto.toFront=function(){if(this.removed){return this;}
if(this.node.parentNode.tagName.toLowerCase()=="a"){this.node.parentNode.parentNode.appendChild(this.node.parentNode);}else{this.node.parentNode.appendChild(this.node);}
var svg=this.paper;svg.top!=this&&R._tofront(this,svg);return this;};elproto.toBack=function(){if(this.removed){return this;}
var parent=this.node.parentNode;if(parent.tagName.toLowerCase()=="a"){parent.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild);}else if(parent.firstChild!=this.node){parent.insertBefore(this.node,this.node.parentNode.firstChild);}
R._toback(this,this.paper);var svg=this.paper;return this;};elproto.insertAfter=function(element){if(this.removed){return this;}
var node=element.node||element[element.length-1].node;if(node.nextSibling){node.parentNode.insertBefore(this.node,node.nextSibling);}else{node.parentNode.appendChild(this.node);}
R._insertafter(this,element,this.paper);return this;};elproto.insertBefore=function(element){if(this.removed){return this;}
var node=element.node||element[0].node;node.parentNode.insertBefore(this.node,node);R._insertbefore(this,element,this.paper);return this;};elproto.blur=function(size){var t=this;if(+size!==0){var fltr=$("filter"),blur=$("feGaussianBlur");t.attrs.blur=size;fltr.id=R.createUUID();$(blur,{stdDeviation:+size||1.5});fltr.appendChild(blur);t.paper.defs.appendChild(fltr);t._blur=fltr;$(t.node,{filter:"url(#"+fltr.id+")"});}else{if(t._blur){t._blur.parentNode.removeChild(t._blur);delete t._blur;delete t.attrs.blur;}
t.node.removeAttribute("filter");}
return t;};R._engine.circle=function(svg,x,y,r){var el=$("circle");svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);res.attrs={cx:x,cy:y,r:r,fill:"none",stroke:"#000"};res.type="circle";$(el,res.attrs);return res;};R._engine.rect=function(svg,x,y,w,h,r){var el=$("rect");svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);res.attrs={x:x,y:y,width:w,height:h,r:r||0,rx:r||0,ry:r||0,fill:"none",stroke:"#000"};res.type="rect";$(el,res.attrs);return res;};R._engine.ellipse=function(svg,x,y,rx,ry){var el=$("ellipse");svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);res.attrs={cx:x,cy:y,rx:rx,ry:ry,fill:"none",stroke:"#000"};res.type="ellipse";$(el,res.attrs);return res;};R._engine.image=function(svg,src,x,y,w,h){var el=$("image");$(el,{x:x,y:y,width:w,height:h,preserveAspectRatio:"none"});el.setAttributeNS(xlink,"href",src);svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);res.attrs={x:x,y:y,width:w,height:h,src:src};res.type="image";return res;};R._engine.text=function(svg,x,y,text){var el=$("text");svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);res.attrs={x:x,y:y,"text-anchor":"middle",text:text,font:R._availableAttrs.font,stroke:"none",fill:"#000"};res.type="text";setFillAndStroke(res,res.attrs);return res;};R._engine.setSize=function(width,height){this.width=width||this.width;this.height=height||this.height;this.canvas.setAttribute("width",this.width);this.canvas.setAttribute("height",this.height);if(this._viewBox){this.setViewBox.apply(this,this._viewBox);}
return this;};R._engine.create=function(){var con=R._getContainer.apply(0,arguments),container=con&&con.container,x=con.x,y=con.y,width=con.width,height=con.height;if(!container){throw new Error("SVG container not found.");}
var cnvs=$("svg"),css="overflow:hidden;",isFloating;x=x||0;y=y||0;width=width||512;height=height||342;$(cnvs,{height:height,version:1.1,width:width,xmlns:"http://www.w3.org/2000/svg"});if(container==1){cnvs.style.cssText=css+"position:absolute;left:"+x+"px;top:"+y+"px";R._g.doc.body.appendChild(cnvs);isFloating=1;}else{cnvs.style.cssText=css+"position:relative";if(container.firstChild){container.insertBefore(cnvs,container.firstChild);}else{container.appendChild(cnvs);}}
container=new R._Paper;container.width=width;container.height=height;container.canvas=cnvs;container.clear();container._left=container._top=0;isFloating&&(container.renderfix=function(){});container.renderfix();return container;};R._engine.setViewBox=function(x,y,w,h,fit){eve("raphael.setViewBox",this,this._viewBox,[x,y,w,h,fit]);var size=mmax(w/this.width,h/this.height),top=this.top,aspectRatio=fit?"xMidYMid meet":"xMinYMin",vb,sw;if(x==null){if(this._vbSize){size=1;}
delete this._vbSize;vb="0 0 "+this.width+S+this.height;}else{this._vbSize=size;vb=x+S+y+S+w+S+h;}
$(this.canvas,{viewBox:vb,preserveAspectRatio:aspectRatio});while(size&&top){sw="stroke-width"in top.attrs?top.attrs["stroke-width"]:1;top.attr({"stroke-width":sw});top._.dirty=1;top._.dirtyT=1;top=top.prev;}
this._viewBox=[x,y,w,h,!!fit];return this;};R.prototype.renderfix=function(){var cnvs=this.canvas,s=cnvs.style,pos;try{pos=cnvs.getScreenCTM()||cnvs.createSVGMatrix();}catch(e){pos=cnvs.createSVGMatrix();}
var left=-pos.e%1,top=-pos.f%1;if(left||top){if(left){this._left=(this._left+left)%1;s.left=this._left+"px";}
if(top){this._top=(this._top+top)%1;s.top=this._top+"px";}}};R.prototype.clear=function(){R.eve("raphael.clear",this);var c=this.canvas;while(c.firstChild){c.removeChild(c.firstChild);}
this.bottom=this.top=null;(this.desc=$("desc")).appendChild(R._g.doc.createTextNode("Created with Rapha\xebl "+R.version));c.appendChild(this.desc);c.appendChild(this.defs=$("defs"));};R.prototype.remove=function(){eve("raphael.remove",this);this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var i in this){this[i]=typeof this[i]=="function"?R._removedFactory(i):null;}};var setproto=R.st;for(var method in elproto)if(elproto[has](method)&&!setproto[has](method)){setproto[method]=(function(methodname){return function(){var arg=arguments;return this.forEach(function(el){el[methodname].apply(el,arg);});};})(method);}})();(function(){if(!R.vml){return;}
var has="hasOwnProperty",Str=String,toFloat=parseFloat,math=Math,round=math.round,mmax=math.max,mmin=math.min,abs=math.abs,fillString="fill",separator=/[, ]+/,eve=R.eve,ms=" progid:DXImageTransform.Microsoft",S=" ",E="",map={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},bites=/([clmz]),?([^clmz]*)/gi,blurregexp=/ progid:\S+Blur\([^\)]+\)/g,val=/-?[^,\s-]+/g,cssDot="position:absolute;left:0;top:0;width:1px;height:1px",zoom=21600,pathTypes={path:1,rect:1,image:1},ovalTypes={circle:1,ellipse:1},path2vml=function(path){var total=/[ahqstv]/ig,command=R._pathToAbsolute;Str(path).match(total)&&(command=R._path2curve);total=/[clmz]/g;if(command==R._pathToAbsolute&&!Str(path).match(total)){var res=Str(path).replace(bites,function(all,command,args){var vals=[],isMove=command.toLowerCase()=="m",res=map[command];args.replace(val,function(value){if(isMove&&vals.length==2){res+=vals+map[command=="m"?"l":"L"];vals=[];}
vals.push(round(value*zoom));});return res+vals;});return res;}
var pa=command(path),p,r;res=[];for(var i=0,ii=pa.length;i<ii;i++){p=pa[i];r=pa[i][0].toLowerCase();r=="z"&&(r="x");for(var j=1,jj=p.length;j<jj;j++){r+=round(p[j]*zoom)+(j!=jj-1?",":E);}
res.push(r);}
return res.join(S);},compensation=function(deg,dx,dy){var m=R.matrix();m.rotate(-deg,.5,.5);return{dx:m.x(dx,dy),dy:m.y(dx,dy)};},setCoords=function(p,sx,sy,dx,dy,deg){var _=p._,m=p.matrix,fillpos=_.fillpos,o=p.node,s=o.style,y=1,flip="",dxdy,kx=zoom/sx,ky=zoom/sy;s.visibility="hidden";if(!sx||!sy){return;}
o.coordsize=abs(kx)+S+abs(ky);s.rotation=deg*(sx*sy<0?-1:1);if(deg){var c=compensation(deg,dx,dy);dx=c.dx;dy=c.dy;}
sx<0&&(flip+="x");sy<0&&(flip+=" y")&&(y=-1);s.flip=flip;o.coordorigin=(dx*-kx)+S+(dy*-ky);if(fillpos||_.fillsize){var fill=o.getElementsByTagName(fillString);fill=fill&&fill[0];o.removeChild(fill);if(fillpos){c=compensation(deg,m.x(fillpos[0],fillpos[1]),m.y(fillpos[0],fillpos[1]));fill.position=c.dx*y+S+c.dy*y;}
if(_.fillsize){fill.size=_.fillsize[0]*abs(sx)+S+_.fillsize[1]*abs(sy);}
o.appendChild(fill);}
s.visibility="visible";};R.toString=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\xebl "+this.version;};var addArrow=function(o,value,isEnd){var values=Str(value).toLowerCase().split("-"),se=isEnd?"end":"start",i=values.length,type="classic",w="medium",h="medium";while(i--){switch(values[i]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":type=values[i];break;case"wide":case"narrow":h=values[i];break;case"long":case"short":w=values[i];break;}}
var stroke=o.node.getElementsByTagName("stroke")[0];stroke[se+"arrow"]=type;stroke[se+"arrowlength"]=w;stroke[se+"arrowwidth"]=h;},setFillAndStroke=function(o,params){o.attrs=o.attrs||{};var node=o.node,a=o.attrs,s=node.style,xy,newpath=pathTypes[o.type]&&(params.x!=a.x||params.y!=a.y||params.width!=a.width||params.height!=a.height||params.cx!=a.cx||params.cy!=a.cy||params.rx!=a.rx||params.ry!=a.ry||params.r!=a.r),isOval=ovalTypes[o.type]&&(a.cx!=params.cx||a.cy!=params.cy||a.r!=params.r||a.rx!=params.rx||a.ry!=params.ry),res=o;for(var par in params)if(params[has](par)){a[par]=params[par];}
if(newpath){a.path=R._getPath[o.type](o);o._.dirty=1;}
params.href&&(node.href=params.href);params.title&&(node.title=params.title);params.target&&(node.target=params.target);params.cursor&&(s.cursor=params.cursor);"blur"in params&&o.blur(params.blur);if(params.path&&o.type=="path"||newpath){node.path=path2vml(~Str(a.path).toLowerCase().indexOf("r")?R._pathToAbsolute(a.path):a.path);if(o.type=="image"){o._.fillpos=[a.x,a.y];o._.fillsize=[a.width,a.height];setCoords(o,1,1,0,0,0);}}"transform"in params&&o.transform(params.transform);if(isOval){var cx=+a.cx,cy=+a.cy,rx=+a.rx||+a.r||0,ry=+a.ry||+a.r||0;node.path=R.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",round((cx-rx)*zoom),round((cy-ry)*zoom),round((cx+rx)*zoom),round((cy+ry)*zoom),round(cx*zoom));o._.dirty=1;}
if("clip-rect"in params){var rect=Str(params["clip-rect"]).split(separator);if(rect.length==4){rect[2]=+rect[2]+(+rect[0]);rect[3]=+rect[3]+(+rect[1]);var div=node.clipRect||R._g.doc.createElement("div"),dstyle=div.style;dstyle.clip=R.format("rect({1}px {2}px {3}px {0}px)",rect);if(!node.clipRect){dstyle.position="absolute";dstyle.top=0;dstyle.left=0;dstyle.width=o.paper.width+"px";dstyle.height=o.paper.height+"px";node.parentNode.insertBefore(div,node);div.appendChild(node);node.clipRect=div;}}
if(!params["clip-rect"]){node.clipRect&&(node.clipRect.style.clip="auto");}}
if(o.textpath){var textpathStyle=o.textpath.style;params.font&&(textpathStyle.font=params.font);params["font-family"]&&(textpathStyle.fontFamily='"'+params["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,E)+'"');params["font-size"]&&(textpathStyle.fontSize=params["font-size"]);params["font-weight"]&&(textpathStyle.fontWeight=params["font-weight"]);params["font-style"]&&(textpathStyle.fontStyle=params["font-style"]);}
if("arrow-start"in params){addArrow(res,params["arrow-start"]);}
if("arrow-end"in params){addArrow(res,params["arrow-end"],1);}
if(params.opacity!=null||params["stroke-width"]!=null||params.fill!=null||params.src!=null||params.stroke!=null||params["stroke-width"]!=null||params["stroke-opacity"]!=null||params["fill-opacity"]!=null||params["stroke-dasharray"]!=null||params["stroke-miterlimit"]!=null||params["stroke-linejoin"]!=null||params["stroke-linecap"]!=null){var fill=node.getElementsByTagName(fillString),newfill=false;fill=fill&&fill[0];!fill&&(newfill=fill=createNode(fillString));if(o.type=="image"&&params.src){fill.src=params.src;}
params.fill&&(fill.on=true);if(fill.on==null||params.fill=="none"||params.fill===null){fill.on=false;}
if(fill.on&&params.fill){var isURL=Str(params.fill).match(R._ISURL);if(isURL){fill.parentNode==node&&node.removeChild(fill);fill.rotate=true;fill.src=isURL[1];fill.type="tile";var bbox=o.getBBox(1);fill.position=bbox.x+S+bbox.y;o._.fillpos=[bbox.x,bbox.y];R._preload(isURL[1],function(){o._.fillsize=[this.offsetWidth,this.offsetHeight];});}else{fill.color=R.getRGB(params.fill).hex;fill.src=E;fill.type="solid";if(R.getRGB(params.fill).error&&(res.type in{circle:1,ellipse:1}||Str(params.fill).charAt()!="r")&&addGradientFill(res,params.fill,fill)){a.fill="none";a.gradient=params.fill;fill.rotate=false;}}}
if("fill-opacity"in params||"opacity"in params){var opacity=((+a["fill-opacity"]+1||2)-1)*((+a.opacity+1||2)-1)*((+R.getRGB(params.fill).o+1||2)-1);opacity=mmin(mmax(opacity,0),1);fill.opacity=opacity;if(fill.src){fill.color="none";}}
node.appendChild(fill);var stroke=(node.getElementsByTagName("stroke")&&node.getElementsByTagName("stroke")[0]),newstroke=false;!stroke&&(newstroke=stroke=createNode("stroke"));if((params.stroke&&params.stroke!="none")||params["stroke-width"]||params["stroke-opacity"]!=null||params["stroke-dasharray"]||params["stroke-miterlimit"]||params["stroke-linejoin"]||params["stroke-linecap"]){stroke.on=true;}
(params.stroke=="none"||params.stroke===null||stroke.on==null||params.stroke==0||params["stroke-width"]==0)&&(stroke.on=false);var strokeColor=R.getRGB(params.stroke);stroke.on&&params.stroke&&(stroke.color=strokeColor.hex);opacity=((+a["stroke-opacity"]+1||2)-1)*((+a.opacity+1||2)-1)*((+strokeColor.o+1||2)-1);var width=(toFloat(params["stroke-width"])||1)*.75;opacity=mmin(mmax(opacity,0),1);params["stroke-width"]==null&&(width=a["stroke-width"]);params["stroke-width"]&&(stroke.weight=width);width&&width<1&&(opacity*=width)&&(stroke.weight=1);stroke.opacity=opacity;params["stroke-linejoin"]&&(stroke.joinstyle=params["stroke-linejoin"]||"miter");stroke.miterlimit=params["stroke-miterlimit"]||8;params["stroke-linecap"]&&(stroke.endcap=params["stroke-linecap"]=="butt"?"flat":params["stroke-linecap"]=="square"?"square":"round");if("stroke-dasharray"in params){var dasharray={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};stroke.dashstyle=dasharray[has](params["stroke-dasharray"])?dasharray[params["stroke-dasharray"]]:E;}
newstroke&&node.appendChild(stroke);}
if(res.type=="text"){res.paper.canvas.style.display=E;var span=res.paper.span,m=100,fontSize=a.font&&a.font.match(/\d+(?:\.\d*)?(?=px)/);s=span.style;a.font&&(s.font=a.font);a["font-family"]&&(s.fontFamily=a["font-family"]);a["font-weight"]&&(s.fontWeight=a["font-weight"]);a["font-style"]&&(s.fontStyle=a["font-style"]);fontSize=toFloat(a["font-size"]||fontSize&&fontSize[0])||10;s.fontSize=fontSize*m+"px";res.textpath.string&&(span.innerHTML=Str(res.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var brect=span.getBoundingClientRect();res.W=a.w=(brect.right-brect.left)/m;res.H=a.h=(brect.bottom-brect.top)/m;res.X=a.x;res.Y=a.y+res.H/2;("x"in params||"y"in params)&&(res.path.v=R.format("m{0},{1}l{2},{1}",round(a.x*zoom),round(a.y*zoom),round(a.x*zoom)+1));var dirtyattrs=["x","y","text","font","font-family","font-weight","font-style","font-size"];for(var d=0,dd=dirtyattrs.length;d<dd;d++)if(dirtyattrs[d]in params){res._.dirty=1;break;}
switch(a["text-anchor"]){case"start":res.textpath.style["v-text-align"]="left";res.bbx=res.W/2;break;case"end":res.textpath.style["v-text-align"]="right";res.bbx=-res.W/2;break;default:res.textpath.style["v-text-align"]="center";res.bbx=0;break;}
res.textpath.style["v-text-kern"]=true;}},addGradientFill=function(o,gradient,fill){o.attrs=o.attrs||{};var attrs=o.attrs,pow=Math.pow,opacity,oindex,type="linear",fxfy=".5 .5";o.attrs.gradient=gradient;gradient=Str(gradient).replace(R._radial_gradient,function(all,fx,fy){type="radial";if(fx&&fy){fx=toFloat(fx);fy=toFloat(fy);pow(fx-.5,2)+pow(fy-.5,2)>.25&&(fy=math.sqrt(.25-pow(fx-.5,2))*((fy>.5)*2-1)+.5);fxfy=fx+S+fy;}
return E;});gradient=gradient.split(/\s*\-\s*/);if(type=="linear"){var angle=gradient.shift();angle=-toFloat(angle);if(isNaN(angle)){return null;}}
var dots=R._parseDots(gradient);if(!dots){return null;}
o=o.shape||o.node;if(dots.length){o.removeChild(fill);fill.on=true;fill.method="none";fill.color=dots[0].color;fill.color2=dots[dots.length-1].color;var clrs=[];for(var i=0,ii=dots.length;i<ii;i++){dots[i].offset&&clrs.push(dots[i].offset+S+dots[i].color);}
fill.colors=clrs.length?clrs.join():"0% "+fill.color;if(type=="radial"){fill.type="gradientTitle";fill.focus="100%";fill.focussize="0 0";fill.focusposition=fxfy;fill.angle=0;}else{fill.type="gradient";fill.angle=(270-angle)%360;}
o.appendChild(fill);}
return 1;},Element=function(node,vml){this[0]=this.node=node;node.raphael=true;this.id=R._oid++;node.raphaelid=this.id;this.X=0;this.Y=0;this.attrs={};this.paper=vml;this.matrix=R.matrix();this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1};!vml.bottom&&(vml.bottom=this);this.prev=vml.top;vml.top&&(vml.top.next=this);vml.top=this;this.next=null;};var elproto=R.el;Element.prototype=elproto;elproto.constructor=Element;elproto.transform=function(tstr){if(tstr==null){return this._.transform;}
var vbs=this.paper._viewBoxShift,vbt=vbs?"s"+[vbs.scale,vbs.scale]+"-1-1t"+[vbs.dx,vbs.dy]:E,oldt;if(vbs){oldt=tstr=Str(tstr).replace(/\.{3}|\u2026/g,this._.transform||E);}
R._extractTransform(this,vbt+tstr);var matrix=this.matrix.clone(),skew=this.skew,o=this.node,split,isGrad=~Str(this.attrs.fill).indexOf("-"),isPatt=!Str(this.attrs.fill).indexOf("url(");matrix.translate(1,1);if(isPatt||isGrad||this.type=="image"){skew.matrix="1 0 0 1";skew.offset="0 0";split=matrix.split();if((isGrad&&split.noRotation)||!split.isSimple){o.style.filter=matrix.toFilter();var bb=this.getBBox(),bbt=this.getBBox(1),dx=bb.x-bbt.x,dy=bb.y-bbt.y;o.coordorigin=(dx*-zoom)+S+(dy*-zoom);setCoords(this,1,1,dx,dy,0);}else{o.style.filter=E;setCoords(this,split.scalex,split.scaley,split.dx,split.dy,split.rotate);}}else{o.style.filter=E;skew.matrix=Str(matrix);skew.offset=matrix.offset();}
oldt&&(this._.transform=oldt);return this;};elproto.rotate=function(deg,cx,cy){if(this.removed){return this;}
if(deg==null){return;}
deg=Str(deg).split(separator);if(deg.length-1){cx=toFloat(deg[1]);cy=toFloat(deg[2]);}
deg=toFloat(deg[0]);(cy==null)&&(cx=cy);if(cx==null||cy==null){var bbox=this.getBBox(1);cx=bbox.x+bbox.width/2;cy=bbox.y+bbox.height/2;}
this._.dirtyT=1;this.transform(this._.transform.concat([["r",deg,cx,cy]]));return this;};elproto.translate=function(dx,dy){if(this.removed){return this;}
dx=Str(dx).split(separator);if(dx.length-1){dy=toFloat(dx[1]);}
dx=toFloat(dx[0])||0;dy=+dy||0;if(this._.bbox){this._.bbox.x+=dx;this._.bbox.y+=dy;}
this.transform(this._.transform.concat([["t",dx,dy]]));return this;};elproto.scale=function(sx,sy,cx,cy){if(this.removed){return this;}
sx=Str(sx).split(separator);if(sx.length-1){sy=toFloat(sx[1]);cx=toFloat(sx[2]);cy=toFloat(sx[3]);isNaN(cx)&&(cx=null);isNaN(cy)&&(cy=null);}
sx=toFloat(sx[0]);(sy==null)&&(sy=sx);(cy==null)&&(cx=cy);if(cx==null||cy==null){var bbox=this.getBBox(1);}
cx=cx==null?bbox.x+bbox.width/2:cx;cy=cy==null?bbox.y+bbox.height/2:cy;this.transform(this._.transform.concat([["s",sx,sy,cx,cy]]));this._.dirtyT=1;return this;};elproto.hide=function(){!this.removed&&(this.node.style.display="none");return this;};elproto.show=function(){!this.removed&&(this.node.style.display=E);return this;};elproto._getBBox=function(){if(this.removed){return{};}
return{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H};};elproto.remove=function(){if(this.removed||!this.node.parentNode){return;}
this.paper.__set__&&this.paper.__set__.exclude(this);R.eve.unbind("raphael.*.*."+this.id);R._tear(this,this.paper);this.node.parentNode.removeChild(this.node);this.shape&&this.shape.parentNode.removeChild(this.shape);for(var i in this){this[i]=typeof this[i]=="function"?R._removedFactory(i):null;}
this.removed=true;};elproto.attr=function(name,value){if(this.removed){return this;}
if(name==null){var res={};for(var a in this.attrs)if(this.attrs[has](a)){res[a]=this.attrs[a];}
res.gradient&&res.fill=="none"&&(res.fill=res.gradient)&&delete res.gradient;res.transform=this._.transform;return res;}
if(value==null&&R.is(name,"string")){if(name==fillString&&this.attrs.fill=="none"&&this.attrs.gradient){return this.attrs.gradient;}
var names=name.split(separator),out={};for(var i=0,ii=names.length;i<ii;i++){name=names[i];if(name in this.attrs){out[name]=this.attrs[name];}else if(R.is(this.paper.customAttributes[name],"function")){out[name]=this.paper.customAttributes[name].def;}else{out[name]=R._availableAttrs[name];}}
return ii-1?out:out[names[0]];}
if(this.attrs&&value==null&&R.is(name,"array")){out={};for(i=0,ii=name.length;i<ii;i++){out[name[i]]=this.attr(name[i]);}
return out;}
var params;if(value!=null){params={};params[name]=value;}
value==null&&R.is(name,"object")&&(params=name);for(var key in params){eve("raphael.attr."+key+"."+this.id,this,params[key]);}
if(params){for(key in this.paper.customAttributes)if(this.paper.customAttributes[has](key)&&params[has](key)&&R.is(this.paper.customAttributes[key],"function")){var par=this.paper.customAttributes[key].apply(this,[].concat(params[key]));this.attrs[key]=params[key];for(var subkey in par)if(par[has](subkey)){params[subkey]=par[subkey];}}
if(params.text&&this.type=="text"){this.textpath.string=params.text;}
setFillAndStroke(this,params);}
return this;};elproto.toFront=function(){!this.removed&&this.node.parentNode.appendChild(this.node);this.paper&&this.paper.top!=this&&R._tofront(this,this.paper);return this;};elproto.toBack=function(){if(this.removed){return this;}
if(this.node.parentNode.firstChild!=this.node){this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild);R._toback(this,this.paper);}
return this;};elproto.insertAfter=function(element){if(this.removed){return this;}
if(element.constructor==R.st.constructor){element=element[element.length-1];}
if(element.node.nextSibling){element.node.parentNode.insertBefore(this.node,element.node.nextSibling);}else{element.node.parentNode.appendChild(this.node);}
R._insertafter(this,element,this.paper);return this;};elproto.insertBefore=function(element){if(this.removed){return this;}
if(element.constructor==R.st.constructor){element=element[0];}
element.node.parentNode.insertBefore(this.node,element.node);R._insertbefore(this,element,this.paper);return this;};elproto.blur=function(size){var s=this.node.runtimeStyle,f=s.filter;f=f.replace(blurregexp,E);if(+size!==0){this.attrs.blur=size;s.filter=f+S+ms+".Blur(pixelradius="+(+size||1.5)+")";s.margin=R.format("-{0}px 0 0 -{0}px",round(+size||1.5));}else{s.filter=f;s.margin=0;delete this.attrs.blur;}
return this;};R._engine.path=function(pathString,vml){var el=createNode("shape");el.style.cssText=cssDot;el.coordsize=zoom+S+zoom;el.coordorigin=vml.coordorigin;var p=new Element(el,vml),attr={fill:"none",stroke:"#000"};pathString&&(attr.path=pathString);p.type="path";p.path=[];p.Path=E;setFillAndStroke(p,attr);vml.canvas.appendChild(el);var skew=createNode("skew");skew.on=true;el.appendChild(skew);p.skew=skew;p.transform(E);return p;};R._engine.rect=function(vml,x,y,w,h,r){var path=R._rectPath(x,y,w,h,r),res=vml.path(path),a=res.attrs;res.X=a.x=x;res.Y=a.y=y;res.W=a.width=w;res.H=a.height=h;a.r=r;a.path=path;res.type="rect";return res;};R._engine.ellipse=function(vml,x,y,rx,ry){var res=vml.path(),a=res.attrs;res.X=x-rx;res.Y=y-ry;res.W=rx*2;res.H=ry*2;res.type="ellipse";setFillAndStroke(res,{cx:x,cy:y,rx:rx,ry:ry});return res;};R._engine.circle=function(vml,x,y,r){var res=vml.path(),a=res.attrs;res.X=x-r;res.Y=y-r;res.W=res.H=r*2;res.type="circle";setFillAndStroke(res,{cx:x,cy:y,r:r});return res;};R._engine.image=function(vml,src,x,y,w,h){var path=R._rectPath(x,y,w,h),res=vml.path(path).attr({stroke:"none"}),a=res.attrs,node=res.node,fill=node.getElementsByTagName(fillString)[0];a.src=src;res.X=a.x=x;res.Y=a.y=y;res.W=a.width=w;res.H=a.height=h;a.path=path;res.type="image";fill.parentNode==node&&node.removeChild(fill);fill.rotate=true;fill.src=src;fill.type="tile";res._.fillpos=[x,y];res._.fillsize=[w,h];node.appendChild(fill);setCoords(res,1,1,0,0,0);return res;};R._engine.text=function(vml,x,y,text){var el=createNode("shape"),path=createNode("path"),o=createNode("textpath");x=x||0;y=y||0;text=text||"";path.v=R.format("m{0},{1}l{2},{1}",round(x*zoom),round(y*zoom),round(x*zoom)+1);path.textpathok=true;o.string=Str(text);o.on=true;el.style.cssText=cssDot;el.coordsize=zoom+S+zoom;el.coordorigin="0 0";var p=new Element(el,vml),attr={fill:"#000",stroke:"none",font:R._availableAttrs.font,text:text};p.shape=el;p.path=path;p.textpath=o;p.type="text";p.attrs.text=Str(text);p.attrs.x=x;p.attrs.y=y;p.attrs.w=1;p.attrs.h=1;setFillAndStroke(p,attr);el.appendChild(o);el.appendChild(path);vml.canvas.appendChild(el);var skew=createNode("skew");skew.on=true;el.appendChild(skew);p.skew=skew;p.transform(E);return p;};R._engine.setSize=function(width,height){var cs=this.canvas.style;this.width=width;this.height=height;width==+width&&(width+="px");height==+height&&(height+="px");cs.width=width;cs.height=height;cs.clip="rect(0 "+width+" "+height+" 0)";if(this._viewBox){R._engine.setViewBox.apply(this,this._viewBox);}
return this;};R._engine.setViewBox=function(x,y,w,h,fit){R.eve("raphael.setViewBox",this,this._viewBox,[x,y,w,h,fit]);var width=this.width,height=this.height,size=1/mmax(w/width,h/height),H,W;if(fit){H=height/h;W=width/w;if(w*H<width){x-=(width-w*H)/2/H;}
if(h*W<height){y-=(height-h*W)/2/W;}}
this._viewBox=[x,y,w,h,!!fit];this._viewBoxShift={dx:-x,dy:-y,scale:size};this.forEach(function(el){el.transform("...");});return this;};var createNode;R._engine.initWin=function(win){var doc=win.document;doc.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!doc.namespaces.rvml&&doc.namespaces.add("rvml","urn:schemas-microsoft-com:vml");createNode=function(tagName){return doc.createElement('<rvml:'+tagName+' class="rvml">');};}catch(e){createNode=function(tagName){return doc.createElement('<'+tagName+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">');};}};R._engine.initWin(R._g.win);R._engine.create=function(){var con=R._getContainer.apply(0,arguments),container=con.container,height=con.height,s,width=con.width,x=con.x,y=con.y;if(!container){throw new Error("VML container not found.");}
var res=new R._Paper,c=res.canvas=R._g.doc.createElement("div"),cs=c.style;x=x||0;y=y||0;width=width||512;height=height||342;res.width=width;res.height=height;width==+width&&(width+="px");height==+height&&(height+="px");res.coordsize=zoom*1e3+S+zoom*1e3;res.coordorigin="0 0";res.span=R._g.doc.createElement("span");res.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;";c.appendChild(res.span);cs.cssText=R.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",width,height);if(container==1){R._g.doc.body.appendChild(c);cs.left=x+"px";cs.top=y+"px";cs.position="absolute";}else{if(container.firstChild){container.insertBefore(c,container.firstChild);}else{container.appendChild(c);}}
res.renderfix=function(){};return res;};R.prototype.clear=function(){R.eve("raphael.clear",this);this.canvas.innerHTML=E;this.span=R._g.doc.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas.appendChild(this.span);this.bottom=this.top=null;};R.prototype.remove=function(){R.eve("raphael.remove",this);this.canvas.parentNode.removeChild(this.canvas);for(var i in this){this[i]=typeof this[i]=="function"?R._removedFactory(i):null;}
return true;};var setproto=R.st;for(var method in elproto)if(elproto[has](method)&&!setproto[has](method)){setproto[method]=(function(methodname){return function(){var arg=arguments;return this.forEach(function(el){el[methodname].apply(el,arg);});};})(method);}})();oldRaphael.was?(g.win.Raphael=R):(Raphael=R);return R;}));!function(a,b){function c(c,j,k){var n=[];j=1==j?{entropy:!0}:j||{};var s=g(f(j.entropy?[c,i(a)]:null==c?h():c,3),n),t=new d(n),u=function(){for(var a=t.g(m),b=p,c=0;q>a;)a=(a+c)*l,b*=l,c=t.g(1);for(;a>=r;)a/=2,b/=2,c>>>=1;return(a+c)/b};return u.int32=function(){return 0|t.g(4)},u.quick=function(){return t.g(4)/4294967296},u["double"]=u,g(i(t.S),a),(j.pass||k||function(a,c,d,f){return f&&(f.S&&e(f,t),a.state=function(){return e(t,{})}),d?(b[o]=a,c):a})(u,s,"global"in j?j.global:this==b,j.state)}function d(a){var b,c=a.length,d=this,e=0,f=d.i=d.j=0,g=d.S=[];for(c||(a=[c++]);l>e;)g[e]=e++;for(e=0;l>e;e++)g[e]=g[f=s&f+a[e%c]+(b=g[e])],g[f]=b;(d.g=function(a){for(var b,c=0,e=d.i,f=d.j,g=d.S;a--;)b=g[e=s&e+1],c=c*l+g[s&(g[e]=g[f=s&f+b])+(g[f]=b)];return d.i=e,d.j=f,c})(l)}function e(a,b){return b.i=a.i,b.j=a.j,b.S=a.S.slice(),b}function f(a,b){var c,d=[],e=typeof a;if(b&&"object"==e)for(c in a)try{d.push(f(a[c],b-1))}catch(g){}return d.length?d:"string"==e?a:a+"\0"}function g(a,b){for(var c,d=a+"",e=0;e<d.length;)b[s&e]=s&(c^=19*b[s&e])+d.charCodeAt(e++);return i(b)}function h(){try{if(j)return i(j.randomBytes(l));var b=new Uint8Array(l);return(k.crypto||k.msCrypto).getRandomValues(b),i(b)}catch(c){var d=k.navigator,e=d&&d.plugins;return[+new Date,k,e,k.screen,i(a)]}}function i(a){return String.fromCharCode.apply(0,a)}var j,k=this,l=256,m=6,n=52,o="random",p=b.pow(l,m),q=b.pow(2,n),r=2*q,s=l-1;if(b["seed"+o]=c,g(b.random(),a),"object"==typeof module&&module.exports){module.exports=c;try{j=require("crypto")}catch(t){}}else"function"==typeof define&&define.amd&&define(function(){return c})}([],Math);(function(){window.obj2str=function(obj,indent,recursion_limit){var key,pad,pre,str,val;if(indent==null){indent=0;}
if(recursion_limit==null){recursion_limit=5;}
if(recursion_limit<0){return'...';}else if((obj!=null)&&(typeof obj==='object')){if(obj['toString']instanceof Function){return obj.toString();}else{pre=(indent>0?"\n":"");pad=string_pad('',3*indent," ");str=[];for(key in obj){val=obj[key];str.push(""+pad+key+":"+(obj2str(val,indent+1,recursion_limit-1)));}
return pre+str.join("\n");}}else{return obj;}};window.get_class=function(obj){if(obj!=null){return obj.constructor.name;}else{return null;}};window.copy_object=function(x,deep){var j,key,len,results,val,y;if(deep==null){deep=false;}
switch(get_class(x)){case'Object':if(deep){y={};for(key in x){val=x[key];y[key]=copy_object(val,true);}
return y;}else{return extend_object({},x);}
break;case'Array':if(deep){results=[];for(j=0,len=x.length;j<len;j++){val=x[j];results.push(copy_object(val,true));}
return results;}else{return x.slice(0);}
break;default:if((typeof x==='object')&&x['copy']instanceof Function){return x.copy();}else{return x;}}};window.extend_object=function(obj1,obj2){var key,val;for(key in obj2){val=obj2[key];obj1[key]=val;}
return obj1;};window.merge_object=function(obj1,obj2){return extend_object(copy_object(obj1),obj2);};window.object_extract=function(obj,key){var x;x=obj[key];delete obj[key];return x;};window.object_remove=function(obj,key,copy){if(copy==null){copy=true;}
if(copy){obj=copy_object(obj);}
delete obj[key];return obj;};window.fill_object=function(x,value){var j,key,len,obj,results;if(Array.isArray(x)){obj={};for(j=0,len=x.length;j<len;j++){key=x[j];obj[key]=value;}
return obj;}else{results=[];for(key in x){results.push(x[key]=value);}
return results;}};window.equals=function(x,y){var idx,j,ref;if(Array.isArray(x)&&Array.isArray(y)){if(x.length===y.length){for(idx=j=0,ref=x.length-1;0<=ref?j<=ref:j>=ref;idx=0<=ref?++j:--j){if(!equals(x[idx],y[idx])){return false;}}
return true;}else{return false;}}else{return x===y;}};window.fill_array=function(x,value){var idx,j,ref,results;if(Array.isArray(x)){results=[];for(idx=j=0,ref=x.length;0<=ref?j<=ref:j>=ref;idx=0<=ref?++j:--j){results.push(x[idx]=value);}
return results;}else{return x=(function(){var k,ref1,results1;results1=[];for(k=1,ref1=x;1<=ref1?k<=ref1:k>=ref1;1<=ref1?k++:k--){results1.push(value);}
return results1;})();}};window.force_array=function(a){if((a!=null)&&!Array.isArray(a)){return[a];}else{return a;}};window.find=function(x,v,limit){var e,f,i,j,len;if(limit==null){limit=Infinity;}
f=[];if(limit===0){return f;}
for(i=j=0,len=x.length;j<len;i=++j){e=x[i];if(!(equals(e,v))){continue;}
f.push(i);if(f.length===limit){break;}}
return f;};window.set_diff=function(x,d){var e,j,len,results;x=force_array(x);d=force_array(d);results=[];for(j=0,len=x.length;j<len;j++){e=x[j];if(find(d,e).length===0){results.push(e);}}
return results;};window.array_swap=function(x,idx1,idx2){var ref;ref=[x[idx2],x[idx1]],x[idx1]=ref[0],x[idx2]=ref[1];return x;};window.array_reorder=function(x,idx){var i,j,k,n,ref,ref1,x_new;n=x.length;x_new=new Array(n);for(i=j=0,ref=n-1;0<=ref?j<=ref:j>=ref;i=0<=ref?++j:--j){x_new[idx[i]]=x[i];}
for(i=k=0,ref1=n-1;0<=ref1?k<=ref1:k>=ref1;i=0<=ref1?++k:--k){x[i]=x_new[i];}
return x;};window.pick_from=function(x){x=force_array(x);return x[random_int(0,x.length-1)];};window.array_randomize=function(x,rng){var idx,idx_rand;if(rng==null){rng=Math.random;}
idx=x.length-1;while(idx!==0){idx_rand=random_int(0,idx,rng);array_swap(x,idx,idx_rand);idx--;}
return x;};window.array_sum=function(x,idx_from,idx_to){var idx,j,ref,ref1,s;if(idx_from==null){idx_from=0;}
if(idx_to==null){idx_to=null;}
s=0;for(idx=j=ref=idx_from,ref1=idx_to!=null?idx_to:x.length-1;ref<=ref1?j<=ref1:j>=ref1;idx=ref<=ref1?++j:--j){s+=x[idx];}
return s;};window.array_prod=function(x,idx_from,idx_to){var idx,j,m,ref,ref1;if(idx_from==null){idx_from=0;}
if(idx_to==null){idx_to=null;}
m=1;for(idx=j=ref=idx_from,ref1=idx_to!=null?idx_to:x.length-1;ref<=ref1?j<=ref1:j>=ref1;idx=ref<=ref1?++j:--j){m*=x[idx];}
return m;};window.array_mean=function(x){return array_sum(x)/x.length;};window.array_add=function(a,b){var idx,j,ref,results;results=[];for(idx=j=0,ref=a.length-1;0<=ref?j<=ref:j>=ref;idx=0<=ref?++j:--j){results.push(a[idx]+b[idx]);}
return results;};window.array_subtract=function(a,b){var idx,j,ref,results;results=[];for(idx=j=0,ref=a.length-1;0<=ref?j<=ref:j>=ref;idx=0<=ref?++j:--j){results.push(a[idx]-b[idx]);}
return results;};window.array_multiply=function(a,b){var idx,j,k,l,ref,ref1,ref2,results,results1,results2;if(Array.isArray(a)){if(Array.isArray(b)){results=[];for(idx=j=0,ref=a.length-1;0<=ref?j<=ref:j>=ref;idx=0<=ref?++j:--j){results.push(a[idx]*b[idx]);}
return results;}else{results1=[];for(idx=k=0,ref1=a.length-1;0<=ref1?k<=ref1:k>=ref1;idx=0<=ref1?++k:--k){results1.push(a[idx]*b);}
return results1;}}else{if(Array.isArray(b)){results2=[];for(idx=l=0,ref2=b.length-1;0<=ref2?l<=ref2:l>=ref2;idx=0<=ref2?++l:--l){results2.push(a*b[idx]);}
return results2;}else{return a*b;}}};window.array_divide=function(a,b){var idx,j,k,l,ref,ref1,ref2,results,results1,results2;if(Array.isArray(a)){if(Array.isArray(b)){results=[];for(idx=j=0,ref=a.length-1;0<=ref?j<=ref:j>=ref;idx=0<=ref?++j:--j){results.push(a[idx]/b[idx]);}
return results;}else{results1=[];for(idx=k=0,ref1=a.length-1;0<=ref1?k<=ref1:k>=ref1;idx=0<=ref1?++k:--k){results1.push(a[idx]/b);}
return results1;}}else{if(Array.isArray(b)){results2=[];for(idx=l=0,ref2=b.length-1;0<=ref2?l<=ref2:l>=ref2;idx=0<=ref2?++l:--l){results2.push(a/b[idx]);}
return results2;}else{return a/b;}}};window.rotate=function(p,theta,about){var a,cs,sn,x,y;if(about==null){about=[0,0];}
a=Math.PI*theta/180;cs=Math.cos(a);sn=Math.sin(a);x=p[0]-about[0];y=p[1]-about[1];return p=[x*cs-y*sn+about[0],x*sn+y*cs+about[1]];};window.string_pad=function(x,n,chr){if(chr==null){chr='0';}
while((''+x).length<n){x=chr+x;}
return x;};window.capitalize=function(str){return str.charAt(0).toUpperCase()+str.slice(1);};window.string_scramble=function(str){str=str.split('');array_randomize(str);return str.join('');};window.divisors=function(n,only_small){var div_large,div_small,i,i_complement,j,n_root,ref;if(only_small==null){only_small=false;}
div_small=[1];div_large=[n];n_root=Math.floor(Math.sqrt(n));for(i=j=2,ref=n_root;2<=ref?j<=ref:j>=ref;i=2<=ref?++j:--j){if(n%i===0){div_small.push(i);if(!only_small){i_complement=n/i;if(i_complement!==i){div_large.push(i_complement);}}}}
if(only_small){return div_small;}else{return div_small.concat(div_large.reverse());}};window.sqrtish=function(n,require_divisors){var col,cr,d1,d2,diff,diff_min,i,iMax,j,k,rc,ref,ref1,results,row,score,x;if(require_divisors==null){require_divisors=true;}
if(require_divisors){d1=divisors(n,true);d2=array_divide(n,d1);diff=(function(){var j,len,ref,results;ref=array_subtract(d1,d2);results=[];for(j=0,len=ref.length;j<len;j++){x=ref[j];results.push(Math.abs(x));}
return results;})();diff_min=Math.min.apply(Math,diff);i=find(diff,diff_min,1);return[Math.min(d1[i],d2[i]),Math.max(d1[i],d2[i])];}else{rc=(function(){results=[];for(var j=1,ref=Math.max(1,Math.floor(Math.sqrt(n)));1<=ref?j<=ref:j>=ref;1<=ref?j++:j--){results.push(j);}
return results;}).apply(this);cr=(function(){var k,len,results1;results1=[];for(k=0,len=rc.length;k<len;k++){x=rc[k];results1.push(Math.max(1,Math.ceil(n/x)));}
return results1;})();score=(function(){var k,ref1,results1;results1=[];for(i=k=0,ref1=rc.length-1;0<=ref1?k<=ref1:k>=ref1;i=0<=ref1?++k:--k){results1.push(1/((1+rc[i]*cr[i]-n)*Math.pow(1+cr[i]-rc[i],3)));}
return results1;})();iMax=0;for(i=k=1,ref1=score.length-1;1<=ref1?k<=ref1:k>=ref1;i=1<=ref1?++k:--k){if(score[i]>score[iMax]){iMax=i;}}
row=Math.min(rc[iMax],cr[iMax]);col=Math.max(rc[iMax],cr[iMax]);return[row,col];}};window.random_int=function(mn,mx,rng){if(rng==null){rng=Math.random;}
return Math.floor(rng()*(mx-mn+1))+mn;};window.is_even=function(x){return(x%2)===0;};window.is_odd=function(x){return((x-1)%2)===0;};}).call(this);(function(){var Experiment,bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)return i;}return-1;};window.Experiment=Experiment=(function(){var paper;Experiment.prototype.debug=false;Experiment.prototype.csrf=null;Experiment.prototype.subject=null;Experiment.prototype.container=null;paper=null;Experiment.prototype.background=null;Experiment.prototype.seed=null;Experiment.prototype.width=function(){return this.paper.width;};Experiment.prototype.height=function(){return this.paper.height;};Experiment.prototype.clear=function(){return this.paper.clear();};Experiment.prototype._default_data_url='/data/';function Experiment(options){var ref;if(options==null){options=null;}
this.Trial=bind(this.Trial,this);this.Show=bind(this.Show,this);this.Do=bind(this.Do,this);this.Input=bind(this.Input,this);this.Data=bind(this.Data,this);this.showObject=bind(this.showObject,this);options=merge_object({debug:false,csrf:null,data_url:this._default_data_url,subject:null,container:'experiment',background:null,images:[],loadimages:false,fixation:["Circle",[{color:"red",r:5}]],seed:null},options!=null?options:{});this.debug=options.debug;this.csrf=options.csrf;this.subject=(ref=options.subject)!=null?ref:this.csrf;if(get_class(options.container)==='String'){this.container=$("\#"+options.container);}else{this.container=options.container;}
this.paper=Raphael(this.container.attr('id'));this.container.attr("tabindex",0);this.container.focus();this.time=this.Time();this.color=this.Color();this.parameter=this.Parameter();this.data=this.Data({url:options.data_url});this.input=this.Input();this["do"]=this.Do();this.show=this.Show();this.trial=this.Trial();if(this.seed==null){this.seed=this.time.now();}
if(this.seed!==false){Math.seedrandom(this.seed);}
if(options.background!=null){this.background=this.show.Rectangle({color:options.background,width:this.width(),height:this.height()});}
$(window).on('beforeunload',function(e){return e.returnValue='This will exit the experiment. Are you sure?';});}
Experiment.prototype.showObject=function(obj){console.log(obj);return $(document.body).append("<div style='position:absolute;left:0;top:0'>"+(JSON.stringify(obj))+"</div>");};Experiment.prototype.Class=window.ExperimentClass=(function(){var _ready_queue;ExperimentClass.prototype.root=null;ExperimentClass.prototype._ready=false;_ready_queue=null;function ExperimentClass(root,set_ready){if(set_ready==null){set_ready=true;}
this.root=root;if(set_ready){this.ready();}}
ExperimentClass.prototype.ready=function(f){if(f==null){f=null;}
if(f!=null){if(this._ready){f(this);}else{if(this._ready_queue==null){this._ready_queue=[];}
this._ready_queue.push(f);}}else{this._ready=true;if(this._ready_queue!=null){while(this._ready_queue.length){this._ready_queue.shift()(this);}
this._ready_queue=null;}}
return this;};return ExperimentClass;})();Experiment.prototype.Time=function(){return new this.ClassTime(this);};Experiment.prototype.ClassTime=window.ExperimentClassTime=(function(superClass){extend(ExperimentClassTime,superClass);function ExperimentClassTime(){return ExperimentClassTime.__super__.constructor.apply(this,arguments);}
ExperimentClassTime.prototype.now=function(){return new Date().getTime();};ExperimentClassTime.prototype.pause=function(ms){var results,tStart;tStart=this.now();results=[];while(this.now()<tStart+ms){results.push(null);}
return results;};return ExperimentClassTime;})(ExperimentClass);Experiment.prototype.Color=function(){return new this.ClassColor(this);};Experiment.prototype.ClassColor=window.ExperimentClassColor=(function(superClass){extend(ExperimentClassColor,superClass);ExperimentClassColor.prototype.colors=null;function ExperimentClassColor(root){this.generator=bind(this.generator,this);ExperimentClassColor.__super__.constructor.call(this,root);this.colors={};this.colors['default']=['red','blue','orange','limegreen','orangered','magenta'];this.colors['full']=['crimson','red','tomato','orangered','orange','gold','yellow','chartreuse','lime','limegreen','springgreen','aqua','turquoise','deepskyblue','blue','darkviolet','magenta','deeppink'];this.colors['difficulty']=['blue','limegreen','gold','orange','red'];}
ExperimentClassColor.prototype.col2str=function(color,a,brightness){if(a==null){a=1;}
if(brightness==null){brightness=1;}
color=Raphael.color(color);return"rgba("+(color.r*brightness)+","+(color.g*brightness)+","+(color.b*brightness)+","+a+")";};ExperimentClassColor.prototype.pick=function(color_set,interpolate){if(color_set==null){color_set='default';}
if(interpolate==null){interpolate=false;}
if(interpolate){return this.blend(this.colors[color_set],Math.random());}else{return pick_from(this.colors[color_set]);}};ExperimentClassColor.prototype.blend=function(color_set,f){var b,col_from,col_to,f_blend,g,idx_blend,idx_from,idx_to,num_colors,r;if(color_set==null){color_set='default';}
num_colors=this.colors[color_set].length;idx_blend=Math.max(0,Math.min(num_colors-1,f*(num_colors-1)));idx_from=Math.floor(idx_blend);idx_to=Math.min(num_colors-1,idx_from+1);f_blend=idx_blend-idx_from;col_from=Raphael.color(this.colors[colors_set][idx_from]);col_to=Raphael.color(this.colors[color_set][idx_to]);r=(1-f_blend)*col_from.r+f_blend*col_to.r;g=(1-f_blend)*col_from.g+f_blend*col_to.g;b=(1-f_blend)*col_from.b+f_blend*col_to.b;return Raphael.color("rgb("+r+","+g+","+b+")");};ExperimentClassColor.prototype.generator=function(color_set){if(color_set==null){color_set='default';}
return new this.ClassColorGenerator(this,color_set);};ExperimentClassColor.prototype.ClassColorGenerator=window.ExperimentClassColorGenerator=(function(){ExperimentClassColorGenerator.prototype._idx=-1;ExperimentClassColorGenerator.prototype._colors=null;function ExperimentClassColorGenerator(parent,color_set){this._colors=parent.colors[color_set];}
ExperimentClassColorGenerator.prototype.next=function(){this._idx=(this._idx+1)%this._colors.length;return this._colors[this._idx];};return ExperimentClassColorGenerator;})();return ExperimentClassColor;})(ExperimentClass);Experiment.prototype.Parameter=function(){return new this.ClassParameter(this);};Experiment.prototype.ClassParameter=window.ExperimentClassParameter=(function(superClass){extend(ExperimentClassParameter,superClass);function ExperimentClassParameter(){this.cycler=bind(this.cycler,this);return ExperimentClassParameter.__super__.constructor.apply(this,arguments);}
ExperimentClassParameter.prototype.Base=function(values){if(values==null){values=null;}
return new this.ClassParameterBase(this.root,values);};ExperimentClassParameter.prototype.ClassParameterBase=window.ExperimentClassParameterBase=(function(superClass1){extend(ExperimentClassParameterBase,superClass1);ExperimentClassParameterBase.prototype._keys=null;function ExperimentClassParameterBase(root,values){var key,val;ExperimentClassParameterBase.__super__.constructor.call(this,root);this._keys=[];if(values instanceof this.constructor){values=values.toObject();}
if(values!=null){for(key in values){val=values[key];this._keys.push(key);this[key]=val;}}}
ExperimentClassParameterBase.prototype._addParameter=function(key,defaults,options){if(this[key]==null){options=merge_object({defaults:defaults,exclude:null,postprocess:null},options!=null?options:{});this._keys.push(key);this[key]=this._pickValue(options);if(options.postprocess!=null){return this[key]=options.postprocess(this[name]);}}};ExperimentClassParameterBase.prototype._pickValue=function(options){var exclude,values;if(options.defaults instanceof Function){values=options.defaults();}else{values=options.defaults;}
if(options.exclude!=null){if(options.exclude instanceof Function){exclude=options.exclude();}else{exclude=options.exclude;}
values=set_diff(values,exclude);}
return pick_from(values);};ExperimentClassParameterBase.prototype.copy=function(){return new this.constructor(this.root,this.toObject());};ExperimentClassParameterBase.prototype.toObject=function(){var j,key,len,obj,ref;obj={};ref=this._keys;for(j=0,len=ref.length;j<len;j++){key=ref[j];if(this[key]instanceof ExperimentClassParameterBase){obj[key]=this[key].toObject();}else{obj[key]=this[key];}}
return obj;};ExperimentClassParameterBase.prototype.toString=function(){return obj2str(this.toObject());};return ExperimentClassParameterBase;})(ExperimentClass);ExperimentClassParameter.prototype.cycler=function(values,options){if(options==null){options=null;}
return new this.ClassParameterCycler(values,options);};ExperimentClassParameter.prototype.ClassParameterCycler=window.ExperimentClassParameterCycler=(function(){ExperimentClassParameterCycler.prototype._idx=null;ExperimentClassParameterCycler.prototype._order=null;ExperimentClassParameterCycler.prototype._values=null;ExperimentClassParameterCycler.prototype._rng=null;ExperimentClassParameterCycler.prototype._restrict_iterations=0;function ExperimentClassParameterCycler(values,options){var j,ref,results;if(options==null){options={};}
if(options.rng==null){options.rng=Math.random;}
this._rng=options.rng;this._values=copy_object(values);this._order=(function(){results=[];for(var j=0,ref=this._values.length-1;0<=ref?j<=ref:j>=ref;0<=ref?j++:j--){results.push(j);}
return results;}).apply(this);this._generate_order();}
ExperimentClassParameterCycler.prototype.next=function(options){var idx,next_value;if(options==null){options=null;}
if(options==null){options={};}
if(options.restrict==null){options.restrict=null;}
idx=this._order[this._idx++];if(this._idx===this._values.length){this._generate_order();}
next_value=this._values[idx];if((options.restrict!=null)&&!(indexOf.call(options.restrict,next_value)>=0)){this._restrict_iterations++;if(this._restrict_iterations>this._order.length){throw'cannot satisfy restriction';}
return this.next(options);}else{this._restrict_iterations=0;return next_value;}};ExperimentClassParameterCycler.prototype._generate_order=function(){this._idx=0;return array_randomize(this._order,this._rng);};return ExperimentClassParameterCycler;})();ExperimentClassParameter.prototype.generate=function(num,param_values,options,param_cyclers){var aux_param_cycler,current_num,current_value,excluded_sub_param_values,idx,j,key,leftover,leftover_value,len,len1,m,num_balanced,num_leftover,num_per_value,num_values,o,p,params,params_by_value,ref,ref1,ref2,ref3,ref4,sub_order,sub_param_values,top_key,top_values,u,valid_values,values;if(options==null){options={};}
if(param_cyclers==null){param_cyclers=null;}
if(options==null){options={};}
if(options.order==null){options.order=Object.keys(param_values);}
if(options.aux_param_values==null){options.aux_param_values=null;}
if(options.randomize==null){options.randomize=true;}
if(options.mutually_exclusive==null){options.mutually_exclusive=null;}
if(options.rng==null){options.rng=Math.random;}
if(num===0){return[];}else if(options.order.length===0){return(function(){var j,ref,results;results=[];for(idx=j=0,ref=num-1;0<=ref?j<=ref:j>=ref;idx=0<=ref?++j:--j){results.push({});}
return results;})();}
if(param_cyclers==null){param_cyclers={};for(key in param_values){values=param_values[key];param_cyclers[key]=this.cycler(values,{rng:options.rng});}}
top_key=options.order[0];top_values=param_values[top_key];num_values=top_values.length;num_balanced=Math.floor(num/num_values);num_leftover=num-num_balanced*num_values;num_per_value=fill_object(top_values,num_balanced);if(num_leftover>0){for(leftover=j=1,ref=num_leftover;1<=ref?j<=ref:j>=ref;leftover=1<=ref?++j:--j){leftover_value=param_cyclers[top_key].next({restrict:top_values});num_per_value[leftover_value]++;}}
sub_param_values=object_remove(param_values,top_key);sub_order=options.order.slice(1);params_by_value=new Array(num_values);for(idx=m=0,ref1=num_values-1;0<=ref1?m<=ref1:m>=ref1;idx=0<=ref1?++m:--m){current_value=param_values[top_key][idx];current_num=num_per_value[idx];excluded_sub_param_values=this._excludeParameterValues(sub_param_values,top_key,current_value,options.mutually_exclusive);params_by_value[idx]=this.generate(num_per_value[current_value],excluded_sub_param_values,{order:sub_order,randomize:options.randomize,mutually_exclusive:options.mutually_exclusive,rng:options.rng},param_cyclers);ref2=params_by_value[idx];for(o=0,len=ref2.length;o<len;o++){p=ref2[o];p[top_key]=current_value;}}
params=(ref3=[]).concat.apply(ref3,params_by_value);if(options.aux_param_values!=null){ref4=options.aux_param_values;for(key in ref4){values=ref4[key];aux_param_cycler=this.cycler(values,{rng:options.rng});for(u=0,len1=params.length;u<len1;u++){p=params[u];valid_values=this._getValidParameterValues(key,values,p,options.mutually_exclusive);p[key]=aux_param_cycler.next({restrict:valid_values});}}}
if(options.randomize){array_randomize(params,options.rng);}
return params;};ExperimentClassParameter.prototype._excludeParameterValues=function(param_values,exclude_key,exclude_value,mutually_exclusive){var j,len,me_pair,other_key;if(mutually_exclusive!=null){param_values=copy_object(param_values,true);for(j=0,len=mutually_exclusive.length;j<len;j++){me_pair=mutually_exclusive[j];if(indexOf.call(me_pair,exclude_key)>=0){other_key=set_diff(me_pair,exclude_key)[0];if(other_key in param_values){param_values[other_key]=set_diff(param_values[other_key],exclude_value);}}}}
return param_values;};ExperimentClassParameter.prototype._getValidParameterValues=function(key,values,param,mutually_exclusive){var j,len,me_pair,other_key;if(mutually_exclusive!=null){values=copy_object(values);for(j=0,len=mutually_exclusive.length;j<len;j++){me_pair=mutually_exclusive[j];if(indexOf.call(me_pair,key)>=0){other_key=set_diff(me_pair,key)[0];if(other_key in param){values=set_diff(values,param[other_key]);}}}}
return values;};ExperimentClassParameter.prototype.countValues=function(params,param_values,options){var all_count,count,j,key,len,len1,m,p,ref,ref1,ref2,sub_key,sub_order,sub_params,value;if(options==null){options={};}
if(options.order==null){options.order=Object.keys(param_values);}
if(options.order.length===0){return params.length;}
count={_all:params.length};ref=options.order;for(j=0,len=ref.length;j<len;j++){key=ref[j];sub_order=(function(){var len1,m,ref1,results;ref1=options.order;results=[];for(m=0,len1=ref1.length;m<len1;m++){sub_key=ref1[m];if(sub_key!==key){results.push(sub_key);}}
return results;})();count[key]={_each:[]};ref1=param_values[key];for(m=0,len1=ref1.length;m<len1;m++){value=ref1[m];sub_params=(function(){var len2,o,results;results=[];for(o=0,len2=params.length;o<len2;o++){p=params[o];if(p[key]===value){results.push(p);}}
return results;})();count[key][value]=this.countValues(sub_params,param_values,{order:sub_order});all_count=(ref2=count[key][value]._all)!=null?ref2:count[key][value];count[key]._each.push(all_count);}}
return count;};return ExperimentClassParameter;})(ExperimentClass);Experiment.prototype.Data=function(options){if(options==null){options=null;}
return new this.ClassData(this,options);};Experiment.prototype.ClassData=window.ExperimentClassData=(function(superClass){extend(ExperimentClassData,superClass);ExperimentClassData.prototype.url=null;ExperimentClassData.prototype.timeout=null;ExperimentClassData.prototype.local=null;ExperimentClassData.prototype.store=null;ExperimentClassData.prototype.local_functions=null;function ExperimentClassData(root,options){this.callError=bind(this.callError,this);this.callSuccess=bind(this.callSuccess,this);this.readError=bind(this.readError,this);this.writeError=bind(this.writeError,this);this.readSuccess=bind(this.readSuccess,this);this.writeSuccess=bind(this.writeSuccess,this);this.call=bind(this.call,this);this.read=bind(this.read,this);this.write=bind(this.write,this);this.ajax=bind(this.ajax,this);this._addCSRFToHeader=bind(this._addCSRFToHeader,this);if(options==null){options={};}
if(options.url==null){options.url=null;}
if(options.timeout==null){options.timeout=10000;}
if(options.local==null){options.local=options.url==null;}
if(this._local_functions==null){this._local_functions={};}
this.store={};this.url=options.url;this.timeout=options.timeout;this.local=options.local;ExperimentClassData.__super__.constructor.call(this,root);$.ajaxSetup({beforeSend:this._addCSRFToHeader});}
ExperimentClassData.prototype._csrfSafeMethod=function(method){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(method);};ExperimentClassData.prototype._addCSRFToHeader=function(xhr,settings){if(!this._csrfSafeMethod(settings.type)&&!settings.crossDomain){return xhr.setRequestHeader("X-CSRFToken",this.root.csrf);}};ExperimentClassData.prototype.ajax=function(data,options){var args,f_error,f_success,ref,result;if(options==null){options=null;}
if(options==null){options={};}
if(options.timeout==null){options.timeout=this.timeout;}
f_success=(function(_this){return function(result){return _this[data.action+"Success"](result,options);};})(this);f_error=(function(_this){return function(jqXHR,status,err){return _this[data.action+"Error"](status,err,options);};})(this);data.subject=this.root.subject;if(data.action==null){throw'no action specified';}
if(this.local){result={success:true,action:data.action,status:data.action};switch(data.action){case'write':result.key=data.key;result.value=JSON.parse(data.value);break;case'read':result.key=data.key;result.value=this.store[key];break;case'call':if(this._local_functions[data.f]!=null){args=JSON.parse(data.args);result.output=(ref=this._local_functions)[data.f].apply(ref,args);}else{throw data.f+" is not a valid function";}
end;break;default:throw'invalid action';}
return window.setTimeout(((function(_this){return function(){return f_success(result);};})(this)),0);}else{return $.ajax({type:'POST',url:this.url,data:data,success:f_success,error:f_error,timeout:options.timeout});}};ExperimentClassData.prototype.write=function(key,value,options){var data;if(options==null){options=null;}
data={action:'write',key:key,value:JSON.stringify(value)};return this.ajax(data,options);};ExperimentClassData.prototype.read=function(key,options){var data;if(options==null){options=null;}
data={action:'read',key:key};return this.ajax(data,options);};ExperimentClassData.prototype.call=function(f,args,options){var data;if(args==null){args=null;}
if(options==null){options=null;}
data={action:'call',f:f,args:JSON.stringify(force_array(args!=null?args:[]))};return this.ajax(data,options);};ExperimentClassData.prototype.writeSuccess=function(result,options){this.store[result.key]=result.value;if(options.success!=null){return options.success(result);}};ExperimentClassData.prototype.readSuccess=function(result,options){this.store[result.key]=result.value;if(options.success!=null){return options.success(result);}};ExperimentClassData.prototype.writeError=function(status,err,options){console.log('write error!');if(options.error!=null){return options.error(status,err);}};ExperimentClassData.prototype.readError=function(status,err,options){console.log('read error!');if(options.error!=null){return options.error(status,err);}};ExperimentClassData.prototype.callSuccess=function(result,options){if(options.success!=null){return options.success(result);}};ExperimentClassData.prototype.callError=function(status,err,options){console.log('call error!');if(options.error!=null){return options.error(status,err);}};return ExperimentClassData;})(ExperimentClass);Experiment.prototype.Input=function(options){if(options==null){options=null;}
return new this.ClassInput(this,options);};Experiment.prototype.ClassInput=window.ExperimentClassInput=(function(superClass){extend(ExperimentClassInput,superClass);ExperimentClassInput.prototype._event_handlers=null;ExperimentClassInput.prototype._keys=null;function ExperimentClassInput(root,options){var group_name,idx,j,key,len,n,ref,val;ExperimentClassInput.__super__.constructor.call(this,root);options=merge_object({'key_yes':'left','key_no':'right','key_2choice0':'left','key_2choice1':'right','key_4choice0':'left','key_4choice1':'up','key_4choice2':'right','key_4choice3':'down'},options!=null?options:{});this._keys={};for(key in options){val=options[key];if(key.startsWith('key_')){this._keys[key.substring(4)]=val;}}
ref=[2,4];for(j=0,len=ref.length;j<len;j++){n=ref[j];group_name=n+"choice";this._keys[group_name]=(function(){var m,ref1,results;results=[];for(idx=m=0,ref1=n-1;0<=ref1?m<=ref1:m>=ref1;idx=0<=ref1?++m:--m){results.push(group_name+idx);}
return results;})();}
this._event_handlers={key_down:[],mouse_down:[]};this.root.container.keydown((function(_this){return function(evt){return _this._handleKey(evt,'down');};})(this));this.root.container.mousedown((function(_this){return function(evt){return _this._handleMouse(evt,'down');};})(this));}
ExperimentClassInput.prototype.addHandler=function(type,options){var handler_type,ref,ref1;if(options==null){options=null;}
if(options==null){options={};}
if(options.f==null){options.f=null;}
if(options.expires==null){options.expires=0;}
switch(type){case'key':if(options.event==null){options.event='down';}
options.button=force_array(this.key2code((ref=options.button)!=null?ref:'any'));break;case'mouse':if(options.event==null){options.event='down';}
options.button=force_array(this.mouse2code((ref1=options.button)!=null?ref1:'any'));break;default:throw"invalid handler type";}
options.count=0;handler_type=type+"_"+options.event;return this._event_handlers[handler_type].push(options);};ExperimentClassInput.prototype.key2code=function(key){var j,k,len,results;if(Array.isArray(key)){results=[];for(j=0,len=key.length;j<len;j++){k=key[j];results.push(this.key2code(k));}
return results;}else{switch(key){case'any':return'any';case'enter':return 13;case'space':return 32;case'left':return 37;case'up':return 38;case'right':return 39;case'down':return 40;default:if(get_class(key)==='String'){if(key in this._keys){return this.key2code(this._keys[key]);}else{return key.toUpperCase().charCodeAt(0);}}else{return key;}}}};ExperimentClassInput.prototype.code2key=function(key,valid_keys,valid_codes){var idx_key,j,k,len,results;if(valid_keys==null){valid_keys=null;}
if(valid_codes==null){valid_codes=null;}
if((valid_codes==null)&&(valid_keys!=null)){valid_codes=(function(){var j,len,results;results=[];for(j=0,len=valid_keys.length;j<len;j++){k=valid_keys[j];results.push(this.key2code(k));}
return results;}).call(this);}
if(Array.isArray(key)){results=[];for(j=0,len=key.length;j<len;j++){k=key[j];results.push(this.code2key(k,valid_keys,valid_codes));}
return results;}else{if(valid_keys!=null){idx_key=find(valid_codes,key,1);if(idx_key.length){return valid_keys[idx_key[0]];}else{return null;}}else{switch(key){case'any':return'any';case 13:return'enter';case 32:return'space';case 37:return'left';case 38:return'up';case 39:return'right';case 40:return'down';default:return String.fromCharCode(key).toUpperCase();}}}};ExperimentClassInput.prototype.key2synonym=function(key){var j,k,len,results;if(Array.isArray(key)){results=[];for(j=0,len=key.length;j<len;j++){k=key[j];results.push(this.key2synonym(k));}
return results;}else{if(get_class(key)==='String'){if(key in this._keys){return this.key2synonym(this._keys[key]);}else{return key;}}else{return this.code2key(key);}}};ExperimentClassInput.prototype.key2description=function(key){key=force_array(key);if(indexOf.call(key,'any')>=0){return'any key';}else{key=this.key2synonym(key);if(key.length===1){return key[0];}else if(key.length>1){return key.slice(0,+(key.length-2)+1||9e9).join(', ')+' or '+key[key.length-1];}else{return'no key';}}};ExperimentClassInput.prototype.mouse2code=function(button){var b,j,len,results;if(Array.isArray(button)){results=[];for(j=0,len=button.length;j<len;j++){b=button[j];results.push(this.mouse2code);}
return results;}else{switch(button){case'any':return'any';case'left':return 1;case'middle':return 2;case'right':return 3;default:throw"invalid button";}}};ExperimentClassInput.prototype.code2mouse=function(button){var b,j,len,results;if(Array.isArray(button)){results=[];for(j=0,len=button.length;j<len;j++){b=button[j];results.push(this.code2mouse);}
return results;}else{switch(button){case'any':return'any';case 1:return'left';case 2:return'middle';case 3:return'right';default:throw'invalid button';}}};ExperimentClassInput.prototype._handleEvent=function(evt,handler_type,f_check_handler){var handler,handlers,idx,idx_remove,j,len,len1,m,results;handlers=this._event_handlers[handler_type];idx_remove=[];for(idx=j=0,len=handlers.length;j<len;idx=++j){handler=handlers[idx];if(f_check_handler(handler)){handler.f(evt);handler.count++;if(handler.expires!==0&&handler.count>=handler.expires){idx_remove.push(idx);}}}
results=[];for(m=0,len1=idx_remove.length;m<len1;m++){idx=idx_remove[m];results.push(handlers.splice(idx,1));}
return results;};ExperimentClassInput.prototype._handleKey=function(evt,event_type){var f_check_handler,handler_type;handler_type="key_"+event_type;f_check_handler=function(h){var ref;return(indexOf.call(h.button,'any')>=0)||(ref=evt.which,indexOf.call(h.button,ref)>=0);};return this._handleEvent(evt,handler_type,f_check_handler);};ExperimentClassInput.prototype._handleMouse=function(evt,event_type){var f_check_handler,handler_type;handler_type="mouse_"+event_type;f_check_handler=function(h){var ref;return(indexOf.call(h.button,'any')>=0)||(ref=h.button,indexOf.call(evt.which,ref)>=0);};return this._handleEvent(evt,handler_type,f_check_handler);};return ExperimentClassInput;})(ExperimentClass);Experiment.prototype.Do=function(){return new this.ClassDo(this);};Experiment.prototype.ClassDo=window.ExperimentClassDo=(function(superClass){extend(ExperimentClassDo,superClass);function ExperimentClassDo(){this.Sequence=bind(this.Sequence,this);this.Questionnaire=bind(this.Questionnaire,this);this.Action=bind(this.Action,this);return ExperimentClassDo.__super__.constructor.apply(this,arguments);}
ExperimentClassDo.prototype.Action=function(f){return new this.ClassDoAction(this.root,f);};ExperimentClassDo.prototype.ClassDoAction=window.ExperimentClassDoAction=(function(superClass1){extend(ExperimentClassDoAction,superClass1);ExperimentClassDoAction.prototype.f=null;ExperimentClassDoAction.prototype.fire_time=null;ExperimentClassDoAction.prototype._callback_queue=null;function ExperimentClassDoAction(root,f){this.callback=bind(this.callback,this);this.fire=bind(this.fire,this);ExperimentClassDoAction.__super__.constructor.call(this,root);this.f=f;}
ExperimentClassDoAction.prototype.fire=function(){var y;this.fire_time=this.root.time.now();y=this.f();this.callback();return y;};ExperimentClassDoAction.prototype.callback=function(f){var idx,j,ref;if(f==null){f=null;}
if(f!=null){if(this._callback_queue==null){this._callback_queue=[];}
this._callback_queue.push(f);}else if(this._callback_queue!=null){for(idx=j=0,ref=this._callback_queue.length-1;0<=ref?j<=ref:j>=ref;idx=0<=ref?++j:--j){f=this._callback_queue[idx];if(f.fire instanceof Function){f.fire();}else{f();}}
this._callback_queue=null;}
return this;};return ExperimentClassDoAction;})(ExperimentClass);ExperimentClassDo.prototype.Questionnaire=function(key,q){return new this.ClassDoQuestionnaire(this.root,key,q);};ExperimentClassDo.prototype.ClassDoQuestionnaire=window.ExperimentClassDoQuestionnaire=(function(superClass1){extend(ExperimentClassDoQuestionnaire,superClass1);ExperimentClassDoQuestionnaire.prototype._key=null;ExperimentClassDoQuestionnaire.prototype._q=null;ExperimentClassDoQuestionnaire.prototype._idx=null;ExperimentClassDoQuestionnaire.prototype.result=null;function ExperimentClassDoQuestionnaire(root,key,q,options){this._goBack=bind(this._goBack,this);this._recordResponse=bind(this._recordResponse,this);this._setResponse=bind(this._setResponse,this);this._getResponse=bind(this._getResponse,this);this._error=bind(this._error,this);this._element=bind(this._element,this);this._htmlID=bind(this._htmlID,this);this._getNextItem=bind(this._getNextItem,this);this._getPreviousItem=bind(this._getPreviousItem,this);this._getItemNumber=bind(this._getItemNumber,this);this._getItemCount=bind(this._getItemCount,this);this._endQuestionnaire=bind(this._endQuestionnaire,this);this._startQuestionnaire=bind(this._startQuestionnaire,this);this._doStep=bind(this._doStep,this);this._do=bind(this._do,this);this.fire=bind(this.fire,this);this.callback=bind(this.callback,this);var f;f=this._do;this._key=key;this._q=q;this.result={t:{}};ExperimentClassDoQuestionnaire.__super__.constructor.call(this,root,f);}
ExperimentClassDoQuestionnaire.prototype.callback=function(f){if(f==null){f=null;}
if(f!=null){return ExperimentClassDoQuestionnaire.__super__.callback.call(this,(function(_this){return function(){return f(_this.result);};})(this));}else{return ExperimentClassDoQuestionnaire.__super__.callback.call(this);}};ExperimentClassDoQuestionnaire.prototype.fire=function(){this.fire_time=this.root.time.now();return this.f();};ExperimentClassDoQuestionnaire.prototype._do=function(){return this._startQuestionnaire();};ExperimentClassDoQuestionnaire.prototype._doStep=function(idx,do_items,stop_at){var c,do_next,el,index,input_value,j,key,len,len1,m,n,response,value;if(idx==null){idx=null;}
if(do_items==null){do_items=true;}
if(stop_at==null){stop_at=null;}
this._idx=Math.max(0,idx!=null?idx:this._idx+1);if(this._idx>=this._q.length){this._endQuestionnaire();return;}
key=this._q[this._idx].key;value=this._q[this._idx].value;do_next=true;switch(key){case'title':case'instruction':this._element(key).html(value);break;case'scale':el=this._element('response');el.text('');for(index=j=0,len=value.length;j<len;index=++j){response=value[index];input_value=index+1;el.append("<input type='radio' name='response' value='"+input_value+"'>"+input_value+" ("+response+")<br>");el.find("input[name=response][value="+input_value+"]").on('click',((function(_this){return function(v){return function(){return _this._recordResponse(v);};};})(this))(input_value));}
break;case'choice':el=this._element('response');el.text('');for(index=m=0,len1=value.length;m<len1;index=++m){response=value[index];input_value=index+1;el.append("<input type='radio' name='response' value='"+input_value+"'>"+response+"<br>");el.find("input[name=response][value="+input_value+"]").on('click',((function(_this){return function(v){return function(){return _this._recordResponse(v);};};})(this))(input_value));}
break;case'item':if(do_items){do_next=false;n=this._getItemNumber();c=this._getItemCount();this._error();this._element('back').toggle(n!==1);if(this._idx+1>=this._q.length){this._element('submit').prop('value','Submit Questionnaire');}else{this._element('submit').prop('value','Next');}
this._element('prompt').html(n+" of "+c+": "+value);this._setResponse();}
break;default:throw'invalid key';}
if(do_next&&((stop_at==null)||this._idx<stop_at)){return this._doStep(null,do_items,stop_at);}};ExperimentClassDoQuestionnaire.prototype._startQuestionnaire=function(){var body,c;this.result.t.start=this.root.time.now();c=this._getItemCount();this.result.response=Array(c);this.result.t.response=Array(c);body=$('body');body.append("<div class='questionnaire' id='"+(this._htmlID())+"'> <h1 id='"+(this._htmlID('title'))+"'></h1> <div class='instruction' id='"+(this._htmlID('instruction'))+"'></div> <div class='item' id='"+(this._htmlID('item'))+"'> <div class='prompt' id='"+(this._htmlID('prompt'))+"'></div> <div class='response' id='"+(this._htmlID('response'))+"'></div> </div> <div class='footer' id='"+(this._htmlID('footer'))+"'> <div class='error' id='"+(this._htmlID('error'))+"'></div> <input type='button' value='Back' id='"+(this._htmlID('back'))+"'> <input type='button' value='Next' id='"+(this._htmlID('submit'))+"'> </div> </div>");this._element('submit').on('click',(function(_this){return function(){var response;response=_this._getResponse();if(response!=null){_this._recordResponse(response);return _this._doStep(_this._idx+1);}else{return _this._error('null_response');}};})(this));this._element('back').on('click',(function(_this){return function(){return _this._goBack();};})(this));return this._doStep(0);};ExperimentClassDoQuestionnaire.prototype._endQuestionnaire=function(){this.result.t.end=this.root.time.now();this._element().remove();return this.callback();};ExperimentClassDoQuestionnaire.prototype._getItemCount=function(){var c,j,len,obj,ref;c=0;ref=this._q;for(j=0,len=ref.length;j<len;j++){obj=ref[j];if(obj.key==='item'){c++;}}
return c;};ExperimentClassDoQuestionnaire.prototype._getItemNumber=function(idx){var idx_item,j,len,n,obj,ref;if(idx==null){idx=null;}
if(idx==null){idx=this._idx;}
idx_item=this._getNextItem(idx-1);n=0;ref=this._q.slice(0,+idx_item+1||9e9);for(j=0,len=ref.length;j<len;j++){obj=ref[j];if(obj.key==='item'){n++;}}
return n;};ExperimentClassDoQuestionnaire.prototype._getPreviousItem=function(idx){var idx_prev,j,ref;if(idx==null){idx=null;}
if(idx==null){idx=this._idx;}
idx_prev=null;for(idx_prev=j=ref=idx-1;ref<=0?j<=0:j>=0;idx_prev=ref<=0?++j:--j){if(this._q[idx_prev].key==='item'){break;}}
return idx_prev;};ExperimentClassDoQuestionnaire.prototype._getNextItem=function(idx){var idx_next,j,ref,ref1;if(idx==null){idx=null;}
if(idx==null){idx=this._idx;}
idx_next=null;for(idx_next=j=ref=idx+1,ref1=this._q.length-1;ref<=ref1?j<=ref1:j>=ref1;idx_next=ref<=ref1?++j:--j){if(this._q[idx_next].key==='item'){break;}}
return idx_next;};ExperimentClassDoQuestionnaire.prototype._htmlID=function(el){if(el==null){el='questionnaire';}
switch(el){case'questionnaire':return el+"_"+this._key;default:return(this._htmlID())+"_"+el;}};ExperimentClassDoQuestionnaire.prototype._element=function(el){if(el==null){el='questionnaire';}
return $("#"+(this._htmlID(el)));};ExperimentClassDoQuestionnaire.prototype._error=function(error_type){var el;el=this._element('error');return el.text((function(){switch(error_type){case'null_response':return'You must choose a response.';default:return'';}})());};ExperimentClassDoQuestionnaire.prototype._getResponse=function(){var response;response=this._element('response').find('input[name=response]:checked').val();if(response!=null){return response=Number(response);}};ExperimentClassDoQuestionnaire.prototype._setResponse=function(){var idx,ref,response;idx=this._getItemNumber()-1;response=(ref=this.result.response[idx])!=null?ref:(this.root.debug?1:null);return this._element('response').find('input[name=response]').val([response]);};ExperimentClassDoQuestionnaire.prototype._recordResponse=function(response){var idx;idx=this._getItemNumber()-1;this.result.t.response[idx]=this.root.time.now();return this.result.response[idx]=response;};ExperimentClassDoQuestionnaire.prototype._goBack=function(){var idx_pre;idx_pre=this._getPreviousItem();this._doStep(0,false,idx_pre);return this._doStep(idx_pre);};return ExperimentClassDoQuestionnaire;})(ExperimentClassDoAction);ExperimentClassDo.prototype.Sequence=function(f,next,options){if(next==null){next=null;}
if(options==null){options=null;}
return new this.ClassDoSequence(this.root,f,next,options);};ExperimentClassDo.prototype.ClassDoSequence=window.ExperimentClassDoSequence=(function(superClass1){extend(ExperimentClassDoSequence,superClass1);ExperimentClassDoSequence.prototype.start_time=null;ExperimentClassDoSequence.prototype.step_time=null;ExperimentClassDoSequence.prototype.time_format=null;ExperimentClassDoSequence.prototype._actions=null;ExperimentClassDoSequence.prototype._next=null;ExperimentClassDoSequence.prototype._check_next=null;ExperimentClassDoSequence.prototype._check_next_f=null;ExperimentClassDoSequence.prototype._callback_queue=null;function ExperimentClassDoSequence(root,f,next,options){this.callback=bind(this.callback,this);this._checkNext=bind(this._checkNext,this);var f_callback,f_step,idx,j,num_step,ref,ref1;ExperimentClassDoSequence.__super__.constructor.call(this,root);if(options==null){options={};}
this.time_format=(ref=options.time_format)!=null?ref:'step';num_step=f.length;if(next==null){next=(function(){var j,ref1,results;results=[];for(j=0,ref1=num_step-1;0<=ref1?j<=ref1:j>=ref1;0<=ref1?j++:j--){results.push(null);}
return results;})();}
this._next=next;this._actions=Array(num_step-1);for(idx=j=0,ref1=num_step-1;0<=ref1?j<=ref1:j>=ref1;idx=0<=ref1?++j:--j){f_step=f[idx];f_callback=((function(_this){return function(i){return function(){return _this._processNext(i);};};})(this))(idx);if(next[idx]==='callback'){if(f_step instanceof this.root["do"].ClassDoAction){f_step.f=((function(_this){return function(fs,fc){return function(){return fs(fc);};};})(this))(f_step.f,f_callback);this._actions[idx]=f_step;}else{f_step=((function(_this){return function(fs,fc){return function(){return fs(fc);};};})(this))(f_step,f_callback);this._actions[idx]=this.root["do"].Action(f_step);}}else{if(f_step instanceof this.root["do"].ClassDoAction){this._actions[idx]=f_step.callback(f_callback);}else{this._actions[idx]=this.root["do"].Action(f_step).callback(f_callback);}}}}
ExperimentClassDoSequence.prototype.fire=function(){this.start_time=this.root.time.now();if(this._actions.length){this._actions[0].fire();}else{this.callback;}
return this;};ExperimentClassDoSequence.prototype._getDelayTime=function(time){var next_time;next_time=(function(){switch(this.time_format){case"step":return this.step_time+time;case"sequence":return this.start_time+time;case"absolute":return time;default:throw"invalid time format";}}).call(this);return Math.max(0,next_time-this.root.time.now());};ExperimentClassDoSequence.prototype._processNext=function(idx,next){var f_next,f_register_event;if(next==null){next=null;}
this.step_time=this._actions[idx].fire_time;if(idx===this._actions.length-1){f_next=this.callback;}else{f_next=this._actions[idx+1].fire;}
if(next==null){next=this._next[idx];}
if((next==null)||next==='callback'){return f_next();}else if(!isNaN(parseFloat(next))){return window.setTimeout(f_next,this._getDelayTime(next));}else if(get_class(next)==='String'){return this._processNext(idx,['key',{button:next}]);}else if(next instanceof Function){this._check_next=next;this._check_next_f=f_next;return this._timer=window.setInterval(this._checkNext,1);}else if(Array.isArray(next)&&next.length>0){switch(next[0]){case'key':case'mouse':f_register_event=(function(_this){return function(f){var f_user,options,ref,ref1;options=next.length>=2?next[1]:{};options.event=(ref=options.event)!=null?ref:'down';options.button=(ref1=options.button)!=null?ref1:'any';options.expires=1;if(options.f!=null){f_user=options.f;options.f=function(evt){f_user(evt);return f();};}else{options.f=function(evt){return f();};}
return _this.root.input.addHandler(next[0],options);};})(this);return this._processNext(idx,['event',f_register_event]);case'event':return next[1](f_next);case'lazy':return this._processNext(idx,next[1](this.root,idx));default:throw'invalid event';}}else{throw'invalid event';}};ExperimentClassDoSequence.prototype._checkNext=function(){if(this._check_next(this.start_time,this.step_time)){window.clearInterval(this._timer);return this._check_next_f();}};ExperimentClassDoSequence.prototype.callback=function(f){var args,idx,j,ref;if(f==null){f=null;}
if(f!=null){if(this._callback_queue==null){this._callback_queue=[];}
this._callback_queue.push(f);}else if(this._callback_queue!=null){args=this._getCallbackArgs();for(idx=j=0,ref=this._callback_queue.length-1;0<=ref?j<=ref:j>=ref;idx=0<=ref?++j:--j){f=this._callback_queue[idx];if(f.fire instanceof Function){f.fire.apply(f,args);}else{f.apply(null,args);}}
this._callback_queue=null;}
return this;};ExperimentClassDoSequence.prototype._getCallbackArgs=function(){return[];};return ExperimentClassDoSequence;})(ExperimentClass);return ExperimentClassDo;})(ExperimentClass);Experiment.prototype.Show=function(){return new this.ClassShow(this);};Experiment.prototype.ClassShow=window.ExperimentClassShow=(function(superClass){extend(ExperimentClassShow,superClass);function ExperimentClassShow(){this.Sequence=bind(this.Sequence,this);this.Test=bind(this.Test,this);this.Instruction=bind(this.Instruction,this);this.Choice=bind(this.Choice,this);this.Checkerboard=bind(this.Checkerboard,this);this.Image=bind(this.Image,this);this.X=bind(this.X,this);this.Shape=bind(this.Shape,this);this.Path=bind(this.Path,this);this.Text=bind(this.Text,this);this.Circle=bind(this.Circle,this);this.Square=bind(this.Square,this);this.Rectangle=bind(this.Rectangle,this);this.StimulusRing=bind(this.StimulusRing,this);this.StimulusGrid=bind(this.StimulusGrid,this);this.CompoundStimulus=bind(this.CompoundStimulus,this);this.Stimulus=bind(this.Stimulus,this);return ExperimentClassShow.__super__.constructor.apply(this,arguments);}
ExperimentClassShow.prototype.Stimulus=function(options){if(options==null){options=null;}
return new this.ClassShowStimulus(this.root,options);};ExperimentClassShow.prototype.ClassShowStimulus=window.ExperimentClassShowStimulus=(function(superClass1){extend(ExperimentClassShowStimulus,superClass1);ExperimentClassShowStimulus.prototype.element=null;ExperimentClassShowStimulus.prototype._defaults=null;ExperimentClassShowStimulus.prototype._option_variants=null;ExperimentClassShowStimulus.prototype._attr=null;ExperimentClassShowStimulus.prototype._show_state=true;ExperimentClassShowStimulus.prototype._rotation=0;ExperimentClassShowStimulus.prototype._scale=1;ExperimentClassShowStimulus.prototype._translation=[0,0];ExperimentClassShowStimulus.prototype._H_STRINGS=['width','x','cx','l','cl','lc','h'];ExperimentClassShowStimulus.prototype._V_STRINGS=['height','y','cy','t','ct','tc','v'];ExperimentClassShowStimulus.prototype.isH=function(type){return this._H_STRINGS.indexOf(type)!==-1;};ExperimentClassShowStimulus.prototype.isV=function(type){return this._V_STRINGS.indexOf(type)!==-1;};ExperimentClassShowStimulus.prototype.addc=function(x,type){if(type[0]==='c'){return"c"+x;}else{return x;}};ExperimentClassShowStimulus.prototype.type2wh=function(type){if(this.isH(type)){return'width';}else{return'height';}};ExperimentClassShowStimulus.prototype.type2xy=function(type){return this.addc((this.isH(type)?'x':'y'),type);};ExperimentClassShowStimulus.prototype.type2lt=function(type){return this.addc((this.isH(type)?'l':'t'),type);};ExperimentClassShowStimulus.prototype.type2hv=function(type){if(this.isH(type)){return'h';}else if(this.isV(type)){return'v';}else{return'other';}};ExperimentClassShowStimulus.prototype.x2lc=function(x){return x+this.root.width()/2;};ExperimentClassShowStimulus.prototype.lc2x=function(l){return l-this.root.width()/2;};ExperimentClassShowStimulus.prototype.y2tc=function(y){return y+this.root.height()/2;};ExperimentClassShowStimulus.prototype.tc2y=function(t){return t-this.root.height()/2;};ExperimentClassShowStimulus.prototype.x2l=function(x,width){if(width==null){width=null;}
return this.x2lc(x)-(width!=null?width:this.attr("width"))/2;};ExperimentClassShowStimulus.prototype.l2x=function(l,width){if(width==null){width=null;}
return this.lc2x(l)+(width!=null?width:this.attr("width"))/2;};ExperimentClassShowStimulus.prototype.y2t=function(y,height){if(height==null){height=null;}
return this.y2tc(y)-(height!=null?height:this.attr("height"))/2;};ExperimentClassShowStimulus.prototype.t2y=function(t,height){if(height==null){height=null;}
return this.tc2y(t)+(height!=null?height:this.attr("height"))/2;};ExperimentClassShowStimulus.prototype.xy2lt=function(v,xy){if(this.isH(xy)){return this.x2l(v);}else{return this.y2t(v);}};ExperimentClassShowStimulus.prototype.lt2xy=function(v,xy){if(this.isH(xy)){return this.l2x(v);}else{return this.t2y(v);}};ExperimentClassShowStimulus.prototype.xy2ltc=function(v,xy){if(this.isH(xy)){return this.x2lc(v);}else{return this.y2tc(v);}};ExperimentClassShowStimulus.prototype.ltc2xy=function(v,xy){if(this.isH(xy)){return this.lc2x(v);}else{return this.tc2y(v);}};function ExperimentClassShowStimulus(root,options,set_ready){if(set_ready==null){set_ready=true;}
ExperimentClassShowStimulus.__super__.constructor.call(this,root,false);this._defaults={};this._option_variants={};this._attr={};options=this._prepareOptions(options);this.element=this._createElement(options);this._initAttributes(options);if(set_ready){this.ready();}}
ExperimentClassShowStimulus.prototype._prepareOptions=function(options){var j,key,len,prepared_options,ref,ref1,val,variant,variant_exists;if(options==null){options={};}
this._addDefaults({width:100,height:100,x:0,y:0,color:"black",stroke:"none"});this._addOptionVariants(['x','l']);this._addOptionVariants(['y','t']);prepared_options={};ref=this._defaults;for(key in ref){val=ref[key];variant_exists=false;if(key in this._option_variants){ref1=this._option_variants[key];for(j=0,len=ref1.length;j<len;j++){variant=ref1[j];if(variant in options){variant_exists=true;break;}}}
if(!variant_exists){prepared_options[key]=val;}}
for(key in options){val=options[key];prepared_options[key]=val;}
return prepared_options;};ExperimentClassShowStimulus.prototype._createElement=function(options){throw'not implemented';};ExperimentClassShowStimulus.prototype._initAttributes=function(options){var name,results,value;results=[];for(name in options){value=options[name];if(value!=null){results.push(this.attr(name,value));}else{results.push(void 0);}}
return results;};ExperimentClassShowStimulus.prototype._addDefaults=function(obj,override){if(override==null){override=false;}
if(this._defaults==null){this._defaults={};}
if(override){return this._defaults=merge_object(this._defaults,obj);}else{return this._defaults=merge_object(obj,this._defaults);}};ExperimentClassShowStimulus.prototype._addOptionVariants=function(variants){var j,key,len,other,results;results=[];for(j=0,len=variants.length;j<len;j++){key=variants[j];other=set_diff(variants,key);if(this._option_variants[key]!=null){results.push(this._option_variants[key]=this._option_variants[key].concat(other));}else{results.push(this._option_variants[key]=other);}}
return results;};ExperimentClassShowStimulus.prototype.attr=function(name,value){var box,current_size,h,lt,r,ret,w,wh,xy;switch(name){case"color":ret=this.element.attr("fill",value);break;case"width":case"height":if(value!=null){current_size=this.element.attr(name);this.element.attr(name,value);xy=this.type2xy(name);this.attr(xy,this.attr(xy)-(value-current_size)/2);}else{ret=this.element.attr(name);}
break;case"x":case"y":lt=this.type2lt(name);if(value!=null){this.attr(lt,this.xy2lt(value,name));}else{ret=this.lt2xy(this.attr(lt),name);}
break;case"l":case"t":xy=this.type2xy(name);if(value!=null){this.element.attr(xy,value);}else{ret=this.element.attr(xy);}
break;case"cx":case"cy":wh=this.type2wh(name);if(value!=null){this.element.attr(name,this.xy2lt(value,name)+this.attr(wh)/2);}else{ret=this.lt2xy(this.element.attr(name),name)-this.attr(wh)/2;}
break;case"lc":case"tc":lt=name[0];wh=this.type2wh(name);if(value!=null){this.attr(lt,value-this.attr(wh)/2);}else{ret=this.attr(lt)+this.attr(wh)/2;}
break;case"click":case"mousedown":case"mouseup":case"mouseover":case"mouseout":if(value!=null){this.element[name](value);}else{ret=this.element[name];}
break;case"box":w=this.attr("width");h=this.attr("height");ret=box=[w,h];if(value!=null){if(!Array.isArray(value)){value=[value,value];}}
r=array_divide(value,box);if(r[0]<r[1]){this.attr("width",value[0]);this.attr("height",h*r[0]);}else{this.attr("width",w*r[1]);this.attr("height",value[1]);}
break;case"show":if(value!=null){this._show_state=value;if(value){this.element.show();}else{this.element.hide();}}else{ret=this._show_state;}
break;default:ret=this.element.attr(name,value);}
if(value!=null){return this;}else{return ret;}};ExperimentClassShowStimulus.prototype._setTransform=function(){return this.element.transform("r"+this._rotation+",s"+this._scale+",t"+this._translation);};ExperimentClassShowStimulus.prototype.rotate=function(a,xc,yc){var r,theta,x,xDiff,y,yDiff;if(xc==null){xc=null;}
if(yc==null){yc=null;}
x=this.attr('x');y=this.attr('y');xc=xc!=null?xc:x;yc=yc!=null?yc:y;xDiff=x-xc;yDiff=y-yc;r=Math.sqrt(Math.pow(xDiff,2)+Math.pow(yDiff,2));theta=Math.atan2(yDiff,xDiff);theta+=a*Math.PI/180;this.attr("x",r*Math.cos(theta)+xc);this.attr("y",r*Math.sin(theta)+yc);this._rotation=(this._rotation+a)%360;return this._setTransform();};ExperimentClassShowStimulus.prototype.scale=function(s,xc,yc){var r,theta,x,xDiff,y,yDiff;if(xc==null){xc=null;}
if(yc==null){yc=null;}
x=this.attr('x');y=this.attr('y');xc=xc!=null?xc:x;yc=yc!=null?yc:y;xDiff=x-xc;yDiff=y-yc;r=Math.sqrt(Math.pow(xDiff,2)+Math.pow(yDiff,2));theta=Math.atan2(yDiff,xDiff);r*=s;this.attr("x",r*Math.cos(theta)+xc);this.attr("y",r*Math.sin(theta)+yc);this._scale=s*this._scale;return this._setTransform();};ExperimentClassShowStimulus.prototype.translate=function(x,y){if(x==null){x=0;}
if(y==null){y=0;}
this._translation[0]+=x;this._translation[1]+=y;return this._setTransform();};ExperimentClassShowStimulus.prototype.remove=function(){if(this.element!=null){this.element.remove();return this.element=null;}};ExperimentClassShowStimulus.prototype.click=function(f){return this.attr("click",f);};ExperimentClassShowStimulus.prototype.mousedown=function(f){return this.attr("mousedown",f);};ExperimentClassShowStimulus.prototype.mouseup=function(f){return this.attr("mouseup",f);};ExperimentClassShowStimulus.prototype.mouseover=function(f){return this.attr("mouseover",f);};ExperimentClassShowStimulus.prototype.mouseout=function(f){return this.attr("mouseout",f);};ExperimentClassShowStimulus.prototype.toBack=function(){return this.element.toBack();};ExperimentClassShowStimulus.prototype.toFront=function(){return this.element.toFront();};ExperimentClassShowStimulus.prototype.show=function(state){if(state==null){state=null;}
return this.attr("show",state);};ExperimentClassShowStimulus.prototype.exists=function(){return this.element!=null;};return ExperimentClassShowStimulus;})(ExperimentClass);ExperimentClassShow.prototype.CompoundStimulus=function(elements,options){if(options==null){options=null;}
return new this.ClassShowCompoundStimulus(this.root,elements,options);};ExperimentClassShow.prototype.ClassShowCompoundStimulus=window.ExperimentClassShowCompoundStimulus=(function(superClass1){extend(ExperimentClassShowCompoundStimulus,superClass1);ExperimentClassShowCompoundStimulus.prototype._default_element=0;function ExperimentClassShowCompoundStimulus(root,elements,options){if(options==null){options={};}
options.elements=elements;ExperimentClassShowCompoundStimulus.__super__.constructor.call(this,root,options);}
ExperimentClassShowCompoundStimulus.prototype._prepareOptions=function(options){this._addDefaults({width:null,height:null,x:null,y:null,color:null,stroke:null});return options=ExperimentClassShowCompoundStimulus.__super__._prepareOptions.call(this,options);};ExperimentClassShowCompoundStimulus.prototype._createElement=function(options){var elements;elements=object_extract(options,'elements');return copy_object((elements instanceof this.root.show.ClassShowCompoundStimulus?elements.element:elements));};ExperimentClassShowCompoundStimulus.prototype.attr=function(name,value){var el,fSize,ffEvent,i,j,len,len1,len2,m,n,o,p,pAll,pMax,pMin,pMove,ref,ref1,ref2,ref3,ref4,ret,sz,szAll,u,xy,z;switch(name){case"width":case"height":xy=this.type2xy(name);n=this.element.length;if(n===0){p=0;sz=0;}else{szAll=(function(){var j,len,ref,results;ref=this.element;results=[];for(j=0,len=ref.length;j<len;j++){el=ref[j];results.push(el.attr(name));}
return results;}).call(this);pAll=(function(){var j,len,ref,results;ref=this.element;results=[];for(j=0,len=ref.length;j<len;j++){el=ref[j];results.push(el.attr(xy));}
return results;}).call(this);pMin=Math.min.apply(Math,(function(){var j,ref,results;results=[];for(i=j=0,ref=n-1;0<=ref?j<=ref:j>=ref;i=0<=ref?++j:--j){results.push(pAll[i]-szAll[i]/2);}
return results;})());pMax=Math.max.apply(Math,(function(){var j,ref,results;results=[];for(i=j=0,ref=n-1;0<=ref?j<=ref:j>=ref;i=0<=ref?++j:--j){results.push(pAll[i]+szAll[i]/2);}
return results;})());p=(pMin+pMax)/2;sz=pMax-pMin;}
if(value!=null){fSize=value/sz;if(n>0){for(i=j=0,ref=n-1;0<=ref?j<=ref:j>=ref;i=0<=ref?++j:--j){this.element[i].attr(name,fSize*szAll[i]);}
for(i=m=0,ref1=n-1;0<=ref1?m<=ref1:m>=ref1;i=0<=ref1?++m:--m){this.element[i].attr(xy,fSize*(pAll[i]-p)+p);}}}else{ret=sz;}
break;case"l":case"t":n=this.element.length;if(n===0){ret=p=(function(){switch(name){case"l":return this.root.width()/2;case"t":return this.root.height()/2;default:throw'wtf?';}}).call(this);}else{ret=p=Math.min.apply(Math,(function(){var len,o,ref2,results;ref2=this.element;results=[];for(o=0,len=ref2.length;o<len;o++){el=ref2[o];results.push(el.attr(name));}
return results;}).call(this));}
if(value!=null){pMove=value-p;if(n>0){ref2=this.element;for(o=0,len=ref2.length;o<len;o++){el=ref2[o];el.attr(name,el.attr(name)+pMove);}}}
break;case"cl":case"ct":ret=this.attr(name[1]+"c",value);break;case"box":case"x":case"y":case"cx":case"cy":case"lc":case"tc":ret=ExperimentClassShowCompoundStimulus.__super__.attr.call(this,name,value);break;case"element_mousedown":ffEvent=function(elm){return function(e,x,y){return value(elm,x,y);};};ref3=this.element;for(u=0,len1=ref3.length;u<len1;u++){el=ref3[u];el.attr("mousedown",ffEvent(el));}
break;default:if(value!=null){ref4=this.element;for(z=0,len2=ref4.length;z<len2;z++){el=ref4[z];el.attr(name,value);}}else{ret=this.element.length>0?this.element[this._default_element].attr(name):null;}}
if(value!=null){return this;}else{return ret;}};ExperimentClassShowCompoundStimulus.prototype._setTransform=function(){var el,j,len,ref,results;ref=this.element;results=[];for(j=0,len=ref.length;j<len;j++){el=ref[j];results.push(el._setTransform());}
return results;};ExperimentClassShowCompoundStimulus.prototype.rotate=function(a,xc,yc){var el,j,len,ref,results;if(xc==null){xc=null;}
if(yc==null){yc=null;}
xc=xc!=null?xc:this.attr('x');yc=yc!=null?yc:this.attr('y');this._rotation=(this._rotation+a)%360;ref=this.element;results=[];for(j=0,len=ref.length;j<len;j++){el=ref[j];results.push(el.rotate(a,xc,yc));}
return results;};ExperimentClassShowCompoundStimulus.prototype.scale=function(s,xc,yc){var el,j,len,ref,results;if(xc==null){xc=null;}
if(yc==null){yc=null;}
xc=xc!=null?xc:this.attr('x');yc=yc!=null?yc:this.attr('y');this._scale=s*this._scale;ref=this.element;results=[];for(j=0,len=ref.length;j<len;j++){el=ref[j];results.push(el.scale(s,xc,yc));}
return results;};ExperimentClassShowCompoundStimulus.prototype.translate=function(x,y){var el,j,len,ref,results;if(x==null){x=0;}
if(y==null){y=0;}
ref=this.element;results=[];for(j=0,len=ref.length;j<len;j++){el=ref[j];results.push(el.translate(x,y));}
return results;};ExperimentClassShowCompoundStimulus.prototype.add=function(el){if(this.element==null){this.element=[];}
this.element.push(el);if(!this._show_state){return el.show(false);}};ExperimentClassShowCompoundStimulus.prototype.remove=function(el,remove_element){var idx,j,len,ref;if(el==null){el=null;}
if(remove_element==null){remove_element=true;}
if(el!=null){idx=this.getElementIndex(el);if(remove_element){this.element[idx].remove();}
return this.element.splice(idx,1);}else{if(remove_element){ref=this.element;for(j=0,len=ref.length;j<len;j++){el=ref[j];el.remove();}}
return this.element=[];}};ExperimentClassShowCompoundStimulus.prototype.getElement=function(el){if(el instanceof this.root.show.ClassShowStimulus){return el;}else{return this.element[el];}};ExperimentClassShowCompoundStimulus.prototype.getElementIndex=function(el){if(el instanceof this.root.show.ClassShowStimulus){return find(this.element,el)[0];}else{return el;}};return ExperimentClassShowCompoundStimulus;})(ExperimentClassShowStimulus);ExperimentClassShow.prototype.StimulusGrid=function(elements,options){if(options==null){options=null;}
return new this.ClassShowStimulusGrid(this.root,elements,options);};ExperimentClassShow.prototype.ClassShowStimulusGrid=window.ExperimentClassShowStimulusGrid=(function(superClass1){extend(ExperimentClassShowStimulusGrid,superClass1);function ExperimentClassShowStimulusGrid(){return ExperimentClassShowStimulusGrid.__super__.constructor.apply(this,arguments);}
ExperimentClassShowStimulusGrid.prototype._prepareOptions=function(options){this._addDefaults({x:0,y:0,padding:8,precise_grid:true});return ExperimentClassShowStimulusGrid.__super__._prepareOptions.call(this,options);};ExperimentClassShowStimulusGrid.prototype._initAttributes=function(options){var ref;this._attr.padding=object_extract(options,'padding');this._attr.precise_grid=object_extract(options,'precise_grid');this._attr.rows=object_extract(options,'rows');this._attr.cols=object_extract(options,'cols');this._attr.x=object_extract(options,'x');this._attr.y=object_extract(options,'y');if(this._attr.rows==null){if(this._attr.cols==null){ref=sqrtish(this.element.length,this._attr.precise_grid),this._attr.rows=ref[0],this._attr.cols=ref[1];}else{this._attr.rows=Math.ceil(this.element.length/this._attr.cols);}}else if(this._attr.cols==null){this._attr.cols=Math.ceil(this.element.length/this._attr.rows);}
this._updateElementPositions();return ExperimentClassShowStimulusGrid.__super__._initAttributes.call(this,options);};ExperimentClassShowStimulusGrid.prototype._getRowHeight=function(){var c,cols,el_height,idx,j,m,r,ref,ref1,row_height,rows;rows=this.attr('rows');cols=this.attr('cols');row_height=new Array(rows);for(r=j=0,ref=rows-1;0<=ref?j<=ref:j>=ref;r=0<=ref?++j:--j){row_height[r]=0;for(c=m=0,ref1=cols-1;0<=ref1?m<=ref1:m>=ref1;c=0<=ref1?++m:--m){idx=cols*r+c;if(idx>=this.element.length){break;}
el_height=this.element[idx].attr('height');if(el_height>row_height[r]){row_height[r]=el_height;}}}
return row_height;};ExperimentClassShowStimulusGrid.prototype._getColWidth=function(){var c,col_width,cols,el_width,idx,j,m,r,ref,ref1,rows;rows=this.attr('rows');cols=this.attr('cols');col_width=new Array(cols);for(c=j=0,ref=cols-1;0<=ref?j<=ref:j>=ref;c=0<=ref?++j:--j){col_width[c]=0;for(r=m=0,ref1=rows-1;0<=ref1?m<=ref1:m>=ref1;r=0<=ref1?++m:--m){idx=cols*r+c;if(idx>=this.element.length){break;}
el_width=this.element[idx].attr('width');if(el_width>col_width[c]){col_width[c]=el_width;}}}
return col_width;};ExperimentClassShowStimulusGrid.prototype._updateElementPositions=function(){this.attr('x',this.attr('x'));return this.attr('y',this.attr('y'));};ExperimentClassShowStimulusGrid.prototype.attr=function(name,value){var c,cell_sizes,col_width,cols,current_size,el,idx,j,len,m,new_element_size,num_cells,o,old_element_size,pad,padding,r,ref,ref1,ref2,ref3,ref4,resize_ratio,ret,row_height,rows,u,z;switch(name){case'width':case'height':if(value!=null){current_size=this.attr(name);num_cells=(function(){switch(name){case'width':return this.attr('cols');case'height':return this.attr('rows');}}).call(this);pad=(num_cells-1)*this.attr('padding');old_element_size=current_size-pad;new_element_size=value-pad;resize_ratio=new_element_size/old_element_size;ref=this.element;for(j=0,len=ref.length;j<len;j++){el=ref[j];el.attr(name,resize_ratio*el.attr(name));}
this._updateElementPositions();}else{cell_sizes=(function(){switch(name){case'width':return this._getColWidth();case'height':return this._getRowHeight();}}).call(this);ret=array_sum(cell_sizes);num_cells=(function(){switch(name){case'width':return this.attr('cols');case'height':return this.attr('rows');}}).call(this);ret+=(num_cells-1)*this.attr('padding');}
break;case'padding':case'rows':case'cols':if(value!=null){this._attr[name]=value;this._updateElementPositions();}else{ret=this._attr[name];}
break;case'x':if(value!=null){this._attr['x']=value;rows=this.attr('rows');cols=this.attr('cols');padding=this.attr('padding');col_width=this._getColWidth();value-=this.attr('width')/2;for(c=m=0,ref1=cols-1;0<=ref1?m<=ref1:m>=ref1;c=0<=ref1?++m:--m){value+=col_width[c]/2;for(r=o=0,ref2=rows-1;0<=ref2?o<=ref2:o>=ref2;r=0<=ref2?++o:--o){idx=cols*r+c;if(idx>=this.element.length){break;}
this.element[idx].attr(name,value);}
value+=col_width[c]/2+padding;}}else{ret=this._attr[name];}
break;case'y':if(value!=null){this._attr['y']=value;rows=this.attr('rows');cols=this.attr('cols');padding=this.attr('padding');row_height=this._getRowHeight();value-=this.attr('height')/2;for(r=u=0,ref3=rows-1;0<=ref3?u<=ref3:u>=ref3;r=0<=ref3?++u:--u){value+=row_height[r]/2;for(c=z=0,ref4=cols-1;0<=ref4?z<=ref4:z>=ref4;c=0<=ref4?++z:--z){idx=cols*r+c;if(idx>=this.element.length){break;}
this.element[idx].attr(name,value);}
value+=row_height[r]/2+padding;}}else{ret=this._attr[name];}
break;default:ret=ExperimentClassShowStimulusGrid.__super__.attr.call(this,name,value);}
if(value!=null){return this;}else{return ret;}};ExperimentClassShowStimulusGrid.prototype.add=function(el){ExperimentClassShowStimulusGrid.__super__.add.call(this,el);return this._updateElementPositions();};ExperimentClassShowStimulusGrid.prototype.remove=function(el,remove_element){if(remove_element==null){remove_element=true;}
ExperimentClassShowStimulusGrid.__super__.remove.call(this,el,remove_element);if(this.element.length){return this._updateElementPositions();}};return ExperimentClassShowStimulusGrid;})(ExperimentClassShowCompoundStimulus);ExperimentClassShow.prototype.StimulusRing=function(elements,options){if(options==null){options=null;}
return new this.ClassShowStimulusRing(this.root,elements,options);};ExperimentClassShow.prototype.ClassShowStimulusRing=window.ExperimentClassShowStimulusRing=(function(superClass1){extend(ExperimentClassShowStimulusRing,superClass1);function ExperimentClassShowStimulusRing(){return ExperimentClassShowStimulusRing.__super__.constructor.apply(this,arguments);}
ExperimentClassShowStimulusRing.prototype._prepareOptions=function(options){this._addDefaults({r:'loose',phase:0});return ExperimentClassShowStimulusRing.__super__._prepareOptions.call(this,options);};ExperimentClassShowStimulusRing.prototype._initAttributes=function(options){this._attr.r=0;this._attr.phase=0;return ExperimentClassShowStimulusRing.__super__._initAttributes.call(this,options);};ExperimentClassShowStimulusRing.prototype.attr=function(name,value){var el,el_size,ret;switch(name){case'width':case'height':if(value!=null){this.attr('r',value/2);}else{ret=ExperimentClassShowStimulusRing.__super__.attr.call(this,name);}
break;case'r':if(value!=null){this._attr.r=(function(){switch(value){case'tight':el_size=(function(){var j,len,ref,results;ref=this.element;results=[];for(j=0,len=ref.length;j<len;j++){el=ref[j];results.push(Math.max(el.attr('width'),el.attr('height')));}
return results;}).call(this);return Math.max.apply(Math,el_size);case'loose':el_size=(function(){var j,len,ref,results;ref=this.element;results=[];for(j=0,len=ref.length;j<len;j++){el=ref[j];results.push(Math.sqrt(Math.pow(el.attr('width'),2)+Math.pow(el.attr('height'),2)));}
return results;}).call(this);return Math.max.apply(Math,el_size);default:return value;}}).call(this);this._updateElementPositions();}else{ret=this._attr[name];}
break;case'phase':if(value!=null){this._attr.phase=value;this._updateElementPositions();}else{ret=this._attr[name];}
break;default:ret=ExperimentClassShowStimulusRing.__super__.attr.call(this,name,value);}
if(value!=null){return this;}else{return ret;}};ExperimentClassShowStimulusRing.prototype.add=function(el){ExperimentClassShowStimulusRing.__super__.add.call(this,el);return this._updateElementPositions();};ExperimentClassShowStimulusRing.prototype.remove=function(el,remove_element){if(remove_element==null){remove_element=true;}
ExperimentClassShowStimulusRing.__super__.remove.call(this,el,remove_element);return this._updateElementPositions();};ExperimentClassShowStimulusRing.prototype._updateElementPositions=function(){var angle_step,el_phase,idx,j,num_elements,ref,results,x,x_offset,y,y_offset;if(this.element.length){x=this.attr('x');y=this.attr('y');num_elements=this.element.length;angle_step=2*Math.PI/num_elements;results=[];for(idx=j=0,ref=num_elements-1;0<=ref?j<=ref:j>=ref;idx=0<=ref?++j:--j){el_phase=Math.PI+this._attr.phase+idx*angle_step;x_offset=this._attr.r*Math.cos(el_phase);y_offset=this._attr.r*Math.sin(el_phase);this.element[idx].attr('x',x+x_offset);results.push(this.element[idx].attr('y',y+y_offset));}
return results;}};return ExperimentClassShowStimulusRing;})(ExperimentClassShowCompoundStimulus);ExperimentClassShow.prototype.Rectangle=function(options){if(options==null){options=null;}
return new this.ClassShowRectangle(this.root,options);};ExperimentClassShow.prototype.ClassShowRectangle=window.ExperimentClassShowRectangle=(function(superClass1){extend(ExperimentClassShowRectangle,superClass1);function ExperimentClassShowRectangle(){return ExperimentClassShowRectangle.__super__.constructor.apply(this,arguments);}
ExperimentClassShowRectangle.prototype._createElement=function(options){return this.root.paper.rect(0,0,0,0);};return ExperimentClassShowRectangle;})(ExperimentClassShowStimulus);ExperimentClassShow.prototype.Square=function(options){if(options==null){options=null;}
return new this.ClassShowSquare(this.root,options);};ExperimentClassShow.prototype.ClassShowSquare=window.ExperimentClassShowSquare=(function(superClass1){extend(ExperimentClassShowSquare,superClass1);function ExperimentClassShowSquare(){return ExperimentClassShowSquare.__super__.constructor.apply(this,arguments);}
ExperimentClassShowSquare.prototype._prepareOptions=function(options){var ref;options=ExperimentClassShowSquare.__super__._prepareOptions.call(this,options);if(options.length==null){options.length=(ref=options.width)!=null?ref:options.height;}
options.width=options.height=null;return options;};ExperimentClassShowSquare.prototype.attr=function(name,value){var ret;switch(name){case"length":case"width":case"height":if(value!=null){ExperimentClassShowSquare.__super__.attr.call(this,"width",value);ExperimentClassShowSquare.__super__.attr.call(this,"height",value);}else{ret=ExperimentClassShowSquare.__super__.attr.call(this,"width");}
break;default:ret=ExperimentClassShowSquare.__super__.attr.call(this,name,value);}
if(value!=null){return this;}else{return ret;}};return ExperimentClassShowSquare;})(ExperimentClassShowRectangle);ExperimentClassShow.prototype.Circle=function(options){if(options==null){options=null;}
return new this.ClassShowCircle(this.root,options);};ExperimentClassShow.prototype.ClassShowCircle=window.ExperimentClassShowCircle=(function(superClass1){extend(ExperimentClassShowCircle,superClass1);function ExperimentClassShowCircle(){return ExperimentClassShowCircle.__super__.constructor.apply(this,arguments);}
ExperimentClassShowCircle.prototype._prepareOptions=function(options){var ref;this._addDefaults({width:null,height:null,r:null});options=ExperimentClassShowCircle.__super__._prepareOptions.call(this,options);if((options.width!=null)||(options.height!=null)){if(options.r==null){options.r=((ref=options.width)!=null?ref:options.height)/2;}}else{if(options.r==null){options.r=50;}}
options.width=options.height=null;return options;};ExperimentClassShowCircle.prototype._createElement=function(options){return this.root.paper.circle(0,0,0);};ExperimentClassShowCircle.prototype.attr=function(name,value){var ret,wh,xy;switch(name){case"width":case"height":if(value!=null){ExperimentClassShowCircle.__super__.attr.call(this,"r",value/2);}else{ret=2*ExperimentClassShowCircle.__super__.attr.call(this,"r");}
break;case"l":case"t":xy="c"+(this.type2xy(name));wh=this.type2wh(name);if(value!=null){this.element.attr(xy,value+this.attr(wh)/2);}else{ret=this.element.attr(xy)-this.attr(wh)/2;}
break;default:ret=ExperimentClassShowCircle.__super__.attr.call(this,name,value);}
if(value!=null){return this;}else{return ret;}};return ExperimentClassShowCircle;})(ExperimentClassShowStimulus);ExperimentClassShow.prototype.Text=function(text,options){if(options==null){options=null;}
return new this.ClassShowText(this.root,text,options);};ExperimentClassShow.prototype.ClassShowText=window.ExperimentClassShowText=(function(superClass1){extend(ExperimentClassShowText,superClass1);ExperimentClassShowText.prototype._text=null;ExperimentClassShowText.prototype._presets={'instruction':{'font-size':24},'data':{'font-family':'monospace','font-size':18}};function ExperimentClassShowText(root,text,options){this._text=text;ExperimentClassShowText.__super__.constructor.call(this,root,options);}
ExperimentClassShowText.prototype._prepareOptions=function(options){options=merge_object({'preset':null},options!=null?options:{});if(options.preset!=null){this._addDefaults(this._presets[options.preset]);}
this._addDefaults({width:null,height:null,"font-family":"Arial","font-size":14,"text-anchor":"middle"});options=ExperimentClassShowText.__super__._prepareOptions.call(this,options);if((options.width!=null)||(options.height!=null)){options['font-size']=null;}
return options;};ExperimentClassShowText.prototype._createElement=function(options){return this.root.paper.text(0,0,this._text);};ExperimentClassShowText.prototype._initAttributes=function(options){this._attr.x=0;this._attr.y=0;return ExperimentClassShowText.__super__._initAttributes.call(this,options);};ExperimentClassShowText.prototype.attr=function(name,value){var f,half_height,new_font_size,offset,old_font_size,ret,sz,t,x,y;switch(name){case"l":if(value!=null){this._attr.x=this.l2x(value);offset=(function(){switch(this.attr('text-anchor')){case'middle':return this.attr('width')/2;default:return 0;}}).call(this);ExperimentClassShowText.__super__.attr.call(this,name,value+offset);}else{ret=this.x2l(this._attr.x);}
break;case"t":if(value!=null){this._attr.y=this.t2y(value);half_height=this.attr('height')/2;t=Math.min(this.root.height()-half_height,value+half_height);ExperimentClassShowText.__super__.attr.call(this,name,t);}else{ret=this.y2t(this._attr.y);}
break;case"width":case"height":if(value!=null){sz=this.attr(name);f=value/sz;old_font_size=this.attr('font-size');new_font_size=f*old_font_size;this.attr("font-size",new_font_size);}else{ret=this.element.getBBox()[name];}
break;case"font-size":if(value!=null){x=this.attr('x');y=this.attr('y');ExperimentClassShowText.__super__.attr.call(this,name,value);this.attr('x',x);this.attr('y',y);}else{ret=ExperimentClassShowText.__super__.attr.call(this,name);}
break;case'text-anchor':if(value!=null){ExperimentClassShowText.__super__.attr.call(this,name,value);this.attr('l',this.attr('l'));}else{ret=ExperimentClassShowText.__super__.attr.call(this,name,value);}
break;default:ret=ExperimentClassShowText.__super__.attr.call(this,name,value);}
if(value!=null){return this;}else{return ret;}};return ExperimentClassShowText;})(ExperimentClassShowStimulus);ExperimentClassShow.prototype.Path=function(path,options){if(options==null){options=null;}
return new this.ClassShowPath(this.root,path,options);};ExperimentClassShow.prototype.ClassShowPath=window.ExperimentClassShowPath=(function(superClass1){extend(ExperimentClassShowPath,superClass1);ExperimentClassShowPath.prototype._path=null;ExperimentClassShowPath.prototype._param=null;function ExperimentClassShowPath(root,path,options){this._path=path;ExperimentClassShowPath.__super__.constructor.call(this,root,options);}
ExperimentClassShowPath.prototype._prepareOptions=function(options){this._addDefaults({stroke:'black','stroke-width':0});return options=ExperimentClassShowPath.__super__._prepareOptions.call(this,options);};ExperimentClassShowPath.prototype._createElement=function(options){return this.root.paper.path("");};ExperimentClassShowPath.prototype._initAttributes=function(options){this._attr.path=this._path;this._attr.width=0;this._attr.height=0;this._attr.l=0;this._attr.t=0;this._attr.orientation=0;return ExperimentClassShowPath.__super__._initAttributes.call(this,options);};ExperimentClassShowPath.prototype._bottomRightCorner=function(){var p;p=[this._attr.width/2,this._attr.height/2];return rotate(p,this._attr.orientation);};ExperimentClassShowPath.prototype._topRightCorner=function(){var p;p=[this._attr.width/2,-this._attr.height/2];return rotate(p,this._attr.orientation);};ExperimentClassShowPath.prototype._maxExtent=function(idx){var br,tr;br=Math.abs(this._bottomRightCorner()[idx]);tr=Math.abs(this._topRightCorner()[idx]);return 2*Math.max(br,tr);};ExperimentClassShowPath.prototype.rotatedWidth=function(){return this._maxExtent(0);};ExperimentClassShowPath.prototype.rotatedHeight=function(){return this._maxExtent(1);};ExperimentClassShowPath.prototype.attr=function(name,value){var attr,ret;switch(name){case"path":case"width":case"height":case"l":case"t":case"orientation":if(value!=null){attr={};attr[name]=value;if(name==='width'){attr.l=this._attr.l+(this._attr.width-value)/2;}else if(name==='height'){attr.t=this._attr.t+(this._attr.height-value)/2;}
this._constructPath(attr);}else{ret=this._attr[name];}
break;default:ret=ExperimentClassShowPath.__super__.attr.call(this,name,value);}
if(value!=null){return this;}else{return ret;}};ExperimentClassShowPath.prototype.rotate=function(a,xc,yc){var r,theta,x,x_diff,y,y_diff;if(xc==null){xc=null;}
if(yc==null){yc=null;}
if((xc!=null)||(yc!=null)){x=this.attr("x");y=this.attr("y");xc=xc!=null?xc:x;yc=yc!=null?yc:y;x_diff=x-xc;y_diff=y-yc;r=Math.sqrt(Math.pow(x_diff,2)+Math.pow(y_diff,2));theta=Math.atan2(y_diff,x_diff);theta+=a*Math.PI/180;this.attr("x",r*Math.cos(theta)+xc);this.attr("y",r*Math.sin(theta)+yc);}
return this.attr("orientation",this.attr("orientation")+a);};ExperimentClassShowPath.prototype._constructPath=function(attr,set_path){var idx,j,key,len,m,offset,op,origin,p,path,ref,ref1,ref2,rx,ry,val,x,y;if(attr==null){attr=null;}
if(set_path==null){set_path=true;}
if(attr==null){attr={};}
for(key in attr){val=attr[key];this._attr[key]=val;}
origin=this._transformPoint(0,0);path="M"+origin;ref=this._attr.path;for(j=0,len=ref.length;j<len;j++){op=ref[j];path+=op[0];if(op.length>1){switch(op[0].toLowerCase()){case'a':offset=0;rx=op[++offset]*this._attr.width;ry=op[++offset]*this._attr.height;path+=rx+','+ry+',';path+=op[++offset]+',';path+=op[++offset]+','+op[++offset]+',';ref1=this._transformPoint(op[++offset],op[++offset]),x=ref1[0],y=ref1[1];path+=x+','+y;break;default:for(idx=m=1,ref2=op.length-1;m<=ref2;idx=m+=2){p=this._transformPoint(op[idx],op[idx+1]);path+=p+",";}}}}
if(set_path){return this.element.attr("path",path);}else{return path;}};ExperimentClassShowPath.prototype._transformPoint=function(x,y){var ref;ref=rotate([x,y],this._attr.orientation,[0.5,0.5]),x=ref[0],y=ref[1];x*=this._attr.width;y*=this._attr.height;x+=this._attr.l;y+=this._attr.t;return[x,y];};return ExperimentClassShowPath;})(ExperimentClassShowStimulus);ExperimentClassShow.prototype.Shape=function(name,options){if(options==null){options={};}
return new this.ClassShowShape(this.root,name,options);};ExperimentClassShow.prototype.ClassShowShape=window.ExperimentClassShowShape=(function(superClass1){extend(ExperimentClassShowShape,superClass1);ExperimentClassShowShape.prototype._name=null;ExperimentClassShowShape.prototype._presets={triangle:[['M',0.5,0],['L',0,1],['L',1,1],['Z']],square:[['L',1,0],['L',1,1],['L',0,1],['Z']],pentagon:[['M',0.5,0],['L',1,0.382],['L',0.809,1],['L',0.191,1],['L',0,0.382],['Z']],diamond:[['M',0.5,0],['L',1,0.5],['L',0.5,1],['L',0,0.5],['Z']],circle:[['M',0.5,0],['A',0.5,0.5,0,1,1,0.4999,0],['Z']],star:[['M',0.5,0],['L',0.809,1],['L',0,0.382],['L',1,0.382],['L',0.191,1],['Z']],x:[['L',1,1],['M',0,1],['L',1,0]],plus:[['M',0.5,0],['L',0.5,1],['M',0,0.5],['L',1,0.5]],line:[['M',0.5,0],['L',0.5,1],['M',1,1]],vline:[['M',0.5,0],['L',0.5,1],['M',1,1]],hline:[['M',0,0.5],['L',1,0.5],['M',1,1]]};ExperimentClassShowShape.prototype._presets_with_stroke=['x','plus','line'];function ExperimentClassShowShape(root,name,options){this._name=name;ExperimentClassShowShape.__super__.constructor.call(this,root,[],options);this.setShape(name);}
ExperimentClassShowShape.prototype._prepareOptions=function(options){var ref;if(ref=this._name,indexOf.call(this._presets_with_stroke,ref)>=0){this._addDefaults({'stroke':null,'stroke-width':16});}
options=ExperimentClassShowShape.__super__._prepareOptions.call(this,options);if(options['stroke']==null){options['stroke']=options.color;}
return options;};ExperimentClassShowShape.prototype.setShape=function(name){var path;path=this._presets[this._name=name.toLowerCase()];return this.attr('path',path);};return ExperimentClassShowShape;})(ExperimentClassShowPath);ExperimentClassShow.prototype.X=function(options){if(options==null){options=null;}
return new this.ClassShowX(this.root,options);};ExperimentClassShow.prototype.ClassShowX=window.ExperimentClassShowX=(function(superClass1){extend(ExperimentClassShowX,superClass1);ExperimentClassShowX.prototype._prepareOptions=function(options){this._addDefaults({width:16,height:16,'stroke-width':4});return options=ExperimentClassShowX.__super__._prepareOptions.call(this,options);};function ExperimentClassShowX(root,options){ExperimentClassShowX.__super__.constructor.call(this,root,'x',options);}
return ExperimentClassShowX;})(ExperimentClassShowShape);ExperimentClassShow.prototype.Image=function(src,options){if(options==null){options=null;}
return new this.ClassShowImage(this.root,src,options);};ExperimentClassShow.prototype.ClassShowImage=window.ExperimentClassShowImage=(function(superClass1){extend(ExperimentClassShowImage,superClass1);ExperimentClassShowImage.prototype._src=null;ExperimentClassShowImage.prototype._default_width=null;ExperimentClassShowImage.prototype._default_height=null;function ExperimentClassShowImage(root,src,options){var im;this._src=src;if((options.width==null)||(options.height==null)){im=new Image();im.src=this._src;if(im.width===0){im.onload=(function(_this){return function(){return _this.constructor(root,_this._src,options);};})(this);return;}
this._default_width=im.width;this._default_height=im.height;}
ExperimentClassShowImage.__super__.constructor.call(this,root,options);}
ExperimentClassShowImage.prototype._prepareOptions=function(options){this._addDefaults({width:this._default_width,height:this._default_height});return options=ExperimentClassShowImage.__super__._prepareOptions.call(this,options);};ExperimentClassShowImage.prototype._createElement=function(options){return this.root.paper.image(this._src,0,0,null,null);};ExperimentClassShowImage.prototype.attr=function(name,value){var ret;switch(name){case"color":ret=null;break;default:ret=ExperimentClassShowImage.__super__.attr.call(this,name,value);}
if(value!=null){return this;}else{return ret;}};return ExperimentClassShowImage;})(ExperimentClassShowStimulus);ExperimentClassShow.prototype.Checkerboard=function(options){if(options==null){options=null;}
return new this.ClassShowCheckerboard(this.root,options);};ExperimentClassShow.prototype.ClassShowCheckerboard=window.ExperimentClassShowCheckerboard=(function(superClass1){extend(ExperimentClassShowCheckerboard,superClass1);function ExperimentClassShowCheckerboard(root,options){var elements,num,ref;this.root=root;if(options==null){options={};}
if(options.rows==null){options.rows=(ref=options.cols)!=null?ref:8;}
if(options.cols==null){options.cols=options.rows;}
num=options.rows*options.cols;elements=(function(){var j,ref1,results;results=[];for(j=1,ref1=num;1<=ref1?j<=ref1:j>=ref1;1<=ref1?j++:j--){results.push(this.root.show.Rectangle());}
return results;}).call(this);ExperimentClassShowCheckerboard.__super__.constructor.call(this,root,elements,options);}
ExperimentClassShowCheckerboard.prototype._prepareOptions=function(options){this._addDefaults({color1:'black',color2:'white',padding:0,width:100,height:100});return ExperimentClassShowCheckerboard.__super__._prepareOptions.call(this,options);};ExperimentClassShowCheckerboard.prototype.attr=function(name,value){var aa,c,col_start,cols,el,h,h_pad,idx,j,m,o,offsets,pad,r,ref,ref1,ref2,ref3,ref4,ref5,ref6,ret,rows,u,w,w_pad,x,y,z;switch(name){case"width":if(value!=null){rows=this.attr('rows');cols=this.attr('cols');pad=this.attr('padding');w=value/cols;w_pad=(value-cols*pad)/cols;x=this.attr('x');for(r=j=0,ref=rows-1;0<=ref?j<=ref:j>=ref;r=0<=ref?++j:--j){for(c=m=0,ref1=cols-1;0<=ref1?m<=ref1:m>=ref1;c=0<=ref1?++m:--m){idx=r*cols+c;el=this.element[idx];el.attr('width',w_pad);el.attr('x',x-(value-w)/2+c*w);}}}else{ret=ExperimentClassShowCheckerboard.__super__.attr.call(this,name,value);}
break;case"height":if(value!=null){rows=this.attr('rows');cols=this.attr('cols');pad=this.attr('padding');h=value/rows;h_pad=(value-rows*pad)/rows;y=this.attr('y');for(r=o=0,ref2=rows-1;0<=ref2?o<=ref2:o>=ref2;r=0<=ref2?++o:--o){for(c=u=0,ref3=cols-1;0<=ref3?u<=ref3:u>=ref3;c=0<=ref3?++u:--u){idx=r*cols+c;el=this.element[idx];el.attr('height',h_pad);el.attr('y',y-(value-h)/2+r*h);}}}else{ret=ExperimentClassShowCheckerboard.__super__.attr.call(this,name,value);}
break;case"color1":case"color2":offsets=name==='color1'?[0,1]:[1,0];if(value!=null){rows=this.attr('rows');cols=this.attr('cols');for(r=z=0,ref4=rows-1;0<=ref4?z<=ref4:z>=ref4;r=0<=ref4?++z:--z){col_start=is_even(r)?offsets[0]:offsets[1];for(c=aa=ref5=col_start,ref6=cols-1;aa<=ref6;c=aa+=2){idx=r*cols+c;this.element[idx].attr('color',value);}}}else{if(this.element.length){this.element[offsets[0]].attr('color');}else{null;}}
break;default:ret=ExperimentClassShowCheckerboard.__super__.attr.call(this,name,value);}
if(value!=null){return this;}else{return ret;}};return ExperimentClassShowCheckerboard;})(ExperimentClassShowStimulusGrid);ExperimentClassShow.prototype.Choice=function(elements,options){if(options==null){options=null;}
return new this.ClassShowChoice(this.root,elements,options);};ExperimentClassShow.prototype.ClassShowChoice=window.ExperimentClassShowChoice=(function(superClass1){extend(ExperimentClassShowChoice,superClass1);function ExperimentClassShowChoice(){return ExperimentClassShowChoice.__super__.constructor.apply(this,arguments);}
ExperimentClassShowChoice.prototype.choice=null;ExperimentClassShowChoice.prototype.timeout=null;ExperimentClassShowChoice.prototype._t_start=0;ExperimentClassShowChoice.prototype._type=null;ExperimentClassShowChoice.prototype._group=null;ExperimentClassShowChoice.prototype._prompt=null;ExperimentClassShowChoice.prototype._callback_queue=null;ExperimentClassShowChoice.prototype._prepareOptions=function(options){var key_no,key_yes,keys,n;this._addDefaults({type:'element',group:null,group_options:{},prompt:null,prompt_suffix:null,prompt_options:{'font-style':'italic'},key:'any',timeout:null,cols:1,padding:18});options=ExperimentClassShowChoice.__super__._prepareOptions.call(this,options);if(options.group==null){options.group=options.type==='multichoice'?'ring':'grid';}
if(options.prompt_suffix!=null){options.prompt_suffix=" "+options.prompt_suffix;}else{options.prompt_suffix='';}
!(options.prompt!=null?options.prompt:options.prompt=(function(){switch(options.type){case'element':return"Choose one"+options.prompt_suffix+".";case'key':return"Press "+(this.root.input.key2description(options.key))+options.prompt_suffix+".";case'yesno':key_yes=this.root.input.key2synonym('yes');key_no=this.root.input.key2synonym('no');return"Yes ("+key_yes+") or No ("+key_no+")"+options.prompt_suffix;case'multichoice':n=options.elements.length;keys=this.root.input._keys[n+"choice"];return"Press "+(this.root.input.key2description(keys))+options.prompt_suffix+".";case false:return null;default:throw'invalid choice type';}}).call(this));return options;};ExperimentClassShowChoice.prototype._createElement=function(options){var elements,group_options,group_type,prompt,prompt_options;this._group=ExperimentClassShowChoice.__super__._createElement.call(this,options);group_type=object_extract(options,'group');group_options=object_extract(options,'group_options');switch(group_type){case'grid':this._group=this.root.show.StimulusGrid(this._group,group_options);break;case'ring':this._group=this.root.show.StimulusRing(this._group,group_options);break;default:throw group_type+" is an invalid grouping type";}
elements=[this._group];prompt=object_extract(options,'prompt');prompt_options=object_extract(options,'prompt_options');if(prompt){prompt_options=merge_object({preset:'instruction'},prompt_options);this._prompt=this.root.show.Text(prompt,prompt_options);elements.push(this._prompt);}
return elements;};ExperimentClassShowChoice.prototype._initAttributes=function(options){var f_down,idx,j,key_options,keys,ref;this._type=object_extract(options,'type');this.timeout=object_extract(options,'timeout');ExperimentClassShowChoice.__super__._initAttributes.call(this,options);switch(this._type){case'element':for(idx=j=0,ref=this._group.length-1;0<=ref?j<=ref:j>=ref;idx=0<=ref?++j:--j){f_down=((function(_this){return function(i){return function(e,x,y){return _this._choiceEvent(i);};};})(this))(idx);this._group[idx].mousedown(f_down);}
break;case'key':key_options={event:'down',button:options.key,expires:1,f:(function(_this){return function(e){return _this._choiceEvent(_this.root.input.code2key(e.which));};})(this)};this.root.input.addHandler('key',key_options);break;case'yesno':keys=['yes','no'];key_options={event:'down',button:keys,expires:1,f:(function(_this){return function(e){return _this._choiceEvent(_this.root.input.code2key(e.which,keys));};})(this)};this.root.input.addHandler('key',key_options);break;case'multichoice':keys=this.root.input._keys[this._group.element.length+"choice"];key_options={event:'down',button:keys,expires:1,f:(function(_this){return function(e){return _this._choiceEvent(_this.root.input.code2key(e.which,keys));};})(this)};this.root.input.addHandler('key',key_options);break;case false:null;break;default:throw'invalid choice type';}
this._t_start=this.root.time.now();if(this.timeout!=null){return window.setTimeout(((function(_this){return function(){return _this._choiceEvent(null);};})(this)),this.timeout);}};ExperimentClassShowChoice.prototype.attr=function(name,value){var ret;switch(name){case'y':if(value!=null){if(this._prompt){value+=(this._prompt.attr('height')+this.attr('padding'))/2;}
ExperimentClassShowChoice.__super__.attr.call(this,name,value);}else{ret=ExperimentClassShowChoice.__super__.attr.call(this,name,value);}
break;default:ret=ExperimentClassShowChoice.__super__.attr.call(this,name,value);}
if(value!=null){return this;}else{return ret;}};ExperimentClassShowChoice.prototype.callback=function(f){if(this.choice!=null){f(this,this.choice);}else{if(this._callback_queue==null){this._callback_queue=[];}
this._callback_queue.push(f);}
return this;};ExperimentClassShowChoice.prototype._processChoice=function(choice){var match,t_now;t_now=this.root.time.now();switch(this._type){case'yesno':choice=choice==='yes'?true:false;break;case'multichoice':match=choice.match(/^\d+choice(\d+)$/);if(match){choice=Number(match[1]);}}
return{start:this._t_start,end:t_now,rt:t_now-this._t_start,choice:choice};};ExperimentClassShowChoice.prototype._choiceEvent=function(choice){var f,j,len,ref,results;if(this.choice==null){this.choice=this._processChoice(choice);if(this._callback_queue!=null){ref=this._callback_queue;results=[];for(j=0,len=ref.length;j<len;j++){f=ref[j];results.push(f(this,this.choice));}
return results;}}};return ExperimentClassShowChoice;})(ExperimentClassShowStimulusGrid);ExperimentClassShow.prototype.Instruction=function(text,options){if(options==null){options=null;}
return new this.ClassShowInstruction(this.root,text,options);};ExperimentClassShow.prototype.ClassShowInstruction=window.ExperimentClassShowInstruction=(function(superClass1){extend(ExperimentClassShowInstruction,superClass1);function ExperimentClassShowInstruction(root,text,options){var elements;elements=[exp.show.Text(text,{preset:'instruction'})];ExperimentClassShowInstruction.__super__.constructor.call(this,root,elements,options);this.callback(function(obj,choice){return obj.remove();});}
ExperimentClassShowInstruction.prototype._prepareOptions=function(options){this._addDefaults({type:'key'});options=ExperimentClassShowInstruction.__super__._prepareOptions.call(this,options);if(options.prompt==null){options.prompt=(function(){switch(options.type){case'key':return'Press a key.';default:return null;}})();}
return options;};return ExperimentClassShowInstruction;})(ExperimentClassShowChoice);ExperimentClassShow.prototype.Test=function(elements,options){if(options==null){options=null;}
return new this.ClassShowTest(this.root,elements,options);};ExperimentClassShow.prototype.ClassShowTest=window.ExperimentClassShowTest=(function(superClass1){extend(ExperimentClassShowTest,superClass1);function ExperimentClassShowTest(){return ExperimentClassShowTest.__super__.constructor.apply(this,arguments);}
ExperimentClassShowTest.prototype.target=null;ExperimentClassShowTest.prototype._prepareOptions=function(options){this._addDefaults({target:null});options=ExperimentClassShowTest.__super__._prepareOptions.call(this,options);this.target=object_extract(options,'target');return options;};ExperimentClassShowTest.prototype._createElement=function(options){var choices,element,idx,j,ref;element=ExperimentClassShowTest.__super__._createElement.call(this,options);if(this.target==null){this.target=[];choices=element[0].element;for(idx=j=0,ref=choices.length-1;0<=ref?j<=ref:j>=ref;idx=0<=ref?++j:--j){if(choices[idx].correct){this.target.push(idx);}}}
return element;};ExperimentClassShowTest.prototype._processChoice=function(choice){var ref,result;result=ExperimentClassShowTest.__super__._processChoice.call(this,choice);result.target=this.target;result.correct=(result.choice!=null)&&(ref=result.choice,indexOf.call(force_array(this.target),ref)>=0);return result;};return ExperimentClassShowTest;})(ExperimentClassShowChoice);ExperimentClassShow.prototype.Sequence=function(stim,next,options){if(options==null){options=null;}
return new this.ClassShowSequence(this.root,stim,next,options);};ExperimentClassShow.prototype.ClassShowSequence=window.ExperimentClassShowSequence=(function(superClass1){extend(ExperimentClassShowSequence,superClass1);ExperimentClassShowSequence.prototype.result=null;ExperimentClassShowSequence.prototype._stim=null;ExperimentClassShowSequence.prototype._step=null;ExperimentClassShowSequence.prototype._cleanup=null;ExperimentClassShowSequence.prototype._stim_step=null;function ExperimentClassShowSequence(root,stim,next,options){this._cleanupStimuli=bind(this._cleanupStimuli,this);var f_stim,idx,num_step;options=merge_object({cleanup:'step',fixation:false},options);this._cleanup=options.cleanup;num_step=stim.length;this._stim_step=(function(){var j,ref,results;results=[];for(idx=j=0,ref=num_step-1;0<=ref?j<=ref:j>=ref;idx=0<=ref?++j:--j){results.push([]);}
return results;})();this.result=(function(){var j,ref,results;results=[];for(idx=j=0,ref=num_step-1;0<=ref?j<=ref:j>=ref;idx=0<=ref?++j:--j){results.push({});}
return results;})();this._stim=stim;f_stim=(function(){var j,ref,results;results=[];for(idx=j=0,ref=num_step-1;0<=ref?j<=ref:j>=ref;idx=0<=ref?++j:--j){results.push(((function(_this){return function(i){return function(){return _this._showStim(i);};};})(this))(idx));}
return results;}).call(this);f_stim.push(this._cleanupStimuli);next.push(null);ExperimentClassShowSequence.__super__.constructor.call(this,root,f_stim,next,options);}
ExperimentClassShowSequence.prototype._processNext=function(idx,next){var f_show,options;if(next==null){next=null;}
if(next==null){next=this._next[idx];}
if(Array.isArray(next)&&next.length>0&&(next[0]==='choice'||next[0]==='test')){options=next.length>1?next[1]:{};f_show=(function(_this){return function(f_next){var stim;stim=_this.root.show[capitalize(next[0])](_this._stim_step[idx],options);stim.callback(function(obj,choice){_this._recordTime(idx,'choice',choice.end);_this.result[idx].choice=choice.choice;_this.result[idx].rt=_this.result[idx].t.choice-_this.result[idx].t.show;if(obj instanceof _this.root.show.ClassShowTest){_this.result[idx].target=choice.target;_this.result[idx].correct=choice.correct;}
return f_next();});return _this._recordStimulus(idx,stim);};})(this);return ExperimentClassShowSequence.__super__._processNext.call(this,idx,['event',f_show]);}else{return ExperimentClassShowSequence.__super__._processNext.call(this,idx,next);}};ExperimentClassShowSequence.prototype._showStim=function(idx,stim){var j,len,ref,results,s;if(stim==null){stim=null;}
if(stim==null){this._step=idx;stim=this._stim[idx];if(idx>0){this._cleanupStimuli(idx-1);}
this.result[idx]={t:{},t_rel:{}};this._recordTime(idx,'show');}
if(stim==null){return null;}else if(!Array.isArray(stim)){return this._showStim(idx,[stim]);}else if(stim.length>0&&get_class(stim[0])==='String'){return this._recordStimulus(idx,(ref=this.root.show)[stim[0]].apply(ref,stim.slice(1)));}else{results=[];for(j=0,len=stim.length;j<len;j++){s=stim[j];if(Array.isArray(s)){results.push(this._showStim(idx,s));}else if(s instanceof this.root.show.ClassShowStimulus){this._recordStimulus(idx,s);results.push(s.show(true));}else if(s instanceof this.root["do"].ClassDoAction){results.push(this._showStim(idx,s.fire()));}else if(s instanceof Function){results.push(this._showStim(idx,s()));}else{throw"invalid stimulus for step "+idx;}}
return results;}};ExperimentClassShowSequence.prototype._recordStimulus=function(idx,stim){return this._stim_step[idx].push(stim);};ExperimentClassShowSequence.prototype._recordTime=function(idx,name,time){if(time==null){time=null;}
if(time==null){time=this.root.time.now();}
this.result[idx].t[name]=time;return this.result[idx].t_rel[name]=time-this.start_time;};ExperimentClassShowSequence.prototype._cleanupStimuli=function(idx){var j,len,len1,len2,m,o,ref,ref1,ref2,ref3,results,results1,results2,results3,stim,u;if(idx==null){idx=null;}
if(idx!=null){this._recordTime(idx,'remove');switch(this._cleanup){case'step':ref=this._stim_step[idx];results=[];for(j=0,len=ref.length;j<len;j++){stim=ref[j];results.push(stim.remove());}
return results;break;case'sequence':ref1=this._stim_step[idx];results1=[];for(m=0,len1=ref1.length;m<len1;m++){stim=ref1[m];results1.push(stim.show(false));}
return results1;break;case'none':return null;default:throw'invalid cleanup value';}}else{switch(this._cleanup){case'step':idx=this._stim.length-1;ref2=this._stim_step[idx];results2=[];for(o=0,len2=ref2.length;o<len2;o++){stim=ref2[o];results2.push(stim.remove());}
return results2;break;case'sequence':results3=[];for(idx=u=0,ref3=this._stim.length-1;0<=ref3?u<=ref3:u>=ref3;idx=0<=ref3?++u:--u){results3.push((function(){var len3,ref4,results4,z;ref4=this._stim_step[idx];results4=[];for(z=0,len3=ref4.length;z<len3;z++){stim=ref4[z];results4.push(stim.remove());}
return results4;}).call(this));}
return results3;break;case'none':return null;default:throw'invalid cleanup value';}}};ExperimentClassShowSequence.prototype._getCallbackArgs=function(){return[this.result];};return ExperimentClassShowSequence;})(ExperimentClassDoSequence);return ExperimentClassShow;})(ExperimentClass);Experiment.prototype.Trial=function(){return new this.ClassTrial(this);};Experiment.prototype.ClassTrial=window.ExperimentClassTrial=(function(superClass){extend(ExperimentClassTrial,superClass);function ExperimentClassTrial(){return ExperimentClassTrial.__super__.constructor.apply(this,arguments);}
ExperimentClassTrial.prototype.Base=function(options){if(options==null){options=null;}
return new this.ClassTrialBase(this.root,options);};ExperimentClassTrial.prototype.ClassTrialBase=window.ExperimentClassTrialBase=(function(superClass1){extend(ExperimentClassTrialBase,superClass1);ExperimentClassTrialBase.prototype._feedback_time=1000;function ExperimentClassTrialBase(root,options){this.getResult=bind(this.getResult,this);this._getFeedbackNext=bind(this._getFeedbackNext,this);this._getFeedbackStim=bind(this._getFeedbackStim,this);this._getTestNext=bind(this._getTestNext,this);this._getTestStim=bind(this._getTestStim,this);this._getSequenceNext=bind(this._getSequenceNext,this);this._getSequenceStim=bind(this._getSequenceStim,this);var feedback_next,feedback_stim,idx_test,next,num_sequence,sequence_next,sequence_stim,stim,test_next,test_stim;this.root=root;options=merge_object({target:null,feedback_time:null,test_group_options:null,test_prompt_options:null},options!=null?options:{});if(options.feedback_time!=null){this._feedback_time=options.feedback_time;}
sequence_stim=force_array(this._getSequenceStim(options));sequence_next=force_array(this._getSequenceNext(sequence_stim,options));num_sequence=sequence_stim.length;test_stim=force_array(this._getTestStim(options));test_next=this._getTestNext(test_stim,options);idx_test=num_sequence;feedback_stim=(function(_this){return function(){return _this._getFeedbackStim(_this.result[idx_test],options);};})(this);feedback_next=['lazy',(function(_this){return function(obj,step){return _this._getFeedbackNext(_this.result[idx_test],options);};})(this)];stim=sequence_stim.concat([test_stim,feedback_stim]);next=sequence_next.concat([test_next,feedback_next]);ExperimentClassTrialBase.__super__.constructor.call(this,root,stim,next,options);}
ExperimentClassTrialBase.prototype._getSequenceStim=function(options){return[['Text','prompt']];};ExperimentClassTrialBase.prototype._getSequenceNext=function(sequence_stim,options){var j,ref,results;results=[];for(j=1,ref=sequence_stim.length;1<=ref?j<=ref:j>=ref;1<=ref?j++:j--){results.push(1000);}
return results;};ExperimentClassTrialBase.prototype._getTestStim=function(options){return[['Text','test']];};ExperimentClassTrialBase.prototype._getTestNext=function(test_stim,options){var n,target,type;n=test_stim.length;target=options.target;switch(n){case 0:throw'unsupported number of test stimuli';break;case 1:if(target==null){target=true;}
type='yesno';break;default:if(target==null){target=0;}
type='multichoice';}
return['test',{target:target,type:type,group_options:object_extract(options,'test_group_options'),prompt_options:object_extract(options,'test_prompt_options')}];};ExperimentClassTrialBase.prototype._getFeedbackStim=function(result,options){var color,text;text=result.correct?'Correct!':'Wrong!';color=result.correct?'limegreen':'red';return this.root.show.Text(text,{preset:'instruction',color:color,show:false});};ExperimentClassTrialBase.prototype._getFeedbackNext=function(result,options){return this._feedback_time;};ExperimentClassTrialBase.prototype.getResult=function(){return this.result;};ExperimentClassTrialBase.prototype._getCallbackArgs=function(){return[this.getResult()];};return ExperimentClassTrialBase;})(ExperimentClassShowSequence);return ExperimentClassTrial;})(ExperimentClass);return Experiment;})();}).call(this);(function(){var CognitiveStyle,bind=function(fn,me){return function(){return fn.apply(me,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;window.CognitiveStyle=CognitiveStyle=(function(superClass){extend(CognitiveStyle,superClass);CognitiveStyle.prototype.version=null;CognitiveStyle.prototype._do_questionnaires=false;CognitiveStyle.prototype._advance_key='space';CognitiveStyle.prototype._key_yes='F';CognitiveStyle.prototype._key_no='J';CognitiveStyle.prototype._instruct_num_trials=16;CognitiveStyle.prototype._instruct_text_options={preset:'instruction',"font-size":24,color:'rgb(0,0,160)',show:false};CognitiveStyle.prototype._verbal_stimulus_font_size=32;CognitiveStyle.prototype._visual_stimulus_size=75;CognitiveStyle.prototype._row_padding=12;CognitiveStyle.prototype._col_padding=32;CognitiveStyle.prototype._test_ring_radius='tight';CognitiveStyle.prototype._questionnaires={'debrief':[{key:'title',value:'Questionnaire 1 of 4'},{key:'instruction',value:'Please answer the following questions about the strategy you used while completing the previous task.'},{key:'choice',value:['tried to remember just the words.','tried to remember just the picture.','tried to remember both the words and the picture.']},{key:'item',value:"When a trial started with <em>words</em>, I:"},{key:'item',value:"When a trial started with a <em>picture</em>, I:"},{key:'choice',value:['Yes','No']},{key:'item',value:"Did you find it easier when a trial <em>started</em> with pictures than with words?"},{key:'item',value:"Did you find it easier when a trial <em>ended</em> with pictures than with words?"}],'vvq':[{key:'title',value:'Questionnaire 2 of 4'},{key:'instruction',value:'Please read each statement and rate it on the 5-point scale. Choose "5" to indicate that you absolutely agree that the statement describes you, and choose "1" to indicate that you totally disagree with the statement. Choose "3" if you not sure, but try to make a choice. It is very important that you answer all the items in the questionnaire.'},{key:'scale',value:['totally disagree with the statement','partially disagree with the statement','not sure','partially agree with the statement','totally agree with the statement']},{key:'item',value:"I can easily think of synonyms for words."},{key:'item',value:"I can hardly ever remember my dreams."},{key:'item',value:"I dislike looking words up in dictionaries."},{key:'item',value:"I dislike word games like crossword puzzles."},{key:'item',value:"I don't believe that anyone can think in terms of mental pictures."},{key:'item',value:"I don't like maps or diagrams in books."},{key:'item',value:"I enjoy daydreaming."},{key:'item',value:"I enjoy doing work that requires the use of words."},{key:'item',value:"I enjoy learning new words."},{key:'item',value:"I find illustrations or diagrams help me when I'm reading."},{key:'item',value:"I find maps helpful in finding my way around a new city."},{key:'item',value:"I have a hard time making a \"mental picture\" of a place that I've only been to a few times."},{key:'item',value:"I have a hard time remembering the words to songs."},{key:'item',value:"I have always disliked jigsaw puzzles."},{key:'item',value:"I have better than average fluency in using words."},{key:'item',value:"I like newspaper articles that have graphs."},{key:'item',value:"I often dream about things I'd like to be."},{key:'item',value:"I prefer to read instructions about how to do something rather than have someone show me."},{key:'item',value:"I read rather slowly."},{key:'item',value:"I seldom daydream. "},{key:'item',value:"I seldom dream."},{key:'item',value:"I seldom fantasize."},{key:'item',value:"I seldom use diagrams to explain things."},{key:'item',value:"I spend little time attempting to increase my vocabulary."},{key:'item',value:"My dreams are extremely vivid."},{key:'item',value:"My dreams are rather indistinct and hazy."},{key:'item',value:"My dreams are sometimes so vivid I feel as though I actually experience the scene."},{key:'item',value:"My powers of imagination are higher than average."},{key:'item',value:"The old saying \"A picture is worth a thousand words\" is certainly true for me."},{key:'item',value:"When I read books with maps in them, I refer to the maps a lot."}],'osivq':[{key:'title',value:'Questionnaire 3 of 4'},{key:'instruction',value:'Please read each statement and rate it on the 5-point scale. Choose "5" to indicate that you absolutely agree that the statement describes you, and choose "1" to indicate that you totally disagree with the statement. Choose "3" if you not sure, but try to make a choice. It is very important that you answer all the items in the questionnaire.'},{key:'scale',value:['totally disagree with the statement','partially disagree with the statement','not sure','partially agree with the statement','totally agree with the statement']},{key:'item',value:"Architecture interests me more than painting."},{key:'item',value:"Essay writing is difficult for me and I do not enjoy doing it at all."},{key:'item',value:"I am always aware of sentence structure."},{key:'item',value:"I am good in playing spatial games involving constructing from blocks and paper (e.g. Lego, Tetris, Origami)."},{key:'item',value:"I can close my eyes and easily picture a scene that I have experienced."},{key:'item',value:"I can easily imagine and mentally rotate three-dimensional geometric figures."},{key:'item',value:"I can easily remember a great deal of visual details that someone else might never notice. For example, I would just automatically take some things in, like what colour is a shirt someone wears or what colour are his/her shoes."},{key:'item',value:"I can easily sketch a blueprint for a building I am familiar with."},{key:'item',value:"I enjoy being able to rephrase my thoughts in many ways for variety's sake in both writing and speaking."},{key:'item',value:"I enjoy pictures with bright colours and unusual shapes like the ones in modern art."},{key:'item',value:"I find it difficult to imagine how a three-dimensional geometric figure would exactly look like when rotated."},{key:'item',value:"I have a photographic memory."},{key:'item',value:"I have better than average fluency in using words."},{key:'item',value:"I have difficulty expressing myself in writing."},{key:'item',value:"I have excellent abilities in technical graphics."},{key:'item',value:"I normally do not experience many spontaneous vivid images; I use my mental imagery mostly when attempting to solve some problems like the ones in mathematics."},{key:'item',value:"I prefer schematic diagrams and sketches when reading a textbook instead of colourful and pictorial illustrations."},{key:'item',value:"I remember everything visually. I can recount what people wore to a dinner and I can talk about the way they sat and the way they looked probably in more detail than I could discuss what they said."},{key:'item',value:"I sometimes have a problem expressing exactly what I want to say."},{key:'item',value:"I tell jokes and stories better than most people."},{key:'item',value:"I usually do not try to visualize or sketch diagrams when reading a textbook."},{key:'item',value:"I was very good in 3D geometry as a student."},{key:'item',value:"I would rather have a verbal description of an object or person than a picture."},{key:'item',value:"If I were asked to choose among engineering professions, or visual arts, I would choose visual arts."},{key:'item',value:"If I were asked to choose between engineering professions and visual arts, I would prefer engineering."},{key:'item',value:"If someone were to give me two-digit numbers to add (e.g. 43 and 32) I would simply do the adding without visualizing the numbers."},{key:'item',value:"In school, I had no problems with geometry."},{key:'item',value:"My graphic abilities would make a career in architecture relatively easy for me."},{key:'item',value:"My images are more like schematic representations of things and events rather than like detailed pictures."},{key:'item',value:"My images are more schematic than colourful and pictorial."},{key:'item',value:"My images are very colourful and bright."},{key:'item',value:"My images are very vivid and photographic."},{key:'item',value:"My mental images of different objects very much resemble the size, shape and colour of actual objects that I have seen."},{key:'item',value:"My verbal abilities would make a career in language arts relatively easy for me."},{key:'item',value:"My verbal skills are excellent."},{key:'item',value:"My visual images are in my head all the time. They are just right there."},{key:'item',value:"Putting together furniture kits (e.g. a TV stand or a chair) is much easier for me when I have detailed verbal instructions than when I only have a diagram or picture."},{key:'item',value:"Sometimes my images are so vivid and persistent that it is difficult to ignore them."},{key:'item',value:"When entering a familiar store to get a specific item, I can easily picture the exact location of the target item, the shelf it stands on, how it is arranged and the the shelf it stands on, how it is arranged and the surrounding articles."},{key:'item',value:"When explaining something, I would rather give verbal explanations than make drawings or sketches."},{key:'item',value:"When I hear a radio announcer or a DJ I've never actually seen, I usually find myself picturing what he or she might look like."},{key:'item',value:"When I imagine the face of a friend, I have a perfectly clear and bright image."},{key:'item',value:"When reading fiction, I usually form a clear and detailed mental picture of a scene or room that has been described."},{key:'item',value:"When remembering a scene, I use verbal descriptions rather than mental pictures."},{key:'item',value:"When thinking about an abstract concept (or building), I imagine an abstract schematic building in my mind or its blueprint rather than a specific concrete building."}],'vviq':[{key:'title',value:'Questionnaire 4 of 4'},{key:'instruction',value:"<p>Please rate the vividness of each image by reference to the rating scale shown.</p><p>Think of some relative or friend whom you frequently see (but who is not with you at present), and consider carefully the picture that comes before your mind's eye.  Then rate the following items:</p>"},{key:'scale',value:['perfectly clear and as vivid as normal vision','clear and reasonably vivid','moderately clear and vivid','vague and dim','no image at all [only "knowing" that you are thinking of the object]']},{key:'item',value:"The exact contour of face, head, shoulders, and body."},{key:'item',value:"Characteristic poses of head, attitudes of body, etc."},{key:'item',value:"The precise carriage, length of step, etc., in walking."},{key:'item',value:"The different colors worn in some familiar clothes."},{key:'instruction',value:"<p>Please rate the vividness of each image by reference to the rating scale shown.</p><p>Visualize a rising sun.  Consider carefully the picture that comes before your mind's eye.  Then rate the following items:</p>"},{key:'item',value:"The sun is rising above the horizon into a hazy sky."},{key:'item',value:"The sky clears and surrounds the sun with blueness."},{key:'item',value:"Clouds.  A storm blows up, with flashes of lightning."},{key:'item',value:"A rainbow appears."},{key:'instruction',value:"<p>Please rate the vividness of each image by reference to the rating scale shown.</p><p>Think of the front of a shop to which you often go.  Consider the picture that comes before your mind's eye.  Then rate the following items:</p>"},{key:'item',value:"The overall appearance of the shop from the opposite side of the road."},{key:'item',value:"A window display including colors, shapes, and details of   individual items for sale."},{key:'item',value:"You are near the entrance.  The color, shape, and details of the door."},{key:'item',value:"You enter the shop and go to the counter.  The counter assistant serves you.  Money changes hands."},{key:'instruction',value:"<p>Please rate the vividness of each image by reference to the rating scale shown.</p><p>Finally, think of a country scene which involves trees, mountains and a lake.  Consider the picture that comes before your mind's eye.  Then rate the following items:</p>"},{key:'item',value:"The contours of the landscape."},{key:'item',value:"The color and shape of the trees."},{key:'item',value:"The color and shape of the lake."},{key:'item',value:"A strong wind blows on the trees and on the lake, causing waves."}]};function CognitiveStyle(options){var ref;if(options==null){options=null;}
this._summaryStatisticsAll=bind(this._summaryStatisticsAll,this);this._filterResult=bind(this._filterResult,this);this.summaryStatistics=bind(this.summaryStatistics,this);options=merge_object({data_url:'data/',version:2,questionnaires:true},options!=null?options:{});this.version=options.version;if((ref=!this.version)===1||ref===2){throw'invalid version';}
this._do_questionnaires=options.questionnaires;CognitiveStyle.__super__.constructor.call(this,options);}
CognitiveStyle.prototype.summaryStatistics=function(result){var current_result,j,k,l,len,len1,len2,len3,m,prompt_format,prompt_key,ref,ref1,ref2,ref3,ref4,ref5,ref6,ref7,stat,sub_result,test_format,test_key;stat=this._summaryStatisticsAll(result);ref=['verbal','visual'];for(j=0,len=ref.length;j<len;j++){prompt_format=ref[j];ref1=this._filterResult(result,'prompt',prompt_format),prompt_key=ref1[0],current_result=ref1[1];stat[prompt_key]=this._summaryStatisticsAll(current_result);ref2=['verbal','visual'];for(k=0,len1=ref2.length;k<len1;k++){test_format=ref2[k];ref3=this._filterResult(current_result,'test',test_format),test_key=ref3[0],sub_result=ref3[1];stat[prompt_key][test_key]=this._summaryStatisticsAll(sub_result);}}
ref4=['verbal','visual'];for(l=0,len2=ref4.length;l<len2;l++){test_format=ref4[l];ref5=this._filterResult(result,'test',test_format),test_key=ref5[0],current_result=ref5[1];stat[test_key]=this._summaryStatisticsAll(current_result);ref6=['verbal','visual'];for(m=0,len3=ref6.length;m<len3;m++){prompt_format=ref6[m];ref7=this._filterResult(current_result,'prompt',prompt_format),prompt_key=ref7[0],sub_result=ref7[1];stat[test_key][prompt_key]=this._summaryStatisticsAll(sub_result);}}
return stat;};CognitiveStyle.prototype._filterResult=function(result,type,format){var key,res;key=type+"_"+format;result=(function(){var j,len,results;results=[];for(j=0,len=result.length;j<len;j++){res=result[j];if(res.param[type+"_format"]===format){results.push(res);}}
return results;})();return[key,result];};CognitiveStyle.prototype._summaryStatisticsAll=function(result){var res;return{num_trials:result.length,encoding_rt:array_mean((function(){var j,len,results;results=[];for(j=0,len=result.length;j<len;j++){res=result[j];results.push(res.encoding_rt);}
return results;})()),verification_rt:array_mean((function(){var j,len,results;results=[];for(j=0,len=result.length;j<len;j++){res=result[j];results.push(res.verification_rt);}
return results;})()),accuracy:array_mean((function(){var j,len,results;results=[];for(j=0,len=result.length;j<len;j++){res=result[j];results.push(res.correct?1:0);}
return results;})())};};CognitiveStyle.prototype.ClassParameter=window.CognitiveStyleClassParameter=(function(superClass1){extend(CognitiveStyleClassParameter,superClass1);CognitiveStyleClassParameter.prototype._colors=['red','black'];CognitiveStyleClassParameter.prototype._formats=['visual','verbal'];CognitiveStyleClassParameter.prototype._targets=null;CognitiveStyleClassParameter.prototype._relations=['left','right','above','below'];CognitiveStyleClassParameter.prototype._shapes=['star','plus','square','circle','triangle'];CognitiveStyleClassParameter.prototype._catches=null;CognitiveStyleClassParameter.prototype._negates=[false];CognitiveStyleClassParameter.prototype._num_distractors=3;CognitiveStyleClassParameter.prototype._reps=null;CognitiveStyleClassParameter.prototype._trials_per_block=32;CognitiveStyleClassParameter.prototype._trial_param_values=null;CognitiveStyleClassParameter.prototype._trial_aux_param_values=null;CognitiveStyleClassParameter.prototype._trial_mutually_exclusive=null;function CognitiveStyleClassParameter(root,set_ready){var change_order,change_relation,change_relations,change_shape,idx,idx_exclude,j,k,l,len,len1,len2,m,n,num_distractor,o,ref,ref1,ref2,ref3,ref4,ref5,results;if(set_ready==null){set_ready=null;}
this.TrialSequence=bind(this.TrialSequence,this);this.Trial=bind(this.Trial,this);this.Stimulus=bind(this.Stimulus,this);this.getSequenceParam=bind(this.getSequenceParam,this);this.getDefaultNumTrials=bind(this.getDefaultNumTrials,this);CognitiveStyleClassParameter.__super__.constructor.call(this,root,set_ready);switch(this.root.version){case 1:this._catches=['order','relation'];this._targets=[true,false];this._reps=4;break;case 2:this._catches=[];ref=[1,2,false,false];for(j=0,len=ref.length;j<len;j++){change_shape=ref[j];ref1=[true,false];for(k=0,len1=ref1.length;k<len1;k++){change_order=ref1[k];if(change_shape){change_relations=[true,false];}else{change_relations=[!change_order];}
for(l=0,len2=change_relations.length;l<len2;l++){change_relation=change_relations[l];this._catches.push({shape:change_shape,order:change_order,relation:change_relation});}}}
this._targets=(function(){results=[];for(var m=0,ref2=this._num_distractors;0<=ref2?m<=ref2:m>=ref2;0<=ref2?m++:m--){results.push(m);}
return results;}).apply(this);this._reps=2;}
this._trial_param_values={prompt_format:this._formats,test_format:this._formats,target:this._targets,relation:this._relations,negate:this._negates};this._trial_aux_param_values={shape1:this._shapes,shape2:this._shapes,"catch":this._catches};this._trial_mutually_exclusive=[['shape1','shape2']];if(this.root.version===2){this._trial_aux_param_values['distractor_shape']=this._shapes;this._trial_mutually_exclusive.push(['distractor_shape','shape1']);this._trial_mutually_exclusive.push(['distractor_shape','shape2']);num_distractor=this._num_distractors;for(idx=n=0,ref3=num_distractor-1;0<=ref3?n<=ref3:n>=ref3;idx=0<=ref3?++n:--n){this._trial_aux_param_values["d"+idx+"_type"]=this._catches;if(idx<num_distractor-1){for(idx_exclude=o=ref4=idx+1,ref5=num_distractor-1;ref4<=ref5?o<=ref5:o>=ref5;idx_exclude=ref4<=ref5?++o:--o){this._trial_mutually_exclusive.push(["d"+idx+"_type","d"+idx_exclude+"_type"]);}}}}}
CognitiveStyleClassParameter.prototype.getDefaultNumTrials=function(){var key,num_per_param,values;num_per_param=(function(){var ref,results;ref=this._trial_param_values;results=[];for(key in ref){values=ref[key];results.push(values.length);}
return results;}).call(this);return this._reps*array_prod(num_per_param);};CognitiveStyleClassParameter.prototype.getSequenceParam=function(options){var sequence_param;if(options==null){options=null;}
if(options==null){options={};}
if(options.randomize==null){options.randomize=true;}
sequence_param=this.root.parameter.TrialSequence({num_trials:options.num_trials,seed:101181});if(options.randomize!=null){array_randomize(sequence_param.trial_param);}
return sequence_param;};CognitiveStyleClassParameter.prototype.Stimulus=function(values){if(values==null){values=null;}
return new this.ClassParameterStimulus(this.root,values);};CognitiveStyleClassParameter.prototype.ClassParameterStimulus=window.CognitiveStyleClassParameterStimulus=(function(superClass2){extend(CognitiveStyleClassParameterStimulus,superClass2);function CognitiveStyleClassParameterStimulus(root,values){this.switchShape=bind(this.switchShape,this);this.switchNegate=bind(this.switchNegate,this);this.switchOrder=bind(this.switchOrder,this);this.switchRelation=bind(this.switchRelation,this);CognitiveStyleClassParameterStimulus.__super__.constructor.call(this,root,values);this._addParameter('shape1',this.root.parameter._shapes);this._addParameter('shape2',this.root.parameter._shapes,{exclude:this.shape1});this._addParameter('relation',this.root.parameter._relations);this._addParameter('negate',this.root.parameter._negates);}
CognitiveStyleClassParameterStimulus.prototype.switchRelation=function(){this.relation=(function(){switch(this.relation){case'left':return'right';case'right':return'left';case'above':return'below';case'below':return'above';}}).call(this);return this;};CognitiveStyleClassParameterStimulus.prototype.switchOrder=function(){var ref;ref=[this.shape2,this.shape1],this.shape1=ref[0],this.shape2=ref[1];return this;};CognitiveStyleClassParameterStimulus.prototype.switchNegate=function(){this.negate=!this.negate;return this;};CognitiveStyleClassParameterStimulus.prototype.switchShape=function(shape_number,new_shape){if(shape_number==null){shape_number=null;}
if(new_shape==null){new_shape=null;}
if(new_shape==null){new_shape=this._pickValue({defaults:this.root.parameter._shapes,exclude:[this.shape1,this.shape2]});}
if(shape_number==null){shape_number=random_int(1,2);}
this["shape"+shape_number]=new_shape;return this;};return CognitiveStyleClassParameterStimulus;})(ExperimentClassParameterBase);CognitiveStyleClassParameter.prototype.Trial=function(values){if(values==null){values=null;}
return new this.ClassParameterTrial(this.root,values);};CognitiveStyleClassParameter.prototype.ClassParameterTrial=window.CognitiveStyleClassParameterTrial=(function(superClass2){extend(CognitiveStyleClassParameterTrial,superClass2);function CognitiveStyleClassParameterTrial(root,values){this._getTestParameter=bind(this._getTestParameter,this);this._getPromptParameter=bind(this._getPromptParameter,this);var exclude,idx,j,name,ref;CognitiveStyleClassParameterTrial.__super__.constructor.call(this,root,values);this._addParameter('target',this.root.parameter._targets);this._addParameter('stimulus_param',{},{postprocess:this.root.parameter.Stimulus});this._addParameter('prompt_format',this.root.parameter._formats);this._addParameter('test_format',this.root.parameter._formats);switch(this.root.version){case 1:this._addParameter('catch',this.root.parameter._catches);break;case 2:this._addParameter('distractor_shape',this.root.parameter._shapes,{exclude:[this.stimulus_param.shape1,this.stimulus_param.shape2]});exclude=[];for(idx=j=0,ref=this.root.parameter._num_distractors-1;0<=ref?j<=ref:j>=ref;idx=0<=ref?++j:--j){name="d"+idx+"_type";this._addParameter(name,this.root.parameter._catches,{exclude:exclude});exclude.push(this[name]);}}
this.prompt_param=this._getPromptParameter();this.test_param=this._getTestParameter();}
CognitiveStyleClassParameterTrial.prototype._getPromptParameter=function(){return this.root.parameter.Stimulus(this.stimulus_param);};CognitiveStyleClassParameterTrial.prototype._getTestParameter=function(){var d_type,distractor,idx,idx_distractor,j,num_distractors,param,ref;switch(this.root.version){case 1:param=this.root.parameter.Stimulus(this.stimulus_param);if(!this.target){switch(this["catch"]){case'order':param.switchOrder();break;case'shape':param.switchShape();break;case'negate':param.switchNegate();break;case'relation':param.switchRelation();break;default:throw'invalid catch type';}}
break;case 2:param=new Array(4);param[this.target]=this.root.parameter.Stimulus(this.prompt_param);num_distractors=this.root.parameter._num_distractors;for(idx=j=0,ref=num_distractors-1;0<=ref?j<=ref:j>=ref;idx=0<=ref?++j:--j){idx_distractor=(this.target+idx+1)%(num_distractors+1);distractor=this.root.parameter.Stimulus(param[this.target]);d_type=this["d"+idx+"_type"];if(d_type.shape){distractor.switchShape(d_type.shape,this.distractor_shape);}
if(d_type.order){distractor.switchOrder();}
if(d_type.relation){distractor.switchRelation();}
param[idx_distractor]=distractor;}}
return param;};return CognitiveStyleClassParameterTrial;})(ExperimentClassParameterBase);CognitiveStyleClassParameter.prototype.TrialSequence=function(values){if(values==null){values=null;}
return new this.ClassParameterTrialSequence(this.root,values);};CognitiveStyleClassParameter.prototype.ClassParameterTrialSequence=window.CognitiveStyleClassParameterTrialSequence=(function(superClass2){extend(CognitiveStyleClassParameterTrialSequence,superClass2);CognitiveStyleClassParameterTrialSequence.prototype._param_values=null;CognitiveStyleClassParameterTrialSequence.prototype._aux_param_values=null;function CognitiveStyleClassParameterTrialSequence(root,values){this._getTrialParameters=bind(this._getTrialParameters,this);this._getRawTrialParameters=bind(this._getRawTrialParameters,this);CognitiveStyleClassParameterTrialSequence.__super__.constructor.call(this,root,values);this._addParameter('num_trials',this.root.parameter.getDefaultNumTrials);this._addParameter('seed',this.root.time.now);this._addParameter('trial_param',this._getTrialParameters);}
CognitiveStyleClassParameterTrialSequence.prototype._getRawTrialParameters=function(){var param_raw,rng;rng=new Math.seedrandom(this.seed);return param_raw=this.root.parameter.generate(this.num_trials,this.root.parameter._trial_param_values,{aux_param_values:this.root.parameter._trial_aux_param_values,mutually_exclusive:this.root.parameter._trial_mutually_exclusive,rng:rng});};CognitiveStyleClassParameterTrialSequence.prototype._getTrialParameters=function(){var idx,j,p,param,ref,stimulus_param;param=this._getRawTrialParameters();for(idx=j=0,ref=param.length-1;0<=ref?j<=ref:j>=ref;idx=0<=ref?++j:--j){p=param[idx];stimulus_param=this.root.parameter.Stimulus({shape1:p.shape1,shape2:p.shape2,relation:p.relation,negate:p.negate});switch(this.root.version){case 1:param[idx]=this.root.parameter.Trial({target:p.target,"catch":p["catch"],stimulus_param:stimulus_param,prompt_format:p.prompt_format,test_format:p.test_format});break;case 2:param[idx]=this.root.parameter.Trial({target:p.target,distractor_order:p.distractor_order,distractor_shape:p.distractor_shape,stimulus_param:stimulus_param,prompt_format:p.prompt_format,test_format:p.test_format});}}
return[param];};return CognitiveStyleClassParameterTrialSequence;})(ExperimentClassParameterBase);return CognitiveStyleClassParameter;})(ExperimentClassParameter);CognitiveStyle.prototype.ClassInput=window.CognitiveStyleClassInput=(function(superClass1){extend(CognitiveStyleClassInput,superClass1);function CognitiveStyleClassInput(root,options){options=merge_object({'key_yes':root._key_yes,'key_no':root._key_no},options!=null?options:{});CognitiveStyleClassInput.__super__.constructor.call(this,root,options);}
return CognitiveStyleClassInput;})(ExperimentClassInput);CognitiveStyle.prototype.ClassDo=window.CognitiveStyleClassDo=(function(superClass1){extend(CognitiveStyleClassDo,superClass1);function CognitiveStyleClassDo(){this.VVCompareTrials=bind(this.VVCompareTrials,this);this.Instructions=bind(this.Instructions,this);this.Run=bind(this.Run,this);return CognitiveStyleClassDo.__super__.constructor.apply(this,arguments);}
CognitiveStyleClassDo.prototype.Run=function(options){if(options==null){options=null;}
return new this.ClassDoRun(this.root,options);};CognitiveStyleClassDo.prototype.ClassDoRun=window.CognitiveStyleClassDoRun=(function(superClass2){extend(CognitiveStyleClassDoRun,superClass2);CognitiveStyleClassDoRun.prototype._sequence_param=null;CognitiveStyleClassDoRun.prototype.result=null;CognitiveStyleClassDoRun.prototype._saving_stim=null;function CognitiveStyleClassDoRun(root,options){this.callback=bind(this.callback,this);this._saveError=bind(this._saveError,this);this._saveSuccess=bind(this._saveSuccess,this);this._saveResults=bind(this._saveResults,this);this._doQuestionnaires=bind(this._doQuestionnaires,this);this._doTrials=bind(this._doTrials,this);this._doInstructions=bind(this._doInstructions,this);this._verifySubjectError=bind(this._verifySubjectError,this);this._verifySubjectSuccess=bind(this._verifySubjectSuccess,this);this._verifySubject=bind(this._verifySubject,this);var f,next;this.root=root;if(options==null){options={};}
if(options.num_trials==null){options.num_trials=null;}
if(options.randomize==null){options.randomize=true;}
if(options.save==null){options.save=true;}
this.result={};this._sequence_param=this.root.parameter.getSequenceParam({num_trials:options.num_trials,randomize:options.randomize});f=[(function(_this){return function(c){return _this._verifySubject(c,options);};})(this),(function(_this){return function(c){return _this._doInstructions(c,options);};})(this),(function(_this){return function(c){return _this._doTrials(c,options);};})(this)];if(this.root._do_questionnaires){f.push((function(_this){return function(c){return _this._doQuestionnaires(c,options);};})(this));}
next=(function(){var j,ref,results;results=[];for(j=1,ref=f.length;1<=ref?j<=ref:j>=ref;1<=ref?j++:j--){results.push('callback');}
return results;})();CognitiveStyleClassDoRun.__super__.constructor.call(this,root,f,next,options);if(options.save){this.callback(this._saveResults);}else{this.callback(this._saveSuccess);}}
CognitiveStyleClassDoRun.prototype._verifySubject=function(callback,options){return this.root.data.read('completed',{success:(function(_this){return function(result){return _this._verifySubjectSuccess(result,callback);};})(this),error:(function(_this){return function(status,err){return _this._verifySubjectError(status,err);};})(this)});};CognitiveStyleClassDoRun.prototype._verifySubjectSuccess=function(result,callback){if(result.value&&this.root.subject!=='nobody'){return this.root.show.Text('You have already completed this experiment.',{preset:'instruction'});}else{return callback();}};CognitiveStyleClassDoRun.prototype._verifySubjectError=function(status,err){return this.root.show.Text("Error ("+status+")",{preset:'instruction'});};CognitiveStyleClassDoRun.prototype._doInstructions=function(callback,options){var seq;seq=this.root["do"].Instructions(options);if(callback!=null){seq.callback(callback);}
return seq.fire();};CognitiveStyleClassDoRun.prototype._doTrials=function(callback,options){var seq;options=merge_object(options,{sequence_param:this._sequence_param});seq=this.root["do"].VVCompareTrials(options);seq.callback((function(_this){return function(result){return _this.result['trials']=result;};})(this));if(callback!=null){seq.callback(callback);}
return seq.fire();};CognitiveStyleClassDoRun.prototype._doQuestionnaires=function(callback,options){var idx,j,key,q,ref,value;q=(function(){var ref,results;ref=this.root._questionnaires;results=[];for(key in ref){value=ref[key];results.push(this.root["do"].Questionnaire(key,value));}
return results;}).call(this);for(idx=j=0,ref=q.length-2;0<=ref?j<=ref:j>=ref;idx=0<=ref?++j:--j){q[idx].callback(((function(_this){return function(i){return function(res){_this.result[q[i]._key]=res;return q[i+1].fire();};};})(this))(idx));}
q[q.length-1].callback((function(_this){return function(res){return _this.result[q[q.length-1]._key]=res;};})(this));if(callback!=null){q[q.length-1].callback(callback);}
return q[0].fire();};CognitiveStyleClassDoRun.prototype._saveResults=function(result){this._saving_stim=this.root.show.Text('Sending results. Please wait...',{preset:'instruction'});return this.root.data.write('result',JSON.stringify(result),{success:this._saveSuccess,error:this._saveError});};CognitiveStyleClassDoRun.prototype._saveSuccess=function(result){var completion_code,stim,stim1,stim2,stim3;completion_code=result['verification'];this._saving_stim.remove();stim1=this.root.show.Text("You are finished!\n Your completion code is below:\n",{preset:'instruction'});stim2=this.root.show.Text(completion_code,{preset:'data',color:'blue'});stim3=this.root.show.Text('(double-click on the code to select it)',{preset:'instruction','font-style':'italic'});return stim=this.root.show.StimulusGrid([stim1,stim2,stim3],{cols:1,padding:this.root._row_padding});};CognitiveStyleClassDoRun.prototype._saveError=function(status,err){this._saving_stim.remove();return this.root.show.Text("Error (could not connect to server to save data)",{preset:'instruction'});};CognitiveStyleClassDoRun.prototype.callback=function(f){if(f==null){f=null;}
if(f!=null){return CognitiveStyleClassDoRun.__super__.callback.call(this,(function(_this){return function(){return f(_this.result);};})(this));}else{return CognitiveStyleClassDoRun.__super__.callback.call(this,f);}};return CognitiveStyleClassDoRun;})(ExperimentClassDoSequence);CognitiveStyleClassDo.prototype.Instructions=function(options){if(options==null){options=null;}
return new this.ClassDoInstructions(this.root,options);};CognitiveStyleClassDo.prototype.ClassDoInstructions=window.CognitiveStyleClassDoInstructions=(function(superClass2){extend(CognitiveStyleClassDoInstructions,superClass2);CognitiveStyleClassDoInstructions.prototype._verbal_description=null;CognitiveStyleClassDoInstructions.prototype._choice_options={type:'key',key:null,prompt_suffix:'to continue'};CognitiveStyleClassDoInstructions.prototype._choice_final_suffix='to begin';CognitiveStyleClassDoInstructions.prototype._param=[{shape1:'square',shape2:'star',relation:'right'},{shape1:'circle',shape2:'plus',relation:'left'},{shape1:'star',shape2:'triangle',relation:'above'},{shape1:'plus',shape2:'square',relation:'below'}];CognitiveStyleClassDoInstructions.prototype._trial_param=null;function CognitiveStyleClassDoInstructions(root,options){this._savePracticeResults=bind(this._savePracticeResults,this);this._showConclusion=bind(this._showConclusion,this);this._showPracticeTrials=bind(this._showPracticeTrials,this);this._showTrialCatch=bind(this._showTrialCatch,this);this._showTrialTest2=bind(this._showTrialTest2,this);this._showTrialTest=bind(this._showTrialTest,this);this._showTrialPrompt=bind(this._showTrialPrompt,this);this._showExample=bind(this._showExample,this);this._showVisualVerbal=bind(this._showVisualVerbal,this);this._doConclusion=bind(this._doConclusion,this);this._doPracticeTrials=bind(this._doPracticeTrials,this);this._doIntro=bind(this._doIntro,this);var f,next;this.root=root;this._verbal_description=(function(){switch(this.root.version){case 1:return'sentence';case 2:return'word list';}}).call(this);this._choice_options.key=this.root._advance_key;this._trial_param=this.root.parameter.Trial();f=[(function(_this){return function(c){return _this._doIntro(c,options);};})(this),(function(_this){return function(c){return _this._doPracticeTrials(c,options);};})(this),(function(_this){return function(c){return _this._doConclusion(c,options);};})(this)];next=(function(){var j,ref,results;results=[];for(j=1,ref=f.length;1<=ref?j<=ref:j>=ref;1<=ref?j++:j--){results.push('callback');}
return results;})();CognitiveStyleClassDoInstructions.__super__.constructor.call(this,root,f,next,options);}
CognitiveStyleClassDoInstructions.prototype._doIntro=function(callback,options){var next,s,seq,stim;if(callback==null){callback=null;}
if(options==null){options=null;}
stim=[this._showVisualVerbal,(function(_this){return function(){return _this._showExample(0);};})(this),(function(_this){return function(){return _this._showExample(1);};})(this),(function(_this){return function(){return _this._showExample(2);};})(this),(function(_this){return function(){return _this._showExample(3);};})(this),this._showTrialPrompt,this.root.version===1?this._showTrialTest:this._showTrialTest2,(function(_this){return function(){return _this._showPracticeTrials(options);};})(this)];next=(function(){var j,len,results;results=[];for(j=0,len=stim.length;j<len;j++){s=stim[j];results.push(['choice',copy_object(this._choice_options)]);}
return results;}).call(this);next[next.length-1][1].prompt_suffix=this._choice_final_suffix;seq=this.root.show.Sequence(stim,next);if(callback!=null){seq.callback(callback);}
return seq.fire();};CognitiveStyleClassDoInstructions.prototype._doPracticeTrials=function(callback,options){var seq,sequence_param;if(callback==null){callback=null;}
if(options==null){options=null;}
if(options==null){options={};}
if(options.num_practice_trials==null){options.num_practice_trials=this.root._instruct_num_trials;}
sequence_param=this.root.parameter.TrialSequence({num_trials:options.num_practice_trials});seq=this.root["do"].VVCompareTrials({sequence_param:sequence_param});seq.callback(this._savePracticeResults);if(callback!=null){seq.callback(callback);}
return seq.fire();};CognitiveStyleClassDoInstructions.prototype._doConclusion=function(callback,options){var next,s,seq,stim;if(callback==null){callback=null;}
if(options==null){options=null;}
stim=[this._showTrialCatch,(function(_this){return function(){return _this._showConclusion(options);};})(this),null];next=(function(){var j,len,results;results=[];for(j=0,len=stim.length;j<len;j++){s=stim[j];results.push(['choice',copy_object(this._choice_options)]);}
return results;}).call(this);next[next.length-2][1].prompt_suffix=this._choice_final_suffix;next[next.length-1]=1000;seq=this.root.show.Sequence(stim,next);if(callback!=null){seq.callback(callback);}
return seq.fire();};CognitiveStyleClassDoInstructions.prototype._showVisualVerbal=function(){var grid,param,stim1,stim2,text1,text2;param=this.root.parameter.Stimulus(this._param[0]);text1=this.root.show.Text("You will now complete a series of trials\n in which you compare "+this._verbal_description+"s like this:",this.root._instruct_text_options);stim1=this.root.show.VerbalStimulus({stim_param:param});text2=this.root.show.Text('to pictures like this:',this.root._instruct_text_options);stim2=this.root.show.VisualStimulus({stim_param:param});return grid=this.root.show.StimulusGrid([text1,stim1,text2,stim2],{cols:1,padding:this.root._row_padding});};CognitiveStyleClassDoInstructions.prototype._showExample=function(idx){var num_cols,padding,param,stim_pair,stim_verbal,stim_visual,textA,textB;param=this._param[idx];textA=this.root.show.Text("Each "+this._verbal_description+" has a matching picture.\n A few examples will be shown below:",this.root._instruct_text_options);switch(this.root.version){case 1:num_cols=1;padding=this.root._row_padding;break;case 2:num_cols=2;padding=this.root._col_padding;}
stim_verbal=this.root.show.VerbalStimulus({stim_param:param});stim_visual=this.root.show.VisualStimulus({stim_param:param});stim_pair=this.root.show.StimulusGrid([stim_verbal,stim_visual],{cols:num_cols,padding:padding});textB=this.root.show.Text("Note that the first shape in the "+this._verbal_description+"\n goes with the red shape in the picture.",this.root._instruct_text_options);return this.root.show.StimulusGrid([textA,stim_pair,textB],{cols:1,padding:this.root._row_padding});};CognitiveStyleClassDoInstructions.prototype._showTrialPrompt=function(){var grid,param,stim,textA,textB;param=this._trial_param.prompt_param;textA=this.root.show.Text("Each trial starts with either a "+this._verbal_description+"\n or a picture (example below).",this.root._instruct_text_options);textB=this.root.show.Text("You can view it for as long as you need.\n When you are ready to move on, press "+this.root._advance_key+".",this.root._instruct_text_options);stim=this.root.show.VisualStimulus({stim_param:param});return grid=this.root.show.StimulusGrid([textA,stim,textB],{cols:1,padding:this.root._row_padding});};CognitiveStyleClassDoInstructions.prototype._showTrialTest=function(){var grid,key_no,key_yes,param,stim,textA,textB,textC;param=this._trial_param.test_param;key_yes=this.root.input.key2synonym('yes');key_no=this.root.input.key2synonym('no');textA=this.root.show.Text("Next, you will see another "+this._verbal_description+" or picture:",this.root._instruct_text_options);textB=this.root.show.Text("Your task is to decide whether the two displays match,\n regardless of whether they were "+this._verbal_description+"s or pictures.",this.root._instruct_text_options);textC=this.root.show.Text("If they match, press "+key_yes+".\n If they don't match, press "+key_no+".",this.root._instruct_text_options);stim=this.root.show.VerbalStimulus({stim_param:param});return grid=this.root.show.StimulusGrid([textA,stim,textB,textC],{cols:1,padding:this.root._row_padding});};CognitiveStyleClassDoInstructions.prototype._showTrialTest2=function(){var grid,keys,param,ring,stim,textA,textB;keys=this.root.input.key2description(this.root.input._keys['4choice']);textA=this.root.show.Text("Next, you will see four "+this._verbal_description+"s or pictures:",this.root._instruct_text_options);textB=this.root.show.Text("Your task is to choose the matching "+this._verbal_description+" or picture\n by pressing "+keys+".",this.root._instruct_text_options);stim=(function(){var j,len,ref,results;ref=this._trial_param.test_param;results=[];for(j=0,len=ref.length;j<len;j++){param=ref[j];results.push(this.root.show.VerbalStimulus(param));}
return results;}).call(this);ring=this.root.show.StimulusRing(stim,{r:this.root._test_ring_radius});return grid=this.root.show.StimulusGrid([textA,ring,textB],{cols:1,padding:this.root._row_padding});};CognitiveStyleClassDoInstructions.prototype._showTrialCatch=function(){var grid,num_cols,padding,param1,param2,stim1_grid,stim1_verbal,stim1_visual,stim2_grid,stim2_verbal,stim2_visual,textA,textB;param1=this.root.parameter.Stimulus(this._param[0]);param2=param1.copy().switchRelation().switchOrder();textA=this.root.show.Text("Finally, note that you will never see two displays that\n don't match but describe the same configuration.\n For example, one of these:",this.root._instruct_text_options);textB=this.root.show.Text("will never be followed by one of these:",this.root._instruct_text_options);switch(this.root.version){case 1:num_cols=1;padding=this.root._row_padding;break;case 2:num_cols=2;padding=this.root._col_padding;}
stim1_verbal=this.root.show.VerbalStimulus({stim_param:param1});stim1_visual=this.root.show.VisualStimulus({stim_param:param1});stim1_grid=this.root.show.StimulusGrid([stim1_verbal,stim1_visual],{cols:num_cols,padding:padding});stim2_verbal=this.root.show.VerbalStimulus({stim_param:param2});stim2_visual=this.root.show.VisualStimulus({stim_param:param2});stim2_grid=this.root.show.StimulusGrid([stim2_verbal,stim2_visual],{cols:num_cols});return grid=this.root.show.StimulusGrid([textA,stim1_grid,textB,stim2_grid],{cols:1,padding:this.root._row_padding});};CognitiveStyleClassDoInstructions.prototype._showPracticeTrials=function(options){var grid,textA,textB,trial_plural;if(options==null){options=null;}
if(options==null){options={};}
if(options.num_practice_trials==null){options.num_practice_trials=this.root._instruct_num_trials;}
trial_plural=options.num_practice_trials===1?'':'s';textA=this.root.show.Text("After each trial, the next trial begins immediately.",this.root._instruct_text_options);textB=this.root.show.Text("Now you will try "+options.num_practice_trials+" practice trial"+trial_plural+".",this.root._instruct_text_options);return grid=this.root.show.StimulusGrid([textA,textB],{cols:1,padding:this.root._row_padding});};CognitiveStyleClassDoInstructions.prototype._showConclusion=function(options){var block_plural,textA,trial_plural;if(options==null){options=null;}
if(options==null){options={};}
if(options.num_trials==null){options.num_trials=this.root.parameter.getDefaultNumTrials();}
if(options.trials_per_block==null){options.trials_per_block=this.root.parameter._trials_per_block;}
trial_plural=options.num_trials===1?'':'s';block_plural=options.trials_per_block===1?'':'s';return textA=this.root.show.Text("The experiment will now begin.\n You will complete "+options.num_trials+" trial"+trial_plural+",\n and will be given a break every "+options.trials_per_block+" trial"+block_plural+".",this.root._instruct_text_options);};CognitiveStyleClassDoInstructions.prototype._savePracticeResults=function(result){return this.root.data.write('practice_result',JSON.stringify(result));};return CognitiveStyleClassDoInstructions;})(ExperimentClassDoSequence);CognitiveStyleClassDo.prototype.VVCompareTrials=function(options){if(options==null){options=null;}
return new this.ClassDoVVCompareTrials(this.root,options);};CognitiveStyleClassDo.prototype.ClassDoVVCompareTrials=window.CognitiveStyleClassDoVVCompareTrials=(function(superClass2){extend(CognitiveStyleClassDoVVCompareTrials,superClass2);CognitiveStyleClassDoVVCompareTrials.prototype.result=null;CognitiveStyleClassDoVVCompareTrials.prototype._sequence_param=null;CognitiveStyleClassDoVVCompareTrials.prototype._counter=null;CognitiveStyleClassDoVVCompareTrials.prototype._callback_ready=false;function CognitiveStyleClassDoVVCompareTrials(root,options){this.callback=bind(this.callback,this);this._processTrialResult=bind(this._processTrialResult,this);this._trialCounter=bind(this._trialCounter,this);this.runRest=bind(this.runRest,this);this.runTrial=bind(this.runTrial,this);CognitiveStyleClassDoVVCompareTrials.__super__.constructor.call(this,root,(function(_this){return function(){return _this.runTrial(0);};})(this));if(options==null){options={};}
if(options.sequence_param==null){options.sequence_param=this.root.parameter.TrialSequence();}
this._sequence_param=options.sequence_param;this.result=(function(){var j,ref,results;results=[];for(j=1,ref=this._sequence_param.num_trials;1<=ref?j<=ref:j>=ref;1<=ref?j++:j--){results.push(null);}
return results;}).call(this);this._counter=this.root.show.Text(this._trialCounter(0),{"text-anchor":'start',l:4,t:4});}
CognitiveStyleClassDoVVCompareTrials.prototype.runTrial=function(idx){var block_number,f_callback,next_idx,trial,trial_param;this._counter.attr('text',this._trialCounter(idx));trial_param=this._sequence_param.trial_param[idx];trial=this.root.trial.VVCompare({trial_param:trial_param});trial.callback((function(_this){return function(result){return _this._processTrialResult(idx,result);};})(this));if(idx<this._sequence_param.num_trials-1){next_idx=idx+1;block_number=next_idx/this.root.parameter._trials_per_block;if(block_number===Math.floor(block_number)){f_callback=(function(_this){return function(){return _this.runRest(next_idx);};})(this);}else{f_callback=(function(_this){return function(){return _this.runTrial(next_idx);};})(this);}
trial.callback(f_callback);}else{trial.callback((function(_this){return function(){_this._callback_ready=true;return _this.callback();};})(this));}
return trial.fire();};CognitiveStyleClassDoVVCompareTrials.prototype.runRest=function(idx){var choice,text,text_options,trials_plural,trials_remaining;trials_remaining=this._sequence_param.num_trials-idx;trials_plural=trials_remaining===1?'':'s';text_options=merge_object(this.root._instruct_text_options,{show:true});text=this.root.show.Text("You may now rest.\n You have "+trials_remaining+" trial"+trials_plural+" remaining.",text_options);choice=this.root.show.Choice([text],{type:'key',key:this.root._advance_key,prompt_suffix:'to continue'});return choice.callback((function(_this){return function(obj,c){choice.remove();return _this.runTrial(idx);};})(this));};CognitiveStyleClassDoVVCompareTrials.prototype._trialCounter=function(idx){var current_trial,num_trials;num_trials=''+this._sequence_param.num_trials;current_trial=string_pad(idx+1,num_trials.length);return"Trial "+current_trial+" of "+num_trials;};CognitiveStyleClassDoVVCompareTrials.prototype._processTrialResult=function(idx,result){return this.result[idx]=result;};CognitiveStyleClassDoVVCompareTrials.prototype.callback=function(f){if(f==null){f=null;}
if(f!=null){return CognitiveStyleClassDoVVCompareTrials.__super__.callback.call(this,(function(_this){return function(){return f(_this.result);};})(this));}else{if(this._callback_ready){this._counter.remove();return CognitiveStyleClassDoVVCompareTrials.__super__.callback.call(this,f);}}};return CognitiveStyleClassDoVVCompareTrials;})(ExperimentClassDoAction);return CognitiveStyleClassDo;})(ExperimentClassDo);CognitiveStyle.prototype.ClassShow=window.CognitiveStyleClassShow=(function(superClass1){extend(CognitiveStyleClassShow,superClass1);function CognitiveStyleClassShow(){this.ShapeStimuli=bind(this.ShapeStimuli,this);this.VerbalMask=bind(this.VerbalMask,this);this.VisualMask=bind(this.VisualMask,this);this.VerbalStimulus=bind(this.VerbalStimulus,this);this.VisualStimulus=bind(this.VisualStimulus,this);return CognitiveStyleClassShow.__super__.constructor.apply(this,arguments);}
CognitiveStyleClassShow.prototype.VisualStimulus=function(options){if(options==null){options=null;}
return new this.ClassShowVisualStimulus(this.root,options);};CognitiveStyleClassShow.prototype.ClassShowVisualStimulus=window.CognitiveStyleClassShowVisualStimulus=(function(superClass2){extend(CognitiveStyleClassShowVisualStimulus,superClass2);CognitiveStyleClassShowVisualStimulus.prototype._shape1=null;CognitiveStyleClassShowVisualStimulus.prototype._shape2=null;CognitiveStyleClassShowVisualStimulus.prototype._stim_param=null;function CognitiveStyleClassShowVisualStimulus(root,options){this._showShape2=bind(this._showShape2,this);this._showShape1=bind(this._showShape1,this);var elements,ref,shpA,shpB;this.root=root;if(options==null){options={};}
this._stim_param=(ref=object_extract(options,'stim_param'))!=null?ref:this.root.parameter.Stimulus(options);this._shape1=this._showShape1(options);this._shape2=this._showShape2(options);switch(this._stim_param.relation){case'left':case'above':shpA=this._shape1;shpB=this._shape2;break;case'right':case'below':shpA=this._shape2;shpB=this._shape1;break;default:throw'invalid relation';}
elements=this._stim_param.negate?[shpB,shpA]:[shpA,shpB];CognitiveStyleClassShowVisualStimulus.__super__.constructor.call(this,root,elements,options);}
CognitiveStyleClassShowVisualStimulus.prototype._prepareOptions=function(options){this._addDefaults({size:this.root._visual_stimulus_size});switch(this._stim_param.relation){case'left':case'right':this._addDefaults({rows:1,cols:2});break;case'above':case'below':this._addDefaults({rows:2,cols:1});break;default:throw'invalid relation';}
return CognitiveStyleClassShowVisualStimulus.__super__._prepareOptions.call(this,options);};CognitiveStyleClassShowVisualStimulus.prototype._showShape1=function(options){return this.root.show.Shape(this._stim_param.shape1,merge_object(options,{color:this.root.parameter._colors[0]}));};CognitiveStyleClassShowVisualStimulus.prototype._showShape2=function(options){return this.root.show.Shape(this._stim_param.shape2,merge_object(options,{color:this.root.parameter._colors[1]}));};CognitiveStyleClassShowVisualStimulus.prototype.attr=function(name,value){var d1,d2,ret;switch(name){case'size':if(this.attr('cols')===1){d1='width';d2='height';}else{d1='height';d2='width';}
if(value!=null){CognitiveStyleClassShowVisualStimulus.__super__.attr.call(this,d1,value);CognitiveStyleClassShowVisualStimulus.__super__.attr.call(this,d2,2*value+this.attr('padding'));}else{ret=CognitiveStyleClassShowVisualStimulus.__super__.attr.call(this,d1);}
break;default:ret=CognitiveStyleClassShowVisualStimulus.__super__.attr.call(this,name,value);}
if(value!=null){return this;}else{return ret;}};return CognitiveStyleClassShowVisualStimulus;})(ExperimentClassShowStimulusGrid);CognitiveStyleClassShow.prototype.VerbalStimulus=function(options){if(options==null){options=null;}
return new this.ClassShowVerbalStimulus(this.root,options);};CognitiveStyleClassShow.prototype.ClassShowVerbalStimulus=window.CognitiveStyleClassShowVerbalStimulus=(function(superClass2){extend(CognitiveStyleClassShowVerbalStimulus,superClass2);CognitiveStyleClassShowVerbalStimulus.prototype._stim_param=null;function CognitiveStyleClassShowVerbalStimulus(root,options){this._getText=bind(this._getText,this);var ref;this.root=root;if(options==null){options={};}
this._stim_param=(ref=object_extract(options,'stim_param'))!=null?ref:this.root.parameter.Stimulus(options);CognitiveStyleClassShowVerbalStimulus.__super__.constructor.call(this,root,this._getText(),options);}
CognitiveStyleClassShowVerbalStimulus.prototype._prepareOptions=function(options){this._addDefaults({"font-family":'Source Code Pro',"font-size":this.root._verbal_stimulus_font_size});return options=CognitiveStyleClassShowVerbalStimulus.__super__._prepareOptions.call(this,options);};CognitiveStyleClassShowVerbalStimulus.prototype._getText=function(){var negate,relation,shape1,shape2;shape1=this._stim_param.shape1;shape2=this._stim_param.shape2;relation=(function(){switch(this._stim_param.relation){case'left':case'right':return this._stim_param.relation+' of';default:return this._stim_param.relation;}}).call(this);negate=this._stim_param.negate?"not ":"";switch(this.root.version){case 1:return(shape1+" is "+negate+relation+" "+shape2).toUpperCase();case 2:return(shape1+"\n"+negate+relation+"\n"+shape2).toUpperCase();}};return CognitiveStyleClassShowVerbalStimulus;})(ExperimentClassShowText);CognitiveStyleClassShow.prototype.VisualMask=function(options){if(options==null){options=null;}
return new this.ClassShowVisualMask(this.root,options);};CognitiveStyleClassShow.prototype.ClassShowVisualMask=window.CognitiveStyleClassShowVisualMask=(function(superClass2){extend(CognitiveStyleClassShowVisualMask,superClass2);function CognitiveStyleClassShowVisualMask(){this._showShape2=bind(this._showShape2,this);this._showShape1=bind(this._showShape1,this);this._showShape=bind(this._showShape,this);return CognitiveStyleClassShowVisualMask.__super__.constructor.apply(this,arguments);}
CognitiveStyleClassShowVisualMask.prototype._showShape=function(options){return this.root.show.Checkerboard({color1:this.root.parameter._colors[0],color2:this.root.parameter._colors[1],rows:4,padding:4});};CognitiveStyleClassShowVisualMask.prototype._showShape1=function(options){return this._showShape(options);};CognitiveStyleClassShowVisualMask.prototype._showShape2=function(options){return this._showShape(options);};return CognitiveStyleClassShowVisualMask;})(CognitiveStyleClassShowVisualStimulus);CognitiveStyleClassShow.prototype.VerbalMask=function(options){if(options==null){options=null;}
return new this.ClassShowVerbalMask(this.root,options);};CognitiveStyleClassShow.prototype.ClassShowVerbalMask=window.CognitiveStyleClassShowVerbalMask=(function(superClass2){extend(CognitiveStyleClassShowVerbalMask,superClass2);function CognitiveStyleClassShowVerbalMask(){this._getText=bind(this._getText,this);return CognitiveStyleClassShowVerbalMask.__super__.constructor.apply(this,arguments);}
CognitiveStyleClassShowVerbalMask.prototype._getText=function(){var char,chars,idx_word,j,num_chars,num_words,ref,space,text,words;text=CognitiveStyleClassShowVerbalMask.__super__._getText.call(this);words=text.split(/[ \n]/);num_words=words.length;chars=string_scramble(text.replace(/[ \n]/g,''));space=text.replace(/[^ \n]+/g,'');text='';char=0;for(idx_word=j=0,ref=num_words-1;0<=ref?j<=ref:j>=ref;idx_word=0<=ref?++j:--j){num_chars=words[idx_word].length;text+=chars.substring(char,char+num_chars);if(idx_word<num_words-1){text+=space[idx_word];}
char+=num_chars;}
return text;};return CognitiveStyleClassShowVerbalMask;})(CognitiveStyleClassShowVerbalStimulus);CognitiveStyleClassShow.prototype.ShapeStimuli=function(options){if(options==null){options=null;}
return new this.ClassShowShapeStimuli(this.root,options);};CognitiveStyleClassShow.prototype.ClassShowShapeStimuli=window.CognitiveStyleClassShowShapeStimuli=(function(superClass2){extend(CognitiveStyleClassShowShapeStimuli,superClass2);function CognitiveStyleClassShowShapeStimuli(root,options){var grid,j,label,len,ref,s,shape,shape_stims;this.root=root;shape_stims=[];ref=this.root.parameter._shapes;for(j=0,len=ref.length;j<len;j++){shape=ref[j];s=this.root.show.VisualStimulus({shape1:shape,shape2:shape,relation:'above'});label=this.root.show.Text(shape,{preset:'instruction'});grid=this.root.show.StimulusGrid([s,label],{rows:2});shape_stims.push(grid);}
CognitiveStyleClassShowShapeStimuli.__super__.constructor.call(this,root,shape_stims,options);}
CognitiveStyleClassShowShapeStimuli.prototype._prepareOptions=function(options){this._addDefaults({padding:this.root._row_padding});return CognitiveStyleClassShowShapeStimuli.__super__._prepareOptions.call(this,options);};return CognitiveStyleClassShowShapeStimuli;})(ExperimentClassShowStimulusGrid);return CognitiveStyleClassShow;})(ExperimentClassShow);CognitiveStyle.prototype.ClassTrial=window.CognitiveStyleClassTrial=(function(superClass1){extend(CognitiveStyleClassTrial,superClass1);function CognitiveStyleClassTrial(){this.VVCompare=bind(this.VVCompare,this);return CognitiveStyleClassTrial.__super__.constructor.apply(this,arguments);}
CognitiveStyleClassTrial.prototype.VVCompare=function(options){if(options==null){options=null;}
return new this.ClassTrialVVCompare(this.root,options);};CognitiveStyleClassTrial.prototype.ClassTrialVVCompare=window.CognitiveStyleClassTrialVVCompare=(function(superClass2){extend(CognitiveStyleClassTrialVVCompare,superClass2);CognitiveStyleClassTrialVVCompare.prototype._intertrial_time=1000;CognitiveStyleClassTrialVVCompare.prototype._warning_time=500;CognitiveStyleClassTrialVVCompare.prototype._maskflanker_time=50;CognitiveStyleClassTrialVVCompare.prototype._delay_time=400;CognitiveStyleClassTrialVVCompare.prototype._feedback_time=500;CognitiveStyleClassTrialVVCompare.prototype._step_encode=null;CognitiveStyleClassTrialVVCompare.prototype._step_verify=null;CognitiveStyleClassTrialVVCompare.prototype._trial_param=null;function CognitiveStyleClassTrialVVCompare(root,options){this.getResult=bind(this.getResult,this);this._getTestStim=bind(this._getTestStim,this);this._getSequenceNext=bind(this._getSequenceNext,this);this._getSequenceStim=bind(this._getSequenceStim,this);var ref;this.root=root;options=merge_object({trial_param:null,prompt_param:null,test_group_options:{r:this.root._test_ring_radius}},options!=null?options:{});this._trial_param=(ref=options.trial_param)!=null?ref:this.root.parameter.Trial();options.target=this._trial_param.target;CognitiveStyleClassTrialVVCompare.__super__.constructor.call(this,root,options);}
CognitiveStyleClassTrialVVCompare.prototype._getSequenceStim=function(options){var mask,mask_generator,prompt,prompt_generator,stim;prompt_generator=capitalize(this._trial_param.prompt_format)+'Stimulus';prompt=this.root.show[prompt_generator]({stim_param:this._trial_param.prompt_param,show:false});switch(this.root.version){case 1:mask_generator=capitalize(this._trial_param.prompt_format)+'Mask';mask=this.root.show[mask_generator]({stim_param:this._trial_param.prompt_param,show:false});stim=[null,['Circle',{r:8}],prompt,null,mask,null];break;case 2:stim=[null,['Circle',{r:8}],prompt];}
this._step_encode=find(stim,prompt,1)[0];this._step_verify=stim.length;return stim;};CognitiveStyleClassTrialVVCompare.prototype._getSequenceNext=function(sequence_stim,options){var prompt_next;prompt_next=['choice',{type:'key',key:this.root._advance_key,prompt:"Press "+(this.root.input.key2description(this.root._advance_key))+" to continue."}];switch(this.root.version){case 1:return[this._intertrial_time,this._warning_time,prompt_next,this._maskflanker_time,this._delay_time,this._maskflanker_time];case 2:return[this._intertrial_time,this._warning_time,prompt_next];}};CognitiveStyleClassTrialVVCompare.prototype._getTestStim=function(options){var j,len,p,results,stim_param,test_generator;test_generator=capitalize(this._trial_param.test_format)+'Stimulus';stim_param=this._trial_param.test_param;switch(this.root.version){case 1:return[[test_generator,{stim_param:stim_param}]];case 2:results=[];for(j=0,len=stim_param.length;j<len;j++){p=stim_param[j];results.push([test_generator,{stim_param:p}]);}
return results;}};CognitiveStyleClassTrialVVCompare.prototype.getResult=function(){var full_result,obj,result;full_result=CognitiveStyleClassTrialVVCompare.__super__.getResult.call(this);return result={t_show:(function(){var j,len,results;results=[];for(j=0,len=full_result.length;j<len;j++){obj=full_result[j];results.push(obj.t.show);}
return results;})(),t_remove:(function(){var j,len,results;results=[];for(j=0,len=full_result.length;j<len;j++){obj=full_result[j];results.push(obj.t.remove);}
return results;})(),param:this._trial_param.toObject(),encoding_rt:full_result[this._step_encode].rt,verification_rt:full_result[this._step_verify].rt,target:full_result[this._step_verify].target,choice:full_result[this._step_verify].choice,correct:full_result[this._step_verify].correct};};return CognitiveStyleClassTrialVVCompare;})(ExperimentClassTrialBase);return CognitiveStyleClassTrial;})(ExperimentClassTrial);return CognitiveStyle;})(Experiment);}).call(this);(function(){$(document).ready(function(){var f_callback,key,num_practice_trials,num_trials,q,ref,ref1,ref2,seq,sequence_param,stim,value;request.debug=request.debug==='true';if(request.subject==null){request.subject='nobody';}
if(request.action==null){request.action='run';}
request.version=Number((ref=request.version)!=null?ref:2);if(request.questionnaires==null){request.questionnaires=true;}
window.exp=new CognitiveStyle({debug:request.debug,csrf:CSRF_TOKEN,subject:request.subject,version:request.version,questionnaires:request.questionnaires});if(!request.debug){return seq=exp["do"].Run().fire();}else{switch(request.action){case'run':num_trials=exp.parameter.getDefaultNumTrials();num_trials=Number((ref1=window.prompt("How many trials?",String(num_trials)))!=null?ref1:num_trials);num_practice_trials=Math.min(num_trials,exp._instruct_num_trials);f_callback=(function(_this){return function(result){var summary;summary=exp.summaryStatistics(result);return console.log(summary);};})(this);seq=exp["do"].Run({num_trials:num_trials,num_practice_trials:num_practice_trials});if(f_callback!=null){seq.callback(f_callback);}
return seq.fire();case'instructions':f_callback=(function(_this){return function(){return exp.show.Text('instructions done!');};})(this);seq=exp["do"].Instructions();return seq.callback(f_callback).fire();case'trials':num_trials=Number((ref2=window.prompt("How many trials?","10"))!=null?ref2:10);sequence_param=exp.parameter.TrialSequence({num_trials:num_trials});f_callback=(function(_this){return function(result){var summary;summary=exp.summaryStatistics(result);return exp.showObject(summary);};})(this);seq=exp["do"].VVCompareTrials({sequence_param:sequence_param});return seq.callback(f_callback).fire();case'shapes':return stim=exp.show.ShapeStimuli();case'sequenceparams':return console.log(exp.getSequenceParams({randomize:true}));case'test':q=(function(){var ref3,results;ref3=exp._questionnaires;results=[];for(key in ref3){value=ref3[key];results.push(exp["do"].Questionnaire(key,value));}
return results;})();return q[0].fire();case'none':break;default:return alert("'"+request.action+"' is an invalid action.");}}});}).call(this);